var Prototype={Version:"1.7.1",Browser:function(){var a=navigator.userAgent,b="[object Opera]"==Object.prototype.toString.call(window.opera);return{IE:!!window.attachEvent&&!b,Opera:b,WebKit:-1<a.indexOf("AppleWebKit/"),Gecko:-1<a.indexOf("Gecko")&&-1===a.indexOf("KHTML"),MobileSafari:/Apple.*Mobile/.test(a)}}(),BrowserFeatures:{XPath:!!document.evaluate,SelectorsAPI:!!document.querySelector,ElementExtensions:function(){var a=window.Element||window.HTMLElement;return!(!a||!a.prototype)}(),SpecificElementExtensions:function(){if("undefined"!==
typeof window.HTMLDivElement)return!0;var a=document.createElement("div"),b=document.createElement("form"),c=!1;a.__proto__&&a.__proto__!==b.__proto__&&(c=!0);return c}()},ScriptFragment:"<script[^>]*>([\\S\\s]*?)\x3c/script\\s*>",JSONFilter:/^\/\*-secure-([\s\S]*)\*\/\s*$/,emptyFunction:function(){},K:function(a){return a}};Prototype.Browser.MobileSafari&&(Prototype.BrowserFeatures.SpecificElementExtensions=!1);
var Class=function(){function a(){}var b=function(){for(var a in{toString:1})if("toString"===a)return!1;return!0}();return{create:function(){function b(){this.initialize.apply(this,arguments)}var d=null,e=$A(arguments);Object.isFunction(e[0])&&(d=e.shift());Object.extend(b,Class.Methods);b.superclass=d;b.subclasses=[];d&&(a.prototype=d.prototype,b.prototype=new a,d.subclasses.push(b));for(var d=0,f=e.length;d<f;d++)b.addMethods(e[d]);b.prototype.initialize||(b.prototype.initialize=Prototype.emptyFunction);
return b.prototype.constructor=b},Methods:{addMethods:function(a){var d=this.superclass&&this.superclass.prototype,e=Object.keys(a);b&&(a.toString!=Object.prototype.toString&&e.push("toString"),a.valueOf!=Object.prototype.valueOf&&e.push("valueOf"));for(var f=0,h=e.length;f<h;f++){var k=e[f],l=a[k];if(d&&Object.isFunction(l)&&"$super"==l.argumentNames()[0]){var g=l,l=function(a){return function(){return d[a].apply(this,arguments)}}(k).wrap(g);l.valueOf=function(a){return function(){return a.valueOf.call(a)}}(g);
l.toString=function(a){return function(){return a.toString.call(a)}}(g)}this.prototype[k]=l}return this}}}}();
(function(){function a(a){switch(a){case null:return"Null";case void 0:return"Undefined"}switch(typeof a){case "boolean":return"Boolean";case "number":return"Number";case "string":return"String"}return"Object"}function b(a,b){for(var c in b)a[c]=b[c];return a}function c(a){return d("",{"":a},[])}function d(b,c,g){c=c[b];"Object"===a(c)&&"function"===typeof c.toJSON&&(c=c.toJSON(b));b=l.call(c);switch(b){case "[object Number]":case "[object Boolean]":case "[object String]":c=c.valueOf()}switch(c){case null:return"null";
case !0:return"true";case !1:return"false"}switch(typeof c){case "string":return c.inspect(!0);case "number":return isFinite(c)?String(c):"null";case "object":for(var e=0,m=g.length;e<m;e++)if(g[e]===c)throw new TypeError("Cyclic reference to '"+c+"' in object");g.push(c);var f=[];if("[object Array]"===b){e=0;for(m=c.length;e<m;e++){var q=d(e,c,g);f.push("undefined"===typeof q?"null":q)}f="["+f.join(",")+"]"}else{for(var k=Object.keys(c),e=0,m=k.length;e<m;e++)b=k[e],q=d(b,c,g),"undefined"!==typeof q&&
f.push(b.inspect(!0)+":"+q);f="{"+f.join(",")+"}"}g.pop();return f}}function e(a){return JSON.stringify(a)}function f(b){if("Object"!==a(b))throw new TypeError;var c=[],d;for(d in b)g.call(b,d)&&c.push(d);if(r)for(var e=0;d=n[e];e++)g.call(b,d)&&c.push(d);return c}function h(a){return"[object Array]"===l.call(a)}function k(a){return"undefined"===typeof a}var l=Object.prototype.toString,g=Object.prototype.hasOwnProperty,m=window.JSON&&"function"===typeof JSON.stringify&&"0"===JSON.stringify(0)&&"undefined"===
typeof JSON.stringify(Prototype.K),n="toString toLocaleString valueOf hasOwnProperty isPrototypeOf propertyIsEnumerable constructor".split(" "),r=function(){for(var a in{toString:1})if("toString"===a)return!1;return!0}();"function"==typeof Array.isArray&&Array.isArray([])&&!Array.isArray({})&&(h=Array.isArray);b(Object,{extend:b,inspect:function(a){try{return k(a)?"undefined":null===a?"null":a.inspect?a.inspect():String(a)}catch(b){if(b instanceof RangeError)return"...";throw b;}},toJSON:m?e:c,toQueryString:function(a){return $H(a).toQueryString()},
toHTML:function(a){return a&&a.toHTML?a.toHTML():String.interpret(a)},keys:Object.keys||f,values:function(a){var b=[],c;for(c in a)b.push(a[c]);return b},clone:function(a){return b({},a)},isElement:function(a){return!(!a||1!=a.nodeType)},isArray:h,isHash:function(a){return a instanceof Hash},isFunction:function(a){return"[object Function]"===l.call(a)},isString:function(a){return"[object String]"===l.call(a)},isNumber:function(a){return"[object Number]"===l.call(a)},isDate:function(a){return"[object Date]"===
l.call(a)},isUndefined:k})})();
Object.extend(Function.prototype,function(){function a(a,b){for(var c=a.length,d=b.length;d--;)a[c+d]=b[d];return a}function b(b,c){b=d.call(b,0);return a(b,c)}function c(a){if(2>arguments.length&&Object.isUndefined(arguments[0]))return this;if(!Object.isFunction(this))throw new TypeError("The object is not callable.");var c=function(){},e=this,l=d.call(arguments,1),g=function(){var c=b(l,arguments);return e.apply(this instanceof g?this:a,c)};c.prototype=this.prototype;g.prototype=new c;return g}
var d=Array.prototype.slice,e={argumentNames:function(){var a=this.toString().match(/^[\s\(]*function[^(]*\(([^)]*)\)/)[1].replace(/\/\/.*?[\r\n]|\/\*(?:.|[\r\n])*?\*\//g,"").replace(/\s+/g,"").split(",");return 1!=a.length||a[0]?a:[]},bindAsEventListener:function(b){var c=this,e=d.call(arguments,1);return function(d){d=a([d||window.event],e);return c.apply(b,d)}},curry:function(){if(!arguments.length)return this;var a=this,c=d.call(arguments,0);return function(){var d=b(c,arguments);return a.apply(this,
d)}},delay:function(a){var b=this,c=d.call(arguments,1);return window.setTimeout(function(){return b.apply(b,c)},1E3*a)},defer:function(){var b=a([.01],arguments);return this.delay.apply(this,b)},wrap:function(b){var c=this;return function(){var d=a([c.bind(this)],arguments);return b.apply(this,d)}},methodize:function(){if(this._methodized)return this._methodized;var b=this;return this._methodized=function(){var c=a([this],arguments);return b.apply(null,c)}}};Function.prototype.bind||(e.bind=c);return e}());
(function(a){function b(){return this.getUTCFullYear()+"-"+(this.getUTCMonth()+1).toPaddedString(2)+"-"+this.getUTCDate().toPaddedString(2)+"T"+this.getUTCHours().toPaddedString(2)+":"+this.getUTCMinutes().toPaddedString(2)+":"+this.getUTCSeconds().toPaddedString(2)+"Z"}function c(){return this.toISOString()}a.toISOString||(a.toISOString=b);a.toJSON||(a.toJSON=c)})(Date.prototype);RegExp.prototype.match=RegExp.prototype.test;
RegExp.escape=function(a){return String(a).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")};
var PeriodicalExecuter=Class.create({initialize:function(a,b){this.callback=a;this.frequency=b;this.currentlyExecuting=!1;this.registerCallback()},registerCallback:function(){this.timer=setInterval(this.onTimerEvent.bind(this),1E3*this.frequency)},execute:function(){this.callback(this)},stop:function(){this.timer&&(clearInterval(this.timer),this.timer=null)},onTimerEvent:function(){if(!this.currentlyExecuting)try{this.currentlyExecuting=!0,this.execute(),this.currentlyExecuting=!1}catch(a){throw this.currentlyExecuting=
!1,a;}}});Object.extend(String,{interpret:function(a){return null==a?"":String(a)},specialChar:{"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","\\":"\\\\"}});
Object.extend(String.prototype,function(){function a(a){if(Object.isFunction(a))return a;var b=new Template(a);return function(a){return b.evaluate(a)}}function b(){return this.replace(/^\s+/,"").replace(/\s+$/,"")}function c(a){var b=this.strip().match(/([^?#]*)(#.*)?$/);return b?b[1].split(a||"&").inject({},function(a,b){if((b=b.split("="))[0]){var c=decodeURIComponent(b.shift()),g=1<b.length?b.join("="):b[0];void 0!=g&&(g=g.gsub("+"," "),g=decodeURIComponent(g));c in a?(Object.isArray(a[c])||(a[c]=
[a[c]]),a[c].push(g)):a[c]=g}return a}):{}}function d(a){var b=this.unfilterJSON(),c=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;c.test(b)&&(b=b.replace(c,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));try{if(!a||b.isJSON())return eval("("+b+")")}catch(d){}throw new SyntaxError("Badly formed JSON string: "+this.inspect());}function e(){var a=this.unfilterJSON();return JSON.parse(a)}function f(a,b){b=Object.isNumber(b)?
b:0;return this.lastIndexOf(a,b)===b}function h(a,b){a=String(a);b=Object.isNumber(b)?b:this.length;0>b&&(b=0);b>this.length&&(b=this.length);var c=b-a.length;return 0<=c&&this.indexOf(a,c)===c}var k=window.JSON&&"function"===typeof JSON.parse&&JSON.parse('{"test": true}').test;return{gsub:function(b,c){var d="",e=this,f;c=a(c);Object.isString(b)&&(b=RegExp.escape(b));if(!b.length&&!b.source)return c=c(""),c+e.split("").join(c)+c;for(;0<e.length;)(f=e.match(b))&&0<f[0].length?(d+=e.slice(0,f.index),
d+=String.interpret(c(f)),e=e.slice(f.index+f[0].length)):(d+=e,e="");return d},sub:function(b,c,d){c=a(c);d=Object.isUndefined(d)?1:d;return this.gsub(b,function(a){return 0>--d?a[0]:c(a)})},scan:function(a,b){this.gsub(a,b);return String(this)},truncate:function(a,b){a=a||30;b=Object.isUndefined(b)?"...":b;return this.length>a?this.slice(0,a-b.length)+b:String(this)},strip:String.prototype.trim||b,stripTags:function(){return this.replace(/<\w+(\s+("[^"]*"|'[^']*'|[^>])+)?>|<\/\w+>/gi,"")},stripScripts:function(){return this.replace(new RegExp(Prototype.ScriptFragment,
"img"),"")},extractScripts:function(){var a=new RegExp(Prototype.ScriptFragment,"im");return(this.match(new RegExp(Prototype.ScriptFragment,"img"))||[]).map(function(b){return(b.match(a)||["",""])[1]})},evalScripts:function(){return this.extractScripts().map(function(a){return eval(a)})},escapeHTML:function(){return this.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},unescapeHTML:function(){return this.stripTags().replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")},
toQueryParams:c,parseQuery:c,toArray:function(){return this.split("")},succ:function(){return this.slice(0,this.length-1)+String.fromCharCode(this.charCodeAt(this.length-1)+1)},times:function(a){return 1>a?"":Array(a+1).join(this)},camelize:function(){return this.replace(/-+(.)?/g,function(a,b){return b?b.toUpperCase():""})},capitalize:function(){return this.charAt(0).toUpperCase()+this.substring(1).toLowerCase()},underscore:function(){return this.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,
"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/-/g,"_").toLowerCase()},dasherize:function(){return this.replace(/_/g,"-")},inspect:function(a){var b=this.replace(/[\x00-\x1f\\]/g,function(a){return a in String.specialChar?String.specialChar[a]:"\\u00"+a.charCodeAt().toPaddedString(2,16)});return a?'"'+b.replace(/"/g,'\\"')+'"':"'"+b.replace(/'/g,"\\'")+"'"},unfilterJSON:function(a){return this.replace(a||Prototype.JSONFilter,"$1")},isJSON:function(){var a=this;if(a.blank())return!1;a=a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,
"@");a=a.replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]");a=a.replace(/(?:^|:|,)(?:\s*\[)+/g,"");return/^[\],:{}\s]*$/.test(a)},evalJSON:k?e:d,include:function(a){return-1<this.indexOf(a)},startsWith:String.prototype.startsWith||f,endsWith:String.prototype.endsWith||h,empty:function(){return""==this},blank:function(){return/^\s*$/.test(this)},interpolate:function(a,b){return(new Template(this,b)).evaluate(a)}}}());
var Template=Class.create({initialize:function(a,b){this.template=a.toString();this.pattern=b||Template.Pattern},evaluate:function(a){a&&Object.isFunction(a.toTemplateReplacements)&&(a=a.toTemplateReplacements());return this.template.gsub(this.pattern,function(b){if(null==a)return b[1]+"";var c=b[1]||"";if("\\"==c)return b[2];var d=a,e=b[3],f=/^([^.[]+|\[((?:.*?[^\\])?)\])(\.|\[|$)/;b=f.exec(e);if(null==b)return c;for(;null!=b;){var h=b[1].startsWith("[")?b[2].replace(/\\\\]/g,"]"):b[1],d=d[h];if(null==
d||""==b[3])break;e=e.substring("["==b[3]?b[1].length:b[0].length);b=f.exec(e)}return c+String.interpret(d)})}});Template.Pattern=/(^|.|\r|\n)(#\{(.*?)\})/;
var $break={},Enumerable=function(){function a(a,b){a=a||Prototype.K;var c=!0;this.each(function(d,e){c=c&&!!a.call(b,d,e,this);if(!c)throw $break;},this);return c}function b(a,b){a=a||Prototype.K;var c=!1;this.each(function(d,e){if(c=!!a.call(b,d,e,this))throw $break;},this);return c}function c(a,b){a=a||Prototype.K;var c=[];this.each(function(d,e){c.push(a.call(b,d,e,this))},this);return c}function d(a,b){var c;this.each(function(d,e){if(a.call(b,d,e,this))throw c=d,$break;},this);return c}function e(a,
b){var c=[];this.each(function(d,e){a.call(b,d,e,this)&&c.push(d)},this);return c}function f(a){if(Object.isFunction(this.indexOf)&&-1!=this.indexOf(a))return!0;var b=!1;this.each(function(c){if(c==a)throw b=!0,$break;});return b}function h(){return this.map()}return{each:function(a,b){try{this._each(a,b)}catch(c){if(c!=$break)throw c;}return this},eachSlice:function(a,b,c){var d=-a,e=[],f=this.toArray();if(1>a)return f;for(;(d+=a)<f.length;)e.push(f.slice(d,d+a));return e.collect(b,c)},all:a,every:a,
any:b,some:b,collect:c,map:c,detect:d,findAll:e,select:e,filter:e,grep:function(a,b,c){b=b||Prototype.K;var d=[];Object.isString(a)&&(a=new RegExp(RegExp.escape(a)));this.each(function(e,f){a.match(e)&&d.push(b.call(c,e,f,this))},this);return d},include:f,member:f,inGroupsOf:function(a,b){b=Object.isUndefined(b)?null:b;return this.eachSlice(a,function(c){for(;c.length<a;)c.push(b);return c})},inject:function(a,b,c){this.each(function(d,e){a=b.call(c,a,d,e,this)},this);return a},invoke:function(a){var b=
$A(arguments).slice(1);return this.map(function(c){return c[a].apply(c,b)})},max:function(a,b){a=a||Prototype.K;var c;this.each(function(d,e){d=a.call(b,d,e,this);if(null==c||d>=c)c=d},this);return c},min:function(a,b){a=a||Prototype.K;var c;this.each(function(d,e){d=a.call(b,d,e,this);if(null==c||d<c)c=d},this);return c},partition:function(a,b){a=a||Prototype.K;var c=[],d=[];this.each(function(e,f){(a.call(b,e,f,this)?c:d).push(e)},this);return[c,d]},pluck:function(a){var b=[];this.each(function(c){b.push(c[a])});
return b},reject:function(a,b){var c=[];this.each(function(d,e){a.call(b,d,e,this)||c.push(d)},this);return c},sortBy:function(a,b){return this.map(function(c,d){return{value:c,criteria:a.call(b,c,d,this)}},this).sort(function(a,b){var c=a.criteria,d=b.criteria;return c<d?-1:c>d?1:0}).pluck("value")},toArray:h,entries:h,zip:function(){var a=Prototype.K,b=$A(arguments);Object.isFunction(b.last())&&(a=b.pop());var c=[this].concat(b).map($A);return this.map(function(b,d){return a(c.pluck(d))})},size:function(){return this.toArray().length},
inspect:function(){return"#<Enumerable:"+this.toArray().inspect()+">"},find:d}}();function $A(a){if(!a)return[];if("toArray"in Object(a))return a.toArray();for(var b=a.length||0,c=Array(b);b--;)c[b]=a[b];return c}function $w(a){return Object.isString(a)?(a=a.strip())?a.split(/\s+/):[]:[]}Array.from=$A;
(function(){function a(a,b){for(var c=0,d=this.length>>>0;c<d;c++)c in this&&a.call(b,this[c],c,this)}function b(){return r.call(this,0)}function c(a,b){if(null==this)throw new TypeError;var c=Object(this),d=c.length>>>0;if(0===d)return-1;b=Number(b);isNaN(b)?b=0:0!==b&&isFinite(b)&&(b=(0<b?1:-1)*Math.floor(Math.abs(b)));if(b>d)return-1;for(var e=0<=b?b:Math.max(d-Math.abs(b),0);e<d;e++)if(e in c&&c[e]===a)return e;return-1}function d(a,b){if(null==this)throw new TypeError;var c=Object(this),d=c.length>>>
0;if(0===d)return-1;Object.isUndefined(b)?b=d:(b=Number(b),isNaN(b)?b=0:0!==b&&isFinite(b)&&(b=(0<b?1:-1)*Math.floor(Math.abs(b))));for(d=0<=b?Math.min(b,d-1):d-Math.abs(b);0<=d;d--)if(d in c&&c[d]===a)return d;return-1}function e(a){var b=[],c=r.call(arguments,0),d,e=0;c.unshift(this);for(var g=0,m=c.length;g<m;g++)if(d=c[g],!Object.isArray(d)||"callee"in d)b[e++]=d;else for(var f=0,h=d.length;f<h;f++)f in d&&(b[e]=d[f]),e++;b.length=e;return b}function f(a){return function(){if(0===arguments.length)return a.call(this,
Prototype.K);if(void 0===arguments[0]){var b=r.call(arguments,1);b.unshift(Prototype.K);return a.apply(this,b)}return a.apply(this,arguments)}}function h(a,b){if(null==this)throw new TypeError;a=a||Prototype.K;for(var c=Object(this),d=[],e=0,g=0,f=c.length>>>0;g<f;g++)g in c&&(d[e]=a.call(b,c[g],g,c)),e++;d.length=e;return d}function k(a,b){if(null==this||!Object.isFunction(a))throw new TypeError;for(var c=Object(this),d=[],e,g=0,f=c.length>>>0;g<f;g++)g in c&&(e=c[g],a.call(b,e,g,c)&&d.push(e));
return d}function l(a,b){if(null==this)throw new TypeError;a=a||Prototype.K;for(var c=Object(this),d=0,e=c.length>>>0;d<e;d++)if(d in c&&a.call(b,c[d],d,c))return!0;return!1}function g(a,b){if(null==this)throw new TypeError;a=a||Prototype.K;for(var c=Object(this),d=0,e=c.length>>>0;d<e;d++)if(d in c&&!a.call(b,c[d],d,c))return!1;return!0}function m(a,b,c){b=b||Prototype.K;return s.call(this,b.bind(c),a)}var n=Array.prototype,r=n.slice,x=n.forEach;x||(x=a);n.map&&(h=f(Array.prototype.map));n.filter&&
(k=Array.prototype.filter);n.some&&(l=f(Array.prototype.some));n.every&&(g=f(Array.prototype.every));var s=n.reduce;n.reduce||(m=Enumerable.inject);Object.extend(n,Enumerable);n._reverse||(n._reverse=n.reverse);Object.extend(n,{_each:x,map:h,collect:h,select:k,filter:k,findAll:k,some:l,any:l,every:g,all:g,inject:m,clear:function(){this.length=0;return this},first:function(){return this[0]},last:function(){return this[this.length-1]},compact:function(){return this.select(function(a){return null!=a})},
flatten:function(){return this.inject([],function(a,b){if(Object.isArray(b))return a.concat(b.flatten());a.push(b);return a})},without:function(){var a=r.call(arguments,0);return this.select(function(b){return!a.include(b)})},reverse:function(a){return(!1===a?this.toArray():this)._reverse()},uniq:function(a){return this.inject([],function(b,c,d){0!=d&&(a?b.last()==c:b.include(c))||b.push(c);return b})},intersect:function(a){return this.uniq().findAll(function(b){return-1!==a.indexOf(b)})},clone:b,
toArray:b,size:function(){return this.length},inspect:function(){return"["+this.map(Object.inspect).join(", ")+"]"}});(function(){return 1!==[].concat(arguments)[0][0]})(1,2)&&(n.concat=e);n.indexOf||(n.indexOf=c);n.lastIndexOf||(n.lastIndexOf=d)})();function $H(a){return new Hash(a)}
var Hash=Class.create(Enumerable,function(){function a(){return Object.clone(this._object)}function b(a,b){if(Object.isUndefined(b))return a;b=String.interpret(b);b=b.gsub(/(\r)?\n/,"\r\n");b=encodeURIComponent(b);b=b.gsub(/%20/,"+");return a+"="+b}return{initialize:function(a){this._object=Object.isHash(a)?a.toObject():Object.clone(a)},_each:function(a,b){var e=0,f;for(f in this._object){var h=this._object[f],k=[f,h];k.key=f;k.value=h;a.call(b,k,e);e++}},set:function(a,b){return this._object[a]=
b},get:function(a){if(this._object[a]!==Object.prototype[a])return this._object[a]},unset:function(a){var b=this._object[a];delete this._object[a];return b},toObject:a,toTemplateReplacements:a,keys:function(){return this.pluck("key")},values:function(){return this.pluck("value")},index:function(a){var b=this.detect(function(b){return b.value===a});return b&&b.key},merge:function(a){return this.clone().update(a)},update:function(a){return(new Hash(a)).inject(this,function(a,b){a.set(b.key,b.value);
return a})},toQueryString:function(){return this.inject([],function(a,d){var e=encodeURIComponent(d.key),f=d.value;if(f&&"object"==typeof f){if(Object.isArray(f)){for(var h=[],k=0,l=f.length,g;k<l;k++)g=f[k],h.push(b(e,g));return a.concat(h)}}else a.push(b(e,f));return a}).join("&")},inspect:function(){return"#<Hash:{"+this.map(function(a){return a.map(Object.inspect).join(": ")}).join(", ")+"}>"},toJSON:a,clone:function(){return new Hash(this)}}}());Hash.from=$H;
Object.extend(Number.prototype,function(){return{toColorPart:function(){return this.toPaddedString(2,16)},succ:function(){return this+1},times:function(a,b){$R(0,this,!0).each(a,b);return this},toPaddedString:function(a,b){var c=this.toString(b||10);return"0".times(a-c.length)+c},abs:function(){return Math.abs(this)},round:function(){return Math.round(this)},ceil:function(){return Math.ceil(this)},floor:function(){return Math.floor(this)}}}());function $R(a,b,c){return new ObjectRange(a,b,c)}
var ObjectRange=Class.create(Enumerable,function(){return{initialize:function(a,b,c){this.start=a;this.end=b;this.exclusive=c},_each:function(a,b){var c=this.start,d;for(d=0;this.include(c);d++)a.call(b,c,d),c=c.succ()},include:function(a){return a<this.start?!1:this.exclusive?a<this.end:a<=this.end}}}()),Abstract={},Try={these:function(){for(var a,b=0,c=arguments.length;b<c;b++){var d=arguments[b];try{a=d();break}catch(e){}}return a}},Ajax={getTransport:function(){return Try.these(function(){return new XMLHttpRequest},
function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")})||!1},activeRequestCount:0,Responders:{responders:[],_each:function(a,b){this.responders._each(a,b)},register:function(a){this.include(a)||this.responders.push(a)},unregister:function(a){this.responders=this.responders.without(a)},dispatch:function(a,b,c,d){this.each(function(e){if(Object.isFunction(e[a]))try{e[a].apply(e,[b,c,d])}catch(f){}})}}};Object.extend(Ajax.Responders,Enumerable);
Ajax.Responders.register({onCreate:function(){Ajax.activeRequestCount++},onComplete:function(){Ajax.activeRequestCount--}});Ajax.Base=Class.create({initialize:function(a){this.options={method:"post",asynchronous:!0,contentType:"application/x-www-form-urlencoded",encoding:"UTF-8",parameters:"",evalJSON:!0,evalJS:!0};Object.extend(this.options,a||{});this.options.method=this.options.method.toLowerCase();Object.isHash(this.options.parameters)&&(this.options.parameters=this.options.parameters.toObject())}});
Ajax.Request=Class.create(Ajax.Base,{_complete:!1,initialize:function($super,b,c){$super(c);this.transport=Ajax.getTransport();this.request(b)},request:function(a){this.url=a;this.method=this.options.method;a=Object.isString(this.options.parameters)?this.options.parameters:Object.toQueryString(this.options.parameters);["get","post"].include(this.method)||(a+=(a?"&":"")+"_method="+this.method,this.method="post");a&&"get"===this.method&&(this.url+=(this.url.include("?")?"&":"?")+a);this.parameters=
a.toQueryParams();try{var b=new Ajax.Response(this);if(this.options.onCreate)this.options.onCreate(b);Ajax.Responders.dispatch("onCreate",this,b);this.transport.open(this.method.toUpperCase(),this.url,this.options.asynchronous);this.options.asynchronous&&this.respondToReadyState.bind(this).defer(1);this.transport.onreadystatechange=this.onStateChange.bind(this);this.setRequestHeaders();this.body="post"==this.method?this.options.postBody||a:null;this.transport.send(this.body);if(!this.options.asynchronous&&
this.transport.overrideMimeType)this.onStateChange()}catch(c){this.dispatchException(c)}},onStateChange:function(){var a=this.transport.readyState;1<a&&(4!=a||!this._complete)&&this.respondToReadyState(this.transport.readyState)},setRequestHeaders:function(){var a={"X-Requested-With":"XMLHttpRequest","X-Prototype-Version":Prototype.Version,Accept:"text/javascript, text/html, application/xml, text/xml, */*"};"post"==this.method&&(a["Content-type"]=this.options.contentType+(this.options.encoding?"; charset="+
this.options.encoding:""),this.transport.overrideMimeType&&2005>(navigator.userAgent.match(/Gecko\/(\d{4})/)||[0,2005])[1]&&(a.Connection="close"));if("object"==typeof this.options.requestHeaders){var b=this.options.requestHeaders;if(Object.isFunction(b.push))for(var c=0,d=b.length;c<d;c+=2)a[b[c]]=b[c+1];else $H(b).each(function(b){a[b.key]=b.value})}for(var e in a)null!=a[e]&&this.transport.setRequestHeader(e,a[e])},success:function(){var a=this.getStatus();return!a||200<=a&&300>a||304==a},getStatus:function(){try{return 1223===
this.transport.status?204:this.transport.status||0}catch(a){return 0}},respondToReadyState:function(a){a=Ajax.Request.Events[a];var b=new Ajax.Response(this);if("Complete"==a){try{this._complete=!0,(this.options["on"+b.status]||this.options["on"+(this.success()?"Success":"Failure")]||Prototype.emptyFunction)(b,b.headerJSON)}catch(c){this.dispatchException(c)}var d=b.getHeader("Content-type");("force"==this.options.evalJS||this.options.evalJS&&this.isSameOrigin()&&d&&d.match(/^\s*(text|application)\/(x-)?(java|ecma)script(;.*)?\s*$/i))&&
this.evalResponse()}try{(this.options["on"+a]||Prototype.emptyFunction)(b,b.headerJSON),Ajax.Responders.dispatch("on"+a,this,b,b.headerJSON)}catch(e){this.dispatchException(e)}"Complete"==a&&(this.transport.onreadystatechange=Prototype.emptyFunction)},isSameOrigin:function(){var a=this.url.match(/^\s*https?:\/\/[^\/]*/);return!a||a[0]=="#{protocol}//#{domain}#{port}".interpolate({protocol:location.protocol,domain:document.domain,port:location.port?":"+location.port:""})},getHeader:function(a){try{return this.transport.getResponseHeader(a)||
null}catch(b){return null}},evalResponse:function(){try{return eval((this.transport.responseText||"").unfilterJSON())}catch(a){this.dispatchException(a)}},dispatchException:function(a){(this.options.onException||Prototype.emptyFunction)(this,a);Ajax.Responders.dispatch("onException",this,a)}});Ajax.Request.Events=["Uninitialized","Loading","Loaded","Interactive","Complete"];
Ajax.Response=Class.create({initialize:function(a){this.request=a;a=this.transport=a.transport;var b=this.readyState=a.readyState;if(2<b&&!Prototype.Browser.IE||4==b)this.status=this.getStatus(),this.statusText=this.getStatusText(),this.responseText=String.interpret(a.responseText),this.headerJSON=this._getHeaderJSON();4==b&&(a=a.responseXML,this.responseXML=Object.isUndefined(a)?null:a,this.responseJSON=this._getResponseJSON())},status:0,statusText:"",getStatus:Ajax.Request.prototype.getStatus,getStatusText:function(){try{return this.transport.statusText||
""}catch(a){return""}},getHeader:Ajax.Request.prototype.getHeader,getAllHeaders:function(){try{return this.getAllResponseHeaders()}catch(a){return null}},getResponseHeader:function(a){return this.transport.getResponseHeader(a)},getAllResponseHeaders:function(){return this.transport.getAllResponseHeaders()},_getHeaderJSON:function(){var a=this.getHeader("X-JSON");if(!a)return null;try{a=decodeURIComponent(escape(a))}catch(b){}try{return a.evalJSON(this.request.options.sanitizeJSON||!this.request.isSameOrigin())}catch(c){this.request.dispatchException(c)}},
_getResponseJSON:function(){var a=this.request.options;if(!a.evalJSON||"force"!=a.evalJSON&&!(this.getHeader("Content-type")||"").include("application/json")||this.responseText.blank())return null;try{return this.responseText.evalJSON(a.sanitizeJSON||!this.request.isSameOrigin())}catch(b){this.request.dispatchException(b)}}});
Ajax.Updater=Class.create(Ajax.Request,{initialize:function($super,b,c,d){this.container={success:b.success||b,failure:b.failure||(b.success?null:b)};d=Object.clone(d);var e=d.onComplete;d.onComplete=function(b,c){this.updateContent(b.responseText);Object.isFunction(e)&&e(b,c)}.bind(this);$super(c,d)},updateContent:function(a){var b=this.container[this.success()?"success":"failure"],c=this.options;c.evalScripts||(a=a.stripScripts());if(b=$(b))if(c.insertion)if(Object.isString(c.insertion)){var d=
{};d[c.insertion]=a;b.insert(d)}else c.insertion(b,a);else b.update(a)}});
Ajax.PeriodicalUpdater=Class.create(Ajax.Base,{initialize:function($super,b,c,d){$super(d);this.onComplete=this.options.onComplete;this.frequency=this.options.frequency||2;this.decay=this.options.decay||1;this.updater={};this.container=b;this.url=c;this.start()},start:function(){this.options.onComplete=this.updateComplete.bind(this);this.onTimerEvent()},stop:function(){this.updater.options.onComplete=void 0;clearTimeout(this.timer);(this.onComplete||Prototype.emptyFunction).apply(this,arguments)},
updateComplete:function(a){this.options.decay&&(this.decay=a.responseText==this.lastText?this.decay*this.options.decay:1,this.lastText=a.responseText);this.timer=this.onTimerEvent.bind(this).delay(this.decay*this.frequency)},onTimerEvent:function(){this.updater=new Ajax.Updater(this.container,this.url,this.options)}});
(function(a){function b(a){if(1<arguments.length){for(var d=0,e=[],g=arguments.length;d<g;d++)e.push(b(arguments[d]));return e}Object.isString(a)&&(a=document.getElementById(a));return c.extend(a)}function c(a,b){b=b||{};a=a.toLowerCase();if(ia&&b.name)return a="<"+a+' name="'+b.name+'">',delete b.name,c.writeAttribute(document.createElement(a),b);R[a]||(R[a]=c.extend(document.createElement(a)));var d="select"===a||"type"in b?document.createElement(a):R[a].cloneNode(!1);return c.writeAttribute(d,
b)}function d(a,c){a=b(a);if(c&&c.toElement)c=c.toElement();else if(!Object.isElement(c)){c=Object.toHTML(c);var d=a.ownerDocument.createRange();d.selectNode(a);c.evalScripts.bind(c).defer();c=d.createContextualFragment(c.stripScripts())}a.parentNode.replaceChild(c,a);return a}function e(a,d){a=b(a);d&&d.toElement&&(d=d.toElement());if(Object.isElement(d))return a.parentNode.replaceChild(d,a),a;d=Object.toHTML(d);var e=a.parentNode,g=e.tagName.toUpperCase();if(g in S.tags){var q=c.next(a),g=f(g,d.stripScripts());
e.removeChild(a);g.each(q?function(a){e.insertBefore(a,q)}:function(a){e.appendChild(a)})}else a.outerHTML=d.stripScripts();d.evalScripts.bind(d).defer();return a}function f(a,b,c){var d=S.tags[a];a=w;var e=!!d;!e&&c&&(e=!0,d=["","",0]);if(e)for(a.innerHTML="&#160;"+d[0]+b+d[1],a.removeChild(a.firstChild),b=d[2];b--;)a=a.firstChild;else a.innerHTML=b;return $A(a.childNodes)}function h(a){var b=C(a);b&&(c.stopObserving(a),Z||(a._prototypeUID=aa),delete c.Storage[b])}function k(a,d,e){a=b(a);e=e||-1;
for(var g=[];(a=a[d])&&(a.nodeType===Node.ELEMENT_NODE&&g.push(c.extend(a)),g.length!==e););return g}function l(a){for(a=b(a).firstChild;a&&a.nodeType!==Node.ELEMENT_NODE;)a=a.nextSibling;return b(a)}function g(a){var d=[];for(a=b(a).firstChild;a;)a.nodeType===Node.ELEMENT_NODE&&d.push(c.extend(a)),a=a.nextSibling;return d}function m(a){return k(a,"previousSibling")}function n(a){return k(a,"nextSibling")}function r(a,d,e,g){a=b(a);e=e||0;g=g||0;Object.isNumber(e)&&(g=e,e=null);for(;a=a[d];)if(1===
a.nodeType&&!(e&&!Prototype.Selector.match(a,e)||0<=--g))return c.extend(a)}function x(a){a=b(a);var c=ea.call(arguments,1).join(", ");return Prototype.Selector.select(c,a)}function s(a,c){a=b(a);for(c=b(c);a=a.parentNode;)if(a===c)return!0;return!1}function O(a,c){a=b(a);c=b(c);return c.contains?c.contains(a)&&c!==a:s(a,c)}function H(a,c){a=b(a);c=b(c);return 8===(a.compareDocumentPosition(c)&8)}function B(a,c){return b(a).getAttribute(c)}function I(a,c){a=b(a);var d=D.read;if(d.values[c])return d.values[c](a,
c);d.names[c]&&(c=d.names[c]);return c.include(":")?a.attributes&&a.attributes[c]?a.attributes[c].value:null:a.getAttribute(c)}function q(a,b){return"title"===b?a.title:a.getAttribute(b)}function J(a){if(ba[a])return ba[a];var b=new RegExp("(^|\\s+)"+a+"(\\s+|$)");return ba[a]=b}function F(a,c){if(a=b(a)){var d=a.className;return 0===d.length?!1:d===c?!0:J(c).test(d)}}function t(a,b){return a.getAttribute(b,2)}function K(a,c){return b(a).hasAttribute(c)?c:null}function P(a,d){a=b(a);d="float"===d||
"cssFloat"===d?"styleFloat":d.camelize();var e=a.style[d];!e&&a.currentStyle&&(e=a.currentStyle[d]);return"opacity"!==d||U?"auto"===e?"width"!==d&&"height"!==d||!c.visible(a)?null:c.measure(a,d)+"px":e:V(a)}function W(a,c){a=b(a);1==c||""===c?c="":1E-5>c&&(c=0);a.style.opacity=c;return a}function u(a,d){if(U)return W(a,d);var e=b(a);e.currentStyle&&e.currentStyle.hasLayout||(e.style.zoom=1);a=e;var e=c.getStyle(a,"filter"),g=a.style;if(1==d||""===d)return(e=(e||"").replace(/alpha\([^\)]*\)/gi,""))?
g.filter=e:g.removeAttribute("filter"),a;1E-5>d&&(d=0);g.filter=(e||"").replace(/alpha\([^\)]*\)/gi,"")+"alpha(opacity="+100*d+")";return a}function L(a){return c.getStyle(a,"opacity")}function V(a){if(U)return L(a);a=c.getStyle(a,"filter");return 0===a.length?1:(a=(a||"").match(/alpha\(opacity=(.*)\)/))&&a[1]?parseFloat(a[1])/100:1}function C(a){if(a===window)return 0;"undefined"===typeof a._prototypeUID&&(a._prototypeUID=c.Storage.UID++);return a._prototypeUID}function M(a){return a===window?0:
a==document?1:a.uniqueID}function p(a){if(a=b(a))return a=C(a),c.Storage[a]||(c.Storage[a]=$H()),c.Storage[a]}function E(a,b){for(var c in b){var d=b[c];!Object.isFunction(d)||c in a||(a[c]=d.methodize())}}function N(a){if(!a||C(a)in X||a.nodeType!==Node.ELEMENT_NODE||a==window)return a;var b=Object.clone(ca),c=a.tagName.toUpperCase();Q[c]&&Object.extend(b,Q[c]);E(a,b);X[C(a)]=!0;return a}function Y(a){if(!a||C(a)in X)return a;var b=a.tagName;b&&/^(?:object|applet|embed)$/i.test(b)&&(E(a,c.Methods),
E(a,c.Methods.Simulated),E(a,c.Methods.ByTag[b.toUpperCase()]));return a}function fa(a,b){a=a.toUpperCase();Q[a]||(Q[a]={});Object.extend(Q[a],b)}function da(a,b,c){Object.isUndefined(c)&&(c=!1);for(var d in b){var e=b[d];Object.isFunction(e)&&(c&&d in a||(a[d]=e.methodize()))}}function ja(a){var b,c={OPTGROUP:"OptGroup",TEXTAREA:"TextArea",P:"Paragraph",FIELDSET:"FieldSet",UL:"UList",OL:"OList",DL:"DList",DIR:"Directory",H1:"Heading",H2:"Heading",H3:"Heading",H4:"Heading",H5:"Heading",H6:"Heading",
Q:"Quote",INS:"Mod",DEL:"Mod",A:"Anchor",IMG:"Image",CAPTION:"TableCaption",COL:"TableCol",COLGROUP:"TableCol",THEAD:"TableSection",TFOOT:"TableSection",TBODY:"TableSection",TR:"TableRow",TH:"TableCell",TD:"TableCell",FRAMESET:"FrameSet",IFRAME:"IFrame"};c[a]&&(b="HTML"+c[a]+"Element");if(window[b])return window[b];b="HTML"+a+"Element";if(window[b])return window[b];b="HTML"+a.capitalize()+"Element";if(window[b])return window[b];a=document.createElement(a);return a.__proto__||a.constructor.prototype}
function ka(){R=w=null}var aa,ea=Array.prototype.slice,w=document.createElement("div");a.$=b;a.Node||(a.Node={});a.Node.ELEMENT_NODE||Object.extend(a.Node,{ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12});var R={},ia=function(){try{var a=document.createElement('<input name="x">');return"input"===a.tagName.toLowerCase()&&
"x"===a.name}catch(b){return!1}}(),y=a.Element;a.Element=c;Object.extend(a.Element,y||{});y&&(a.Element.prototype=y.prototype);c.Methods={ByTag:{},Simulated:{}};var y={},ga={id:"id",className:"class"};y.inspect=function(a){a=b(a);var c="<"+a.tagName.toLowerCase(),d,e,g;for(g in ga)d=ga[g],(e=(a[g]||"").toString())&&(c+=" "+d+"="+e.inspect(!0));return c+">"};Object.extend(y,{visible:function(a){return"none"!==b(a).style.display},toggle:function(a,d){a=b(a);Object.isUndefined(d)&&(d=!c.visible(a));
c[d?"show":"hide"](a);return a},hide:function(a){a=b(a);a.style.display="none";return a},show:function(a){a=b(a);a.style.display="";return a}});var z=function(){var a=document.createElement("select"),b=!0;a.innerHTML='<option value="test">test</option>';a.options&&a.options[0]&&(b="OPTION"!==a.options[0].nodeName.toUpperCase());return b}(),G=function(){try{var a=document.createElement("table");if(a&&a.tBodies)return a.innerHTML="<tbody><tr><td>test</td></tr></tbody>","undefined"==typeof a.tBodies[0]}catch(b){return!0}}(),
ha=function(){try{var a=document.createElement("div");a.innerHTML="<link />";return 0===a.childNodes.length}catch(b){return!0}}(),la=z||G||ha,ma=function(){var a=document.createElement("script"),b=!1;try{a.appendChild(document.createTextNode("")),b=!a.firstChild||a.firstChild&&3!==a.firstChild.nodeType}catch(c){b=!0}return b}(),S={before:function(a,b){a.parentNode.insertBefore(b,a)},top:function(a,b){a.insertBefore(b,a.firstChild)},bottom:function(a,b){a.appendChild(b)},after:function(a,b){a.parentNode.insertBefore(b,
a.nextSibling)},tags:{TABLE:["<table>","</table>",1],TBODY:["<table><tbody>","</tbody></table>",2],TR:["<table><tbody><tr>","</tr></tbody></table>",3],TD:["<table><tbody><tr><td>","</td></tr></tbody></table>",4],SELECT:["<select>","</select>",1]}},z=S.tags;Object.extend(z,{THEAD:z.TBODY,TFOOT:z.TBODY,TH:z.TD});"outerHTML"in document.documentElement&&(d=e);Object.extend(y,{remove:function(a){a=b(a);a.parentNode.removeChild(a);return a},update:function(a,c){a=b(a);for(var d=a.getElementsByTagName("*"),
e=d.length;e--;)h(d[e]);c&&c.toElement&&(c=c.toElement());if(Object.isElement(c))return a.update().insert(c);c=Object.toHTML(c);e=a.tagName.toUpperCase();if("SCRIPT"===e&&ma)return a.text=c,a;if(la)if(e in S.tags){for(;a.firstChild;)a.removeChild(a.firstChild);for(var d=f(e,c.stripScripts()),e=0,g;g=d[e];e++)a.appendChild(g)}else if(ha&&Object.isString(c)&&-1<c.indexOf("<link")){for(;a.firstChild;)a.removeChild(a.firstChild);d=f(e,c.stripScripts(),!0);for(e=0;g=d[e];e++)a.appendChild(g)}else a.innerHTML=
c.stripScripts();else a.innerHTML=c.stripScripts();c.evalScripts.bind(c).defer();return a},replace:d,insert:function(a,c){a=b(a);var d=c;(Object.isUndefined(d)||null===d?0:Object.isString(d)||Object.isNumber(d)||Object.isElement(d)||d.toElement||d.toHTML)&&(c={bottom:c});for(var e in c){var d=a,g=c[e],q=e,q=q.toLowerCase(),m=S[q];g&&g.toElement&&(g=g.toElement());if(Object.isElement(g))m(d,g);else{var g=Object.toHTML(g),h=("before"===q||"after"===q?d.parentNode:d).tagName.toUpperCase(),h=f(h,g.stripScripts());
"top"!==q&&"after"!==q||h.reverse();for(var q=0,J=void 0;J=h[q];q++)m(d,J);g.evalScripts.bind(g).defer()}}return a},wrap:function(a,d,e){a=b(a);Object.isElement(d)?b(d).writeAttribute(e||{}):d=Object.isString(d)?new c(d,e):new c("div",d);a.parentNode&&a.parentNode.replaceChild(d,a);d.appendChild(a);return d},cleanWhitespace:function(a){a=b(a);for(var c=a.firstChild;c;){var d=c.nextSibling;c.nodeType!==Node.TEXT_NODE||/\S/.test(c.nodeValue)||a.removeChild(c);c=d}return a},empty:function(a){return b(a).innerHTML.blank()},
clone:function(a,d){if(a=b(a)){var e=a.cloneNode(d);if(!Z&&(e._prototypeUID=aa,d))for(var g=c.select(e,"*"),q=g.length;q--;)g[q]._prototypeUID=aa;return c.extend(e)}},purge:function(a){if(a=b(a)){h(a);a=a.getElementsByTagName("*");for(var c=a.length;c--;)h(a[c]);return null}}});Object.extend(y,{recursivelyCollect:k,ancestors:function(a){return k(a,"parentNode")},descendants:function(a){return c.select(a,"*")},firstDescendant:l,immediateDescendants:g,previousSiblings:m,nextSiblings:n,siblings:function(a){a=
b(a);var c=m(a);a=n(a);return c.reverse().concat(a)},match:function(a,c){a=b(a);return Object.isString(c)?Prototype.Selector.match(a,c):c.match(a)},up:function(a,c,d){a=b(a);return 1===arguments.length?b(a.parentNode):r(a,"parentNode",c,d)},down:function(a,d,e){if(1===arguments.length)return l(a);a=b(a);d=d||0;e=e||0;Object.isNumber(d)&&(e=d,d="*");var g=Prototype.Selector.select(d,a)[e];return c.extend(g)},previous:function(a,b,c){return r(a,"previousSibling",b,c)},next:function(a,b,c){return r(a,
"nextSibling",b,c)},select:x,adjacent:function(a){a=b(a);for(var d=ea.call(arguments,1).join(", "),e=c.siblings(a),g=[],q=0,m;m=e[q];q++)Prototype.Selector.match(m,d)&&g.push(m);return g},descendantOf:w.compareDocumentPosition?H:w.contains?O:s,getElementsBySelector:x,childElements:g});var na=1;(function(){w.setAttribute("onclick",[]);var a=w.getAttribute("onclick"),a=Object.isArray(a);w.removeAttribute("onclick");return a})()?B=I:Prototype.Browser.Opera&&(B=q);a.Element.Methods.Simulated.hasAttribute=
function(a,c){c=D.has[c]||c;var d=b(a).getAttributeNode(c);return!(!d||!d.specified)};var ba={},D={},z="className",G="for";w.setAttribute(z,"x");"x"!==w.className&&(w.setAttribute("class","x"),"x"===w.className&&(z="class"));var A=document.createElement("label");A.setAttribute(G,"x");"x"!==A.htmlFor&&(A.setAttribute("htmlFor","x"),"x"===A.htmlFor&&(G="htmlFor"));A=null;w.onclick=Prototype.emptyFunction;var A=w.getAttribute("onclick"),v;-1<String(A).indexOf("{")?v=function(a,b){var c=a.getAttribute(b);
if(!c)return null;c=c.toString();c=c.split("{")[1];c=c.split("}")[0];return c.strip()}:""===A&&(v=function(a,b){var c=a.getAttribute(b);return c?c.strip():null});D.read={names:{"class":z,className:z,"for":G,htmlFor:G},values:{style:function(a){return a.style.cssText.toLowerCase()},title:function(a){return a.title}}};D.write={names:{className:"class",htmlFor:"for",cellpadding:"cellPadding",cellspacing:"cellSpacing"},values:{checked:function(a,b){a.checked=!!b},style:function(a,b){a.style.cssText=b?
b:""}}};D.has={names:{}};Object.extend(D.write.names,D.read.names);z=$w("colSpan rowSpan vAlign dateTime accessKey tabIndex encType maxLength readOnly longDesc frameBorder");for(G=0;A=z[G];G++)D.write.names[A.toLowerCase()]=A,D.has.names[A.toLowerCase()]=A;Object.extend(D.read.values,{href:t,src:t,type:function(a,b){return a.getAttribute(b)},action:function(a,b){var c=a.getAttributeNode(b);return c?c.value:""},disabled:K,checked:K,readonly:K,multiple:K,onload:v,onunload:v,onclick:v,ondblclick:v,onmousedown:v,
onmouseup:v,onmouseover:v,onmousemove:v,onmouseout:v,onfocus:v,onblur:v,onkeypress:v,onkeydown:v,onkeyup:v,onsubmit:v,onreset:v,onselect:v,onchange:v});Object.extend(y,{identify:function(a){a=b(a);var d=c.readAttribute(a,"id");if(d)return d;do d="anonymous_element_"+na++;while(b(d));c.writeAttribute(a,"id",d);return d},readAttribute:B,writeAttribute:function(a,c,d){a=b(a);var e={},g=D.write;"object"===typeof c?e=c:e[c]=Object.isUndefined(d)?!0:d;for(var q in e)c=g.names[q]||q,d=e[q],g.values[q]&&
(c=g.values[q](a,d)||c),!1===d||null===d?a.removeAttribute(c):!0===d?a.setAttribute(c,c):a.setAttribute(c,d);return a},classNames:function(a){return new c.ClassNames(a)},hasClassName:F,addClassName:function(a,c){if(a=b(a))return F(a,c)||(a.className+=(a.className?" ":"")+c),a},removeClassName:function(a,c){if(a=b(a))return a.className=a.className.replace(J(c)," ").strip(),a},toggleClassName:function(a,d,e){if(a=b(a))return Object.isUndefined(e)&&(e=!F(a,d)),(0,c[e?"addClassName":"removeClassName"])(a,
d)}});var U;w.style.cssText="opacity:.55";U=/^0.55/.test(w.style.opacity);Object.extend(y,{setStyle:function(a,d){a=b(a);var e=a.style;if(Object.isString(d))return e.cssText+=";"+d,d.include("opacity")&&(e=d.match(/opacity:\s*(\d?\.?\d*)/)[1],c.setOpacity(a,e)),a;for(var g in d)if("opacity"===g)c.setOpacity(a,d[g]);else{var q=d[g];if("float"===g||"cssFloat"===g)g=Object.isUndefined(e.styleFloat)?"cssFloat":"styleFloat";e[g]=q}return a},getStyle:function(a,c){a=b(a);c="float"===c||"styleFloat"===c?
"cssFloat":c.camelize();var d=a.style[c];d&&"auto"!==d||(d=(d=document.defaultView.getComputedStyle(a,null))?d[c]:null);return"opacity"===c?d?parseFloat(d):1:"auto"===d?null:d},setOpacity:W,getOpacity:L});"styleFloat"in w.style&&(y.getStyle=P,y.setOpacity=u,y.getOpacity=V);a.Element.Storage={UID:1};var Z="uniqueID"in w;Z&&(C=M);Object.extend(y,{getStorage:p,store:function(a,c,d){if(a=b(a)){var e=p(a);2===arguments.length?e.update(c):e.set(c,d);return a}},retrieve:function(a,c,d){if(a=b(a)){a=p(a);
var e=a.get(c);Object.isUndefined(e)&&(a.set(c,d),e=d);return e}}});var ca={},Q=c.Methods.ByTag,T=Prototype.BrowserFeatures;!T.ElementExtensions&&"__proto__"in w&&(a.HTMLElement={},a.HTMLElement.prototype=w.__proto__,T.ElementExtensions=!0);v=function(a){if("undefined"===typeof window.Element)return!1;var b=window.Element.prototype;if(b){var c="_"+(Math.random()+"").slice(2);a=document.createElement(a);b[c]="x";a="x"!==a[c];delete b[c];return a}return!1}("object");var X={};T.SpecificElementExtensions&&
(N=v?Y:Prototype.K);Object.extend(a.Element,{extend:N,addMethods:function(a){0===arguments.length&&(Object.extend(Form,Form.Methods),Object.extend(Form.Element,Form.Element.Methods),Object.extend(c.Methods.ByTag,{FORM:Object.clone(Form.Methods),INPUT:Object.clone(Form.Element.Methods),SELECT:Object.clone(Form.Element.Methods),TEXTAREA:Object.clone(Form.Element.Methods),BUTTON:Object.clone(Form.Element.Methods)}));if(2===arguments.length){var b=a;a=arguments[1]}if(b)if(Object.isArray(b))for(var d=
0,e;e=b[d];d++)fa(e,a);else fa(b,a);else Object.extend(c.Methods,a||{});b=window.HTMLElement?HTMLElement.prototype:c.prototype;T.ElementExtensions&&(da(b,c.Methods),da(b,c.Methods.Simulated,!0));if(T.SpecificElementExtensions)for(e in c.Methods.ByTag)b=ja(e),Object.isUndefined(b)||da(b.prototype,Q[e]);Object.extend(c,c.Methods);Object.extend(c,c.Methods.Simulated);delete c.ByTag;delete c.Simulated;c.extend.refresh();R={}}});a.Element.extend.refresh=N===Prototype.K?Prototype.emptyFunction:function(){Prototype.BrowserFeatures.ElementExtensions||
(Object.extend(ca,c.Methods),Object.extend(ca,c.Methods.Simulated),X={})};c.addMethods(y);window.attachEvent&&window.attachEvent("onunload",ka)})(this);
(function(){function a(a,b){a=$(a);var c=a.style[b];c&&"auto"!==c||(c=(c=document.defaultView.getComputedStyle(a,null))?c[b]:null);return"opacity"===b?c?parseFloat(c):1:"auto"===c?null:c}function b(a,b){var c=a.style[b];!c&&a.currentStyle&&(c=a.currentStyle[b]);return c}function c(a,b){var c=a.offsetWidth,e=d(a,"borderLeftWidth",b)||0,f=d(a,"borderRightWidth",b)||0,h=d(a,"paddingLeft",b)||0,k=d(a,"paddingRight",b)||0;return c-e-f-h-k}function d(b,c,d){var e=null;Object.isElement(b)&&(e=b,b=a(e,c));
if(null===b||Object.isUndefined(b))return null;if(/^(?:-)?\d+(\.\d+)?(px)?$/i.test(b))return window.parseFloat(b);var f=b.include("%"),h=d===document.viewport;return!(/\d/.test(b)&&e&&e.runtimeStyle)||f&&h?e&&f?(d=d||e.parentNode,b=(b=b.match(/^(\d+)%?$/i))?Number(b[1])/100:null,e=null,f=c.include("left")||c.include("right")||c.include("width"),c=c.include("top")||c.include("bottom")||c.include("height"),d===document.viewport?f?e=document.viewport.getWidth():c&&(e=document.viewport.getHeight()):f?
e=$(d).measure("width"):c&&(e=$(d).measure("height")),null===e?0:e*b):0:(d=e.style.left,c=e.runtimeStyle.left,e.runtimeStyle.left=e.currentStyle.left,e.style.left=b||0,b=e.style.pixelLeft,e.style.left=d,e.runtimeStyle.left=c,b)}function e(a){a=$(a);if(a.nodeType===Node.DOCUMENT_NODE||k(a)||"BODY"===a.nodeName.toUpperCase()||"HTML"===a.nodeName.toUpperCase())return $(document.body);if("inline"!==Element.getStyle(a,"display")&&a.offsetParent)return $(a.offsetParent);for(;(a=a.parentNode)&&a!==document.body;)if("static"!==
Element.getStyle(a,"position"))return"HTML"===a.nodeName.toUpperCase()?$(document.body):$(a);return $(document.body)}function f(a){a=$(a);var b=0,c=0;if(a.parentNode){do b+=a.offsetTop||0,c+=a.offsetLeft||0,a=a.offsetParent;while(a)}return new Element.Offset(c,b)}function h(a){a=$(a);var b=a.getLayout(),c=0,d=0;do if(c+=a.offsetTop||0,d+=a.offsetLeft||0,a=a.offsetParent){if("BODY"===a.nodeName.toUpperCase())break;if("static"!==Element.getStyle(a,"position"))break}while(a);d-=b.get("margin-top");c-=
b.get("margin-left");return new Element.Offset(d,c)}function k(a){return a!==document.body&&!Element.descendantOf(a,document.body)}"currentStyle"in document.documentElement&&(a=b);var l=Prototype.K;"currentStyle"in document.documentElement&&(l=function(a){a.currentStyle.hasLayout||(a.style.zoom=1);return a});Element.Layout=Class.create(Hash,{initialize:function($super,a,b){$super();this.element=$(a);Element.Layout.PROPERTIES.each(function(a){this._set(a,null)},this);b&&(this._preComputing=!0,this._begin(),
Element.Layout.PROPERTIES.each(this._compute,this),this._end(),this._preComputing=!1)},_set:function(a,b){return Hash.prototype.set.call(this,a,b)},set:function(a,b){throw"Properties of Element.Layout are read-only.";},get:function($super,a){var b=$super(a);return null===b?this._compute(a):b},_begin:function(){if(!this._isPrepared()){var b=this.element,d;a:{for(d=b;d&&d.parentNode;){if("none"===d.getStyle("display")){d=!1;break a}d=$(d.parentNode)}d=!0}if(!d){b.store("prototype_original_styles",{position:b.style.position||
"",width:b.style.width||"",visibility:b.style.visibility||"",display:b.style.display||""});d=a(b,"position");var e=b.offsetWidth;if(0===e||null===e)b.style.display="block",e=b.offsetWidth;var f="fixed"===d?document.viewport:b.parentNode,h={visibility:"hidden",display:"block"};"fixed"!==d&&(h.position="absolute");b.setStyle(h);h=b.offsetWidth;d=e&&h===e?c(b,f):"absolute"===d||"fixed"===d?c(b,f):$(b.parentNode).getLayout().get("width")-this.get("margin-left")-this.get("border-left")-this.get("padding-left")-
this.get("padding-right")-this.get("border-right")-this.get("margin-right");b.setStyle({width:d+"px"})}this._setPrepared(!0)}},_end:function(){var a=this.element,b=a.retrieve("prototype_original_styles");a.store("prototype_original_styles",null);a.setStyle(b);this._setPrepared(!1)},_compute:function(a){var b=Element.Layout.COMPUTATIONS;if(!(a in b))throw"Property not found.";return this._set(a,b[a].call(this,this.element))},_isPrepared:function(){return this.element.retrieve("prototype_element_layout_prepared",
!1)},_setPrepared:function(a){return this.element.store("prototype_element_layout_prepared",a)},toObject:function(){var a=$A(arguments),b={};(0===a.length?Element.Layout.PROPERTIES:a.join(" ").split(" ")).each(function(a){if(Element.Layout.PROPERTIES.include(a)){var c=this.get(a);null!=c&&(b[a]=c)}},this);return b},toHash:function(){var a=this.toObject.apply(this,arguments);return new Hash(a)},toCSS:function(){var a=$A(arguments),b={};(0===a.length?Element.Layout.PROPERTIES:a.join(" ").split(" ")).each(function(a){if(Element.Layout.PROPERTIES.include(a)&&
!Element.Layout.COMPOSITE_PROPERTIES.include(a)){var c=this.get(a);null!=c&&(a.include("border")&&(a+="-width"),a=a.camelize(),b[a]=c+"px")}},this);return b},inspect:function(){return"#<Element.Layout>"}});Object.extend(Element.Layout,{PROPERTIES:$w("height width top left right bottom border-left border-right border-top border-bottom padding-left padding-right padding-top padding-bottom margin-top margin-bottom margin-left margin-right padding-box-width padding-box-height border-box-width border-box-height margin-box-width margin-box-height"),
COMPOSITE_PROPERTIES:$w("padding-box-width padding-box-height margin-box-width margin-box-height border-box-width border-box-height"),COMPUTATIONS:{height:function(a){this._preComputing||this._begin();a=this.get("border-box-height");if(0>=a)return this._preComputing||this._end(),0;var b=this.get("border-top"),c=this.get("border-bottom"),d=this.get("padding-top"),e=this.get("padding-bottom");this._preComputing||this._end();return a-b-c-d-e},width:function(a){this._preComputing||this._begin();a=this.get("border-box-width");
if(0>=a)return this._preComputing||this._end(),0;var b=this.get("border-left"),c=this.get("border-right"),d=this.get("padding-left"),e=this.get("padding-right");this._preComputing||this._end();return a-b-c-d-e},"padding-box-height":function(a){a=this.get("height");var b=this.get("padding-top"),c=this.get("padding-bottom");return a+b+c},"padding-box-width":function(a){a=this.get("width");var b=this.get("padding-left"),c=this.get("padding-right");return a+b+c},"border-box-height":function(a){this._preComputing||
this._begin();a=a.offsetHeight;this._preComputing||this._end();return a},"border-box-width":function(a){this._preComputing||this._begin();a=a.offsetWidth;this._preComputing||this._end();return a},"margin-box-height":function(a){a=this.get("border-box-height");var b=this.get("margin-top"),c=this.get("margin-bottom");return 0>=a?0:a+b+c},"margin-box-width":function(a){a=this.get("border-box-width");var b=this.get("margin-left"),c=this.get("margin-right");return 0>=a?0:a+b+c},top:function(a){return a.positionedOffset().top},
bottom:function(a){var b=a.positionedOffset();a=a.getOffsetParent().measure("height");var c=this.get("border-box-height");return a-c-b.top},left:function(a){return a.positionedOffset().left},right:function(a){var b=a.positionedOffset();a=a.getOffsetParent().measure("width");var c=this.get("border-box-width");return a-c-b.left},"padding-top":function(a){return d(a,"paddingTop")},"padding-bottom":function(a){return d(a,"paddingBottom")},"padding-left":function(a){return d(a,"paddingLeft")},"padding-right":function(a){return d(a,
"paddingRight")},"border-top":function(a){return d(a,"borderTopWidth")},"border-bottom":function(a){return d(a,"borderBottomWidth")},"border-left":function(a){return d(a,"borderLeftWidth")},"border-right":function(a){return d(a,"borderRightWidth")},"margin-top":function(a){return d(a,"marginTop")},"margin-bottom":function(a){return d(a,"marginBottom")},"margin-left":function(a){return d(a,"marginLeft")},"margin-right":function(a){return d(a,"marginRight")}}});"getBoundingClientRect"in document.documentElement&&
Object.extend(Element.Layout.COMPUTATIONS,{right:function(a){var b=l(a.getOffsetParent());a=a.getBoundingClientRect();return(b.getBoundingClientRect().right-a.right).round()},bottom:function(a){var b=l(a.getOffsetParent());a=a.getBoundingClientRect();return(b.getBoundingClientRect().bottom-a.bottom).round()}});Element.Offset=Class.create({initialize:function(a,b){this.left=a.round();this.top=b.round();this[0]=this.left;this[1]=this.top},relativeTo:function(a){return new Element.Offset(this.left-a.left,
this.top-a.top)},inspect:function(){return"#<Element.Offset left: #{left} top: #{top}>".interpolate(this)},toString:function(){return"[#{left}, #{top}]".interpolate(this)},toArray:function(){return[this.left,this.top]}});Prototype.Browser.IE?(e=e.wrap(function(a,b){b=$(b);if(b.nodeType===Node.DOCUMENT_NODE||k(b)||"BODY"===b.nodeName.toUpperCase()||"HTML"===b.nodeName.toUpperCase())return $(document.body);var c=b.getStyle("position");if("static"!==c)return a(b);b.setStyle({position:"relative"});var d=
a(b);b.setStyle({position:c});return d}),h=h.wrap(function(a,b){b=$(b);if(!b.parentNode)return new Element.Offset(0,0);var c=b.getStyle("position");if("static"!==c)return a(b);var d=b.getOffsetParent();d&&"fixed"===d.getStyle("position")&&l(d);b.setStyle({position:"relative"});d=a(b);b.setStyle({position:c});return d})):Prototype.Browser.Webkit&&(f=function(a){a=$(a);var b=0,c=0;do{b+=a.offsetTop||0;c+=a.offsetLeft||0;if(a.offsetParent==document.body&&"absolute"==Element.getStyle(a,"position"))break;
a=a.offsetParent}while(a);return new Element.Offset(c,b)});Element.addMethods({getLayout:function(a,b){return new Element.Layout(a,b)},measure:function(a,b){return $(a).getLayout().get(b)},getWidth:function(a){return Element.getDimensions(a).width},getHeight:function(a){return Element.getDimensions(a).height},getDimensions:function(a){a=$(a);var b=Element.getStyle(a,"display");if(b&&"none"!==b)return{width:a.offsetWidth,height:a.offsetHeight};var b=a.style,b={visibility:b.visibility,position:b.position,
display:b.display},c={visibility:"hidden",display:"block"};"fixed"!==b.position&&(c.position="absolute");Element.setStyle(a,c);c={width:a.offsetWidth,height:a.offsetHeight};Element.setStyle(a,b);return c},getOffsetParent:e,cumulativeOffset:f,positionedOffset:h,cumulativeScrollOffset:function(a){var b=0,c=0;do b+=a.scrollTop||0,c+=a.scrollLeft||0,a=a.parentNode;while(a);return new Element.Offset(c,b)},viewportOffset:function(a){var b=0,c=0,d=document.body,e=a=$(a);do if(b+=e.offsetTop||0,c+=e.offsetLeft||
0,e.offsetParent==d&&"absolute"==Element.getStyle(e,"position"))break;while(e=e.offsetParent);e=a;do e!=d&&(b-=e.scrollTop||0,c-=e.scrollLeft||0);while(e=e.parentNode);return new Element.Offset(c,b)},absolutize:function(a){a=$(a);if("absolute"===Element.getStyle(a,"position"))return a;var b=e(a),c=a.viewportOffset(),b=b.viewportOffset(),c=c.relativeTo(b),b=a.getLayout();a.store("prototype_absolutize_original_styles",{position:a.getStyle("position"),left:a.getStyle("left"),top:a.getStyle("top"),width:a.getStyle("width"),
height:a.getStyle("height")});a.setStyle({position:"absolute",top:c.top+"px",left:c.left+"px",width:b.get("width")+"px",height:b.get("height")+"px"});return a},relativize:function(a){a=$(a);if("relative"===Element.getStyle(a,"position"))return a;var b=a.retrieve("prototype_absolutize_original_styles");b&&a.setStyle(b);return a},scrollTo:function(a){a=$(a);var b=Element.cumulativeOffset(a);window.scrollTo(b.left,b.top);return a},makePositioned:function(a){a=$(a);var b=Element.getStyle(a,"position"),
c={};"static"!==b&&b||(c.position="relative",Prototype.Browser.Opera&&(c.top=0,c.left=0),Element.setStyle(a,c),Element.store(a,"prototype_made_positioned",!0));return a},undoPositioned:function(a){a=$(a);var b=Element.getStorage(a);b.get("prototype_made_positioned")&&(b.unset("prototype_made_positioned"),Element.setStyle(a,{position:"",top:"",bottom:"",left:"",right:""}));return a},makeClipping:function(a){a=$(a);var b=Element.getStorage(a),c=b.get("prototype_made_clipping");Object.isUndefined(c)&&
(c=Element.getStyle(a,"overflow"),b.set("prototype_made_clipping",c),"hidden"!==c&&(a.style.overflow="hidden"));return a},undoClipping:function(a){a=$(a);var b=Element.getStorage(a),c=b.get("prototype_made_clipping");Object.isUndefined(c)||(b.unset("prototype_made_clipping"),a.style.overflow=c||"");return a},clonePosition:function(a,b,c){c=Object.extend({setLeft:!0,setTop:!0,setWidth:!0,setHeight:!0,offsetTop:0,offsetLeft:0},c||{});b=$(b);a=$(a);var d,e,f,h={};if(c.setLeft||c.setTop)if(d=Element.viewportOffset(b),
e=[0,0],"absolute"===Element.getStyle(a,"position")){var k=Element.getOffsetParent(a);k!==document.body&&(e=Element.viewportOffset(k))}if(c.setWidth||c.setHeight)f=Element.getLayout(b);c.setLeft&&(h.left=d[0]-e[0]+c.offsetLeft+"px");c.setTop&&(h.top=d[1]-e[1]+c.offsetTop+"px");c.setWidth&&(h.width=f.get("border-box-width")+"px");c.setHeight&&(h.height=f.get("border-box-height")+"px");return Element.setStyle(a,h)}});"getBoundingClientRect"in document.documentElement&&Element.addMethods({viewportOffset:function(a){a=
$(a);if(k(a))return new Element.Offset(0,0);a=a.getBoundingClientRect();var b=document.documentElement;return new Element.Offset(a.left-b.clientLeft,a.top-b.clientTop)}})})();
(function(){function a(){return c?c:c=b?document.body:document.documentElement}var b=Prototype.Browser.Opera&&9.5>window.parseFloat(window.opera.version()),c=null;document.viewport={getDimensions:function(){return{width:this.getWidth(),height:this.getHeight()}},getWidth:function(){return a().clientWidth},getHeight:function(){return a().clientHeight},getScrollOffsets:function(){return new Element.Offset(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft,window.pageYOffset||
document.documentElement.scrollTop||document.body.scrollTop)}}})();window.$$=function(){var a=$A(arguments).join(", ");return Prototype.Selector.select(a,document)};
Prototype.Selector=function(){function a(a){for(var b=0,e=a.length;b<e;b++)Element.extend(a[b]);return a}var b=Prototype.K;return{select:function(){throw Error('Method "Prototype.Selector.select" must be defined.');},match:function(){throw Error('Method "Prototype.Selector.match" must be defined.');},find:function(a,b,e){e=e||0;var f=Prototype.Selector.match,h=a.length,k=0,l;for(l=0;l<h;l++)if(f(a[l],b)&&e==k++)return Element.extend(a[l])},extendElements:Element.extend===b?b:a,extendElement:Element.extend}}();
(function(){function a(a,b,c,d,e,f){e=0;for(var g=d.length;e<g;e++){var h=d[e];if(h){for(var k=!1,h=h[a];h;){if(h.sizcache===c){k=d[h.sizset];break}1!==h.nodeType||f||(h.sizcache=c,h.sizset=e);if(h.nodeName.toLowerCase()===b){k=h;break}h=h[a]}d[e]=k}}}function b(a,b,c,d,e,f){e=0;for(var h=d.length;e<h;e++){var k=d[e];if(k){for(var l=!1,k=k[a];k;){if(k.sizcache===c){l=d[k.sizset];break}if(1===k.nodeType)if(f||(k.sizcache=c,k.sizset=e),"string"!==typeof b){if(k===b){l=!0;break}}else if(0<g.filter(b,
[k]).length){l=k;break}k=k[a]}d[e]=l}}}var c=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,d=0,e=Object.prototype.toString,f=!1,h=!0,k=/\\/g,l=/\W/;[0,0].sort(function(){h=!1;return 0});var g=function(a,b,d,f){d=d||[];var h=b=b||document;if(1!==b.nodeType&&9!==b.nodeType)return[];if(!a||"string"!==typeof a)return d;var k,l,u,L,r,C=!0,M=g.isXML(b),p=[],E=a;do if(c.exec(""),k=c.exec(E))if(E=k[3],p.push(k[1]),k[2]){L=
k[3];break}while(k);if(1<p.length&&n.exec(a))if(2===p.length&&m.relative[p[0]])l=I(p[0]+p[1],b);else for(l=m.relative[p[0]]?[b]:g(p.shift(),b);p.length;)a=p.shift(),m.relative[a]&&(a+=p.shift()),l=I(a,l);else if(!f&&1<p.length&&9===b.nodeType&&!M&&m.match.ID.test(p[0])&&!m.match.ID.test(p[p.length-1])&&(k=g.find(p.shift(),b,M),b=k.expr?g.filter(k.expr,k.set)[0]:k.set[0]),b)for(k=f?{expr:p.pop(),set:s(f)}:g.find(p.pop(),1!==p.length||"~"!==p[0]&&"+"!==p[0]||!b.parentNode?b:b.parentNode,M),l=k.expr?
g.filter(k.expr,k.set):k.set,0<p.length?u=s(l):C=!1;p.length;)k=r=p.pop(),m.relative[r]?k=p.pop():r="",null==k&&(k=b),m.relative[r](u,k,M);else u=[];u||(u=l);u||g.error(r||a);if("[object Array]"===e.call(u))if(C)if(b&&1===b.nodeType)for(a=0;null!=u[a];a++)u[a]&&(!0===u[a]||1===u[a].nodeType&&g.contains(b,u[a]))&&d.push(l[a]);else for(a=0;null!=u[a];a++)u[a]&&1===u[a].nodeType&&d.push(l[a]);else d.push.apply(d,u);else s(u,d);L&&(g(L,h,d,f),g.uniqueSort(d));return d};g.uniqueSort=function(a){if(H&&
(f=h,a.sort(H),f))for(var b=1;b<a.length;b++)a[b]===a[b-1]&&a.splice(b--,1);return a};g.matches=function(a,b){return g(a,null,null,b)};g.matchesSelector=function(a,b){return 0<g(b,null,null,[a]).length};g.find=function(a,b,c){var d;if(!a)return[];for(var e=0,f=m.order.length;e<f;e++){var h,g=m.order[e];if(h=m.leftMatch[g].exec(a)){var l=h[1];h.splice(1,1);if("\\"!==l.substr(l.length-1)&&(h[1]=(h[1]||"").replace(k,""),d=m.find[g](h,b,c),null!=d)){a=a.replace(m.match[g],"");break}}}d||(d="undefined"!==
typeof b.getElementsByTagName?b.getElementsByTagName("*"):[]);return{set:d,expr:a}};g.filter=function(a,b,c,d){for(var e,f,h=a,k=[],l=b,n=b&&b[0]&&g.isXML(b[0]);a&&b.length;){for(var r in m.filter)if(null!=(e=m.leftMatch[r].exec(a))&&e[2]){var s,p,E=m.filter[r];p=e[1];f=!1;e.splice(1,1);if("\\"!==p.substr(p.length-1)){l===k&&(k=[]);if(m.preFilter[r])if(e=m.preFilter[r](e,l,c,k,d,n),!e)f=s=!0;else if(!0===e)continue;if(e)for(var N=0;null!=(p=l[N]);N++)if(p){s=E(p,e,N,l);var Y=d^!!s;c&&null!=s?Y?f=
!0:l[N]=!1:Y&&(k.push(p),f=!0)}if(void 0!==s){c||(l=k);a=a.replace(m.match[r],"");if(!f)return[];break}}}if(a===h)if(null==f)g.error(a);else break;h=a}return l};g.error=function(a){throw"Syntax error, unrecognized expression: "+a;};var m=g.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,
TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")},type:function(a){return a.getAttribute("type")}},relative:{"+":function(a,b){var c=
"string"===typeof b,d=c&&!l.test(b),c=c&&!d;d&&(b=b.toLowerCase());for(var d=0,e=a.length,f;d<e;d++)if(f=a[d]){for(;(f=f.previousSibling)&&1!==f.nodeType;);a[d]=c||f&&f.nodeName.toLowerCase()===b?f||!1:f===b}c&&g.filter(b,a,!0)},">":function(a,b){var c,d="string"===typeof b,e=0,f=a.length;if(d&&!l.test(b))for(b=b.toLowerCase();e<f;e++){if(c=a[e])c=c.parentNode,a[e]=c.nodeName.toLowerCase()===b?c:!1}else{for(;e<f;e++)(c=a[e])&&(a[e]=d?c.parentNode:c.parentNode===b);d&&g.filter(b,a,!0)}},"":function(c,
e,f){var h,g=d++,k=b;"string"!==typeof e||l.test(e)||(h=e=e.toLowerCase(),k=a);k("parentNode",e,g,c,h,f)},"~":function(c,e,f){var h,g=d++,k=b;"string"!==typeof e||l.test(e)||(h=e=e.toLowerCase(),k=a);k("previousSibling",e,g,c,h,f)}},find:{ID:function(a,b,c){if("undefined"!==typeof b.getElementById&&!c)return(a=b.getElementById(a[1]))&&a.parentNode?[a]:[]},NAME:function(a,b){if("undefined"!==typeof b.getElementsByName){for(var c=[],d=b.getElementsByName(a[1]),e=0,f=d.length;e<f;e++)d[e].getAttribute("name")===
a[1]&&c.push(d[e]);return 0===c.length?null:c}},TAG:function(a,b){if("undefined"!==typeof b.getElementsByTagName)return b.getElementsByTagName(a[1])}},preFilter:{CLASS:function(a,b,c,d,e,f){a=" "+a[1].replace(k,"")+" ";if(f)return a;f=0;for(var h;null!=(h=b[f]);f++)h&&(e^(h.className&&0<=(" "+h.className+" ").replace(/[\t\n\r]/g," ").indexOf(a))?c||d.push(h):c&&(b[f]=!1));return!1},ID:function(a){return a[1].replace(k,"")},TAG:function(a,b){return a[1].replace(k,"").toLowerCase()},CHILD:function(a){if("nth"===
a[1]){a[2]||g.error(a[0]);a[2]=a[2].replace(/^\+|\s*/g,"");var b=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec("even"===a[2]&&"2n"||"odd"===a[2]&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=b[1]+(b[2]||1)-0;a[3]=b[3]-0}else a[2]&&g.error(a[0]);a[0]=d++;return a},ATTR:function(a,b,c,d,e,f){b=a[1]=a[1].replace(k,"");!f&&m.attrMap[b]&&(a[1]=m.attrMap[b]);a[4]=(a[4]||a[5]||"").replace(k,"");"~="===a[2]&&(a[4]=" "+a[4]+" ");return a},PSEUDO:function(a,b,d,e,f){if("not"===a[1])if(1<(c.exec(a[3])||"").length||
/^\w/.test(a[3]))a[3]=g(a[3],null,null,b);else return a=g.filter(a[3],b,d,1^f),d||e.push.apply(e,a),!1;else if(m.match.POS.test(a[0])||m.match.CHILD.test(a[0]))return!0;return a},POS:function(a){a.unshift(!0);return a}},filters:{enabled:function(a){return!1===a.disabled&&"hidden"!==a.type},disabled:function(a){return!0===a.disabled},checked:function(a){return!0===a.checked},selected:function(a){a.parentNode&&a.parentNode.selectedIndex;return!0===a.selected},parent:function(a){return!!a.firstChild},
empty:function(a){return!a.firstChild},has:function(a,b,c){return!!g(c[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){var b=a.getAttribute("type"),c=a.type;return"input"===a.nodeName.toLowerCase()&&"text"===c&&(b===c||null===b)},radio:function(a){return"input"===a.nodeName.toLowerCase()&&"radio"===a.type},checkbox:function(a){return"input"===a.nodeName.toLowerCase()&&"checkbox"===a.type},file:function(a){return"input"===a.nodeName.toLowerCase()&&"file"===a.type},
password:function(a){return"input"===a.nodeName.toLowerCase()&&"password"===a.type},submit:function(a){var b=a.nodeName.toLowerCase();return("input"===b||"button"===b)&&"submit"===a.type},image:function(a){return"input"===a.nodeName.toLowerCase()&&"image"===a.type},reset:function(a){var b=a.nodeName.toLowerCase();return("input"===b||"button"===b)&&"reset"===a.type},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)},
focus:function(a){return a===a.ownerDocument.activeElement}},setFilters:{first:function(a,b){return 0===b},last:function(a,b,c,d){return b===d.length-1},even:function(a,b){return 0===b%2},odd:function(a,b){return 1===b%2},lt:function(a,b,c){return b<c[3]-0},gt:function(a,b,c){return b>c[3]-0},nth:function(a,b,c){return c[3]-0===b},eq:function(a,b,c){return c[3]-0===b}},filter:{PSEUDO:function(a,b,c,d){var e=b[1],f=m.filters[e];if(f)return f(a,c,b,d);if("contains"===e)return 0<=(a.textContent||a.innerText||
g.getText([a])||"").indexOf(b[3]);if("not"===e){b=b[3];c=0;for(d=b.length;c<d;c++)if(b[c]===a)return!1;return!0}g.error(e)},CHILD:function(a,b){var c=b[1],d=a;switch(c){case "only":case "first":for(;d=d.previousSibling;)if(1===d.nodeType)return!1;if("first"===c)return!0;d=a;case "last":for(;d=d.nextSibling;)if(1===d.nodeType)return!1;return!0;case "nth":var c=b[2],e=b[3];if(1===c&&0===e)return!0;var f=b[0],h=a.parentNode;if(h&&(h.sizcache!==f||!a.nodeIndex)){for(var g=0,d=h.firstChild;d;d=d.nextSibling)1===
d.nodeType&&(d.nodeIndex=++g);h.sizcache=f}d=a.nodeIndex-e;return 0===c?0===d:0===d%c&&0<=d/c}},ID:function(a,b){return 1===a.nodeType&&a.getAttribute("id")===b},TAG:function(a,b){return"*"===b&&1===a.nodeType||a.nodeName.toLowerCase()===b},CLASS:function(a,b){return-1<(" "+(a.className||a.getAttribute("class"))+" ").indexOf(b)},ATTR:function(a,b){var c=b[1],c=m.attrHandle[c]?m.attrHandle[c](a):null!=a[c]?a[c]:a.getAttribute(c),d=c+"",e=b[2],f=b[4];return null==c?"!="===e:"="===e?d===f:"*="===e?0<=
d.indexOf(f):"~="===e?0<=(" "+d+" ").indexOf(f):f?"!="===e?d!==f:"^="===e?0===d.indexOf(f):"$="===e?d.substr(d.length-f.length)===f:"|="===e?d===f||d.substr(0,f.length+1)===f+"-":!1:d&&!1!==c},POS:function(a,b,c,d){var e=m.setFilters[b[2]];if(e)return e(a,c,b,d)}}},n=m.match.POS,r=function(a,b){return"\\"+(b-0+1)},x;for(x in m.match)m.match[x]=new RegExp(m.match[x].source+/(?![^\[]*\])(?![^\(]*\))/.source),m.leftMatch[x]=new RegExp(/(^(?:.|\r|\n)*?)/.source+m.match[x].source.replace(/\\(\d+)/g,r));
var s=function(a,b){a=Array.prototype.slice.call(a,0);return b?(b.push.apply(b,a),b):a};try{Array.prototype.slice.call(document.documentElement.childNodes,0)[0].nodeType}catch(O){s=function(a,b){var c=0,d=b||[];if("[object Array]"===e.call(a))Array.prototype.push.apply(d,a);else if("number"===typeof a.length)for(var f=a.length;c<f;c++)d.push(a[c]);else for(;a[c];c++)d.push(a[c]);return d}}var H,B;document.documentElement.compareDocumentPosition?H=function(a,b){return a===b?(f=!0,0):a.compareDocumentPosition&&
b.compareDocumentPosition?a.compareDocumentPosition(b)&4?-1:1:a.compareDocumentPosition?-1:1}:(H=function(a,b){if(a===b)return f=!0,0;if(a.sourceIndex&&b.sourceIndex)return a.sourceIndex-b.sourceIndex;var c,d,e=[],h=[];c=a.parentNode;d=b.parentNode;var g=c;if(c===d)return B(a,b);if(!c)return-1;if(!d)return 1;for(;g;)e.unshift(g),g=g.parentNode;for(g=d;g;)h.unshift(g),g=g.parentNode;c=e.length;d=h.length;for(g=0;g<c&&g<d;g++)if(e[g]!==h[g])return B(e[g],h[g]);return g===c?B(a,h[g],-1):B(e[g],b,1)},
B=function(a,b,c){if(a===b)return c;for(a=a.nextSibling;a;){if(a===b)return-1;a=a.nextSibling}return 1});g.getText=function(a){for(var b="",c,d=0;a[d];d++)c=a[d],3===c.nodeType||4===c.nodeType?b+=c.nodeValue:8!==c.nodeType&&(b+=g.getText(c.childNodes));return b};(function(){var a=document.createElement("div"),b="script"+(new Date).getTime(),c=document.documentElement;a.innerHTML="<a name='"+b+"'/>";c.insertBefore(a,c.firstChild);document.getElementById(b)&&(m.find.ID=function(a,b,c){if("undefined"!==
typeof b.getElementById&&!c)return(b=b.getElementById(a[1]))?b.id===a[1]||"undefined"!==typeof b.getAttributeNode&&b.getAttributeNode("id").nodeValue===a[1]?[b]:void 0:[]},m.filter.ID=function(a,b){var c="undefined"!==typeof a.getAttributeNode&&a.getAttributeNode("id");return 1===a.nodeType&&c&&c.nodeValue===b});c.removeChild(a);c=a=null})();(function(){var a=document.createElement("div");a.appendChild(document.createComment(""));0<a.getElementsByTagName("*").length&&(m.find.TAG=function(a,b){var c=
b.getElementsByTagName(a[1]);if("*"===a[1]){for(var d=[],e=0;c[e];e++)1===c[e].nodeType&&d.push(c[e]);c=d}return c});a.innerHTML="<a href='#'></a>";a.firstChild&&"undefined"!==typeof a.firstChild.getAttribute&&"#"!==a.firstChild.getAttribute("href")&&(m.attrHandle.href=function(a){return a.getAttribute("href",2)});a=null})();document.querySelectorAll&&function(){var a=g,b=document.createElement("div");b.innerHTML="<p class='TEST'></p>";if(!b.querySelectorAll||0!==b.querySelectorAll(".TEST").length){g=
function(b,c,d,e){c=c||document;if(!e&&!g.isXML(c)){var f=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(b);if(f&&(1===c.nodeType||9===c.nodeType)){if(f[1])return s(c.getElementsByTagName(b),d);if(f[2]&&m.find.CLASS&&c.getElementsByClassName)return s(c.getElementsByClassName(f[2]),d)}if(9===c.nodeType){if("body"===b&&c.body)return s([c.body],d);if(f&&f[3]){var h=c.getElementById(f[3]);if(h&&h.parentNode){if(h.id===f[3])return s([h],d)}else return s([],d)}try{return s(c.querySelectorAll(b),d)}catch(k){}}else if(1===
c.nodeType&&"object"!==c.nodeName.toLowerCase()){var f=c,l=(h=c.getAttribute("id"))||"__sizzle__",n=c.parentNode,p=/^\s*[+~]/.test(b);h?l=l.replace(/'/g,"\\$&"):c.setAttribute("id",l);p&&n&&(c=c.parentNode);try{if(!p||n)return s(c.querySelectorAll("[id='"+l+"'] "+b),d)}catch(E){}finally{h||f.removeAttribute("id")}}}return a(b,c,d,e)};for(var c in a)g[c]=a[c];b=null}}();(function(){var a=document.documentElement,b=a.matchesSelector||a.mozMatchesSelector||a.webkitMatchesSelector||a.msMatchesSelector;
if(b){var c=!b.call(document.createElement("div"),"div"),d=!1;try{b.call(document.documentElement,"[test!='']:sizzle")}catch(e){d=!0}g.matchesSelector=function(a,e){e=e.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!g.isXML(a))try{if(d||!m.match.PSEUDO.test(e)&&!/!=/.test(e)){var f=b.call(a,e);if(f||!c||a.document&&11!==a.document.nodeType)return f}}catch(h){}return 0<g(e,null,null,[a]).length}}})();(function(){var a=document.createElement("div");a.innerHTML="<div class='test e'></div><div class='test'></div>";
a.getElementsByClassName&&0!==a.getElementsByClassName("e").length&&(a.lastChild.className="e",1!==a.getElementsByClassName("e").length&&(m.order.splice(1,0,"CLASS"),m.find.CLASS=function(a,b,c){if("undefined"!==typeof b.getElementsByClassName&&!c)return b.getElementsByClassName(a[1])},a=null))})();g.contains=document.documentElement.contains?function(a,b){return a!==b&&(a.contains?a.contains(b):!0)}:document.documentElement.compareDocumentPosition?function(a,b){return!!(a.compareDocumentPosition(b)&
16)}:function(){return!1};g.isXML=function(a){return(a=(a?a.ownerDocument||a:0).documentElement)?"HTML"!==a.nodeName:!1};var I=function(a,b){for(var c,d=[],e="",f=b.nodeType?[b]:b;c=m.match.PSEUDO.exec(a);)e+=c[0],a=a.replace(m.match.PSEUDO,"");a=m.relative[a]?a+"*":a;c=0;for(var h=f.length;c<h;c++)g(a,f[c],d);return g.filter(e,d)};window.Sizzle=g})();Prototype._original_property=window.Sizzle;
(function(a){var b=Prototype.Selector.extendElements;Prototype.Selector.engine=a;Prototype.Selector.select=function(c,d){return b(a(c,d||document))};Prototype.Selector.match=function(b,d){return 1==a.matches(d,[b]).length}})(Sizzle);window.Sizzle=Prototype._original_property;delete Prototype._original_property;
var Form={reset:function(a){a=$(a);a.reset();return a},serializeElements:function(a,b){"object"!=typeof b?b={hash:!!b}:Object.isUndefined(b.hash)&&(b.hash=!0);var c,d,e=!1,f=b.submit,h,k;b.hash?(k={},h=function(a,b,c){b in a?(Object.isArray(a[b])||(a[b]=[a[b]]),a[b]=a[b].concat(c)):a[b]=c;return a}):(k="",h=function(a,b,c){Object.isArray(c)||(c=[c]);if(!c.length)return a;var d=encodeURIComponent(b).gsub(/%20/,"+");return a+(a?"&":"")+c.map(function(a){a=a.gsub(/(\r)?\n/,"\r\n");a=encodeURIComponent(a);
a=a.gsub(/%20/,"+");return d+"="+a}).join("&")});return a.inject(k,function(a,b){!b.disabled&&b.name&&(c=b.name,d=$(b).getValue(),null==d||"file"==b.type||"submit"==b.type&&(e||!1===f||f&&c!=f||!(e=!0))||(a=h(a,c,d)));return a})},Methods:{serialize:function(a,b){return Form.serializeElements(Form.getElements(a),b)},getElements:function(a){a=$(a).getElementsByTagName("*");for(var b,c=[],d=Form.Element.Serializers,e=0;b=a[e];e++)d[b.tagName.toLowerCase()]&&c.push(Element.extend(b));return c},getInputs:function(a,
b,c){a=$(a);a=a.getElementsByTagName("input");if(!b&&!c)return $A(a).map(Element.extend);for(var d=0,e=[],f=a.length;d<f;d++){var h=a[d];b&&h.type!=b||c&&h.name!=c||e.push(Element.extend(h))}return e},disable:function(a){a=$(a);Form.getElements(a).invoke("disable");return a},enable:function(a){a=$(a);Form.getElements(a).invoke("enable");return a},findFirstElement:function(a){a=$(a).getElements().findAll(function(a){return"hidden"!=a.type&&!a.disabled});var b=a.findAll(function(a){return a.hasAttribute("tabIndex")&&
0<=a.tabIndex}).sortBy(function(a){return a.tabIndex}).first();return b?b:a.find(function(a){return/^(?:input|select|textarea)$/i.test(a.tagName)})},focusFirstElement:function(a){a=$(a);var b=a.findFirstElement();b&&b.activate();return a},request:function(a,b){a=$(a);b=Object.clone(b||{});var c=b.parameters,d=a.readAttribute("action")||"";d.blank()&&(d=window.location.href);b.parameters=a.serialize(!0);c&&(Object.isString(c)&&(c=c.toQueryParams()),Object.extend(b.parameters,c));a.hasAttribute("method")&&
!b.method&&(b.method=a.method);return new Ajax.Request(d,b)}},Element:{focus:function(a){$(a).focus();return a},select:function(a){$(a).select();return a}}};
Form.Element.Methods={serialize:function(a){a=$(a);if(!a.disabled&&a.name){var b=a.getValue();if(void 0!=b){var c={};c[a.name]=b;return Object.toQueryString(c)}}return""},getValue:function(a){a=$(a);var b=a.tagName.toLowerCase();return Form.Element.Serializers[b](a)},setValue:function(a,b){a=$(a);var c=a.tagName.toLowerCase();Form.Element.Serializers[c](a,b);return a},clear:function(a){$(a).value="";return a},present:function(a){return""!=$(a).value},activate:function(a){a=$(a);try{a.focus(),!a.select||
"input"==a.tagName.toLowerCase()&&/^(?:button|reset|submit)$/i.test(a.type)||a.select()}catch(b){}return a},disable:function(a){a=$(a);a.disabled=!0;return a},enable:function(a){a=$(a);a.disabled=!1;return a}};var Field=Form.Element,$F=Form.Element.Methods.getValue;
Form.Element.Serializers=function(){function a(a,b){if(Object.isUndefined(b))return a.checked?a.value:null;a.checked=!!b}function b(a,b){if(Object.isUndefined(b))return a.value;a.value=b}function c(a){var b=a.selectedIndex;return 0<=b?e(a.options[b]):null}function d(a){var b,c=a.length;if(!c)return null;var d=0;for(b=[];d<c;d++){var g=a.options[d];g.selected&&b.push(e(g))}return b}function e(a){return Element.hasAttribute(a,"value")?a.value:a.text}return{input:function(c,d){switch(c.type.toLowerCase()){case "checkbox":case "radio":return a(c,
d);default:return b(c,d)}},inputSelector:a,textarea:b,select:function(a,b){if(Object.isUndefined(b))return("select-one"===a.type?c:d)(a);for(var e,l,g=!Object.isArray(b),m=0,n=a.length;m<n;m++)if(e=a.options[m],l=this.optionValue(e),g){if(l==b){e.selected=!0;break}}else e.selected=b.include(l)},selectOne:c,selectMany:d,optionValue:e,button:b}}();
Abstract.TimedObserver=Class.create(PeriodicalExecuter,{initialize:function($super,b,c,d){$super(d,c);this.element=$(b);this.lastValue=this.getValue()},execute:function(){var a=this.getValue();if(Object.isString(this.lastValue)&&Object.isString(a)?this.lastValue!=a:String(this.lastValue)!=String(a))this.callback(this.element,a),this.lastValue=a}});Form.Element.Observer=Class.create(Abstract.TimedObserver,{getValue:function(){return Form.Element.getValue(this.element)}});
Form.Observer=Class.create(Abstract.TimedObserver,{getValue:function(){return Form.serialize(this.element)}});
Abstract.EventObserver=Class.create({initialize:function(a,b){this.element=$(a);this.callback=b;this.lastValue=this.getValue();"form"==this.element.tagName.toLowerCase()?this.registerFormCallbacks():this.registerCallback(this.element)},onElementEvent:function(){var a=this.getValue();this.lastValue!=a&&(this.callback(this.element,a),this.lastValue=a)},registerFormCallbacks:function(){Form.getElements(this.element).each(this.registerCallback,this)},registerCallback:function(a){if(a.type)switch(a.type.toLowerCase()){case "checkbox":case "radio":Event.observe(a,
"click",this.onElementEvent.bind(this));break;default:Event.observe(a,"change",this.onElementEvent.bind(this))}}});Form.Element.EventObserver=Class.create(Abstract.EventObserver,{getValue:function(){return Form.Element.getValue(this.element)}});Form.EventObserver=Class.create(Abstract.EventObserver,{getValue:function(){return Form.serialize(this.element)}});
(function(a){function b(a,b){return a.which?a.which===b+1:a.button===b}function c(a,b){return a.button===W[b]}function d(a,b){switch(b){case 0:return 1==a.which&&!a.metaKey;case 1:return 2==a.which||1==a.which&&a.metaKey;case 2:return 3==a.which;default:return!1}}function e(a){a=t.extend(a);var b=a.target,c=a.type;(a=a.currentTarget)&&a.tagName&&("load"===c||"error"===c||"click"===c&&"input"===a.tagName.toLowerCase()&&"radio"===a.type)&&(b=a);return b.nodeType==Node.TEXT_NODE?b.parentNode:b}function f(a){var b=
document.documentElement,c=document.body||{scrollLeft:0};return a.pageX||a.clientX+(b.scrollLeft||c.scrollLeft)-(b.clientLeft||0)}function h(a){var b=document.documentElement,c=document.body||{scrollTop:0};return a.pageY||a.clientY+(b.scrollTop||c.scrollTop)-(b.clientTop||0)}function k(a){return C[a]||a}function l(a){if(a===window)return 0;"undefined"===typeof a._prototypeUID&&(a._prototypeUID=Element.Storage.UID++);return a._prototypeUID}function g(a){return a===window?0:a==document?1:a.uniqueID}
function m(a){return a.include(":")}function n(b,c){var d=a.Event.cache;Object.isUndefined(c)&&(c=l(b));d[c]||(d[c]={element:b});return d[c]}function r(b,c,d){b=$(b);a:{var e=b,f=n(e);f[c]||(f[c]=[]);for(var f=f[c],h=f.length;h--;)if(f[h].handler===d){d=null;break a}e=l(e);d={responder:a.Event._createResponder(e,c,d),handler:d};f.push(d)}if(null===d)return b;d=d.responder;m(c)?(c=b,c.addEventListener?c.addEventListener("dataavailable",d,!1):(c.attachEvent("ondataavailable",d),c.attachEvent("onlosecapture",
d))):(f=b,c=k(c),f.addEventListener?f.addEventListener(c,d,!1):f.attachEvent("on"+c,d));return b}function x(b,c,d){b=$(b);var e=!Object.isUndefined(d);if(Object.isUndefined(c)&&!e){c=b;d=l(c);var f=a.Event.cache[d];if(f){Object.isUndefined(d)&&(d=l(c));delete a.Event.cache[d];for(var h in f)if("element"!==h)for(d=f[h],e=d.length;e--;)s(c,h,d[e].responder)}return b}if(!e){h=b;d=n(h);if(f=d[c])for(delete d[c],d=f.length;d--;)s(h,c,f[d].responder);return b}if(h=n(b)[c]){for(e=h.length;e--;)if(h[e].handler===
d){f=h[e];break}f?(d=h.indexOf(f),h.splice(d,1),h=f):h=void 0}else h=void 0;if(!h)return b;s(b,c,h.responder);return b}function s(a,b,c){m(b)?a.removeEventListener?a.removeEventListener("dataavailable",c,!1):(a.detachEvent("ondataavailable",c),a.detachEvent("onlosecapture",c)):(b=k(b),a.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent("on"+b,c))}function O(a,b,c,d){a=$(a);a=a!==document?a:document.createEvent&&!a.dispatchEvent?document.documentElement:a;Object.isUndefined(d)&&(d=!0);
c=c||{};b=M(a,b,c,d);return t.extend(b)}function H(a,b,c,d){var e=document.createEvent("HTMLEvents");e.initEvent("dataavailable",d,!0);e.eventName=b;e.memo=c;a.dispatchEvent(e);return e}function B(a,b,c,d){var e=document.createEventObject();e.eventType=d?"ondataavailable":"onlosecapture";e.eventName=b;e.memo=c;a.fireEvent(e.eventType,e);return e}function I(a,b,c,d){a=$(a);Object.isFunction(c)&&Object.isUndefined(d)&&(d=c,c=null);return(new t.Handler(a,b,c,d)).start()}function q(){a.Event.cache=null}
var J=document.createElement("div"),F=document.documentElement,F="onmouseenter"in F&&"onmouseleave"in F,t={KEY_BACKSPACE:8,KEY_TAB:9,KEY_RETURN:13,KEY_ESC:27,KEY_LEFT:37,KEY_UP:38,KEY_RIGHT:39,KEY_DOWN:40,KEY_DELETE:46,KEY_HOME:36,KEY_END:35,KEY_PAGEUP:33,KEY_PAGEDOWN:34,KEY_INSERT:45},K=function(a){return!1};window.attachEvent&&(K=window.addEventListener?function(a){return!(a instanceof window.Event)}:function(a){return!0});var P,W={0:1,1:4,2:2};P=window.attachEvent?window.addEventListener?function(a,
d){return K(a)?c(a,d):b(a,d)}:c:Prototype.Browser.WebKit?d:b;t.Methods={isLeftClick:function(a){return P(a,0)},isMiddleClick:function(a){return P(a,1)},isRightClick:function(a){return P(a,2)},element:function(a){return Element.extend(e(a))},findElement:function(a,b){var c=e(a),d=Prototype.Selector;if(!b)return Element.extend(c);for(;c;){if(Object.isElement(c)&&d.match(c,b))return Element.extend(c);c=c.parentNode}},pointer:function(a){return{x:f(a),y:h(a)}},pointerX:f,pointerY:h,stop:function(a){t.extend(a);
a.preventDefault();a.stopPropagation();a.stopped=!0}};var u=Object.keys(t.Methods).inject({},function(a,b){a[b]=t.Methods[b].methodize();return a});if(window.attachEvent){var L=function(a){switch(a.type){case "mouseover":case "mouseenter":a=a.fromElement;break;case "mouseout":case "mouseleave":a=a.toElement;break;default:return null}return Element.extend(a)},V={stopPropagation:function(){this.cancelBubble=!0},preventDefault:function(){this.returnValue=!1},inspect:function(){return"[object Event]"}};
t.extend=function(a,b){if(!a)return!1;if(!K(a)||a._extendedByPrototype)return a;a._extendedByPrototype=Prototype.emptyFunction;var c=t.pointer(a);Object.extend(a,{target:a.srcElement||b,relatedTarget:L(a),pageX:c.x,pageY:c.y});Object.extend(a,u);Object.extend(a,V);return a}}else t.extend=Prototype.K;window.addEventListener&&(t.prototype=window.Event.prototype||document.createEvent("HTMLEvents").__proto__,Object.extend(t.prototype,u));var C={mouseenter:"mouseover",mouseleave:"mouseout"};F&&(k=Prototype.K);
"uniqueID"in J&&(l=g);t._isCustomEvent=m;var M=document.createEvent?H:B;t.Handler=Class.create({initialize:function(a,b,c,d){this.element=$(a);this.eventName=b;this.selector=c;this.callback=d;this.handler=this.handleEvent.bind(this)},start:function(){t.observe(this.element,this.eventName,this.handler);return this},stop:function(){t.stopObserving(this.element,this.eventName,this.handler);return this},handleEvent:function(a){var b=t.findElement(a,this.selector);b&&this.callback.call(this.element,a,
b)}});Object.extend(t,t.Methods);Object.extend(t,{fire:O,observe:r,stopObserving:x,on:I});Element.addMethods({fire:O,observe:r,stopObserving:x,on:I});Object.extend(document,{fire:O.methodize(),observe:r.methodize(),stopObserving:x.methodize(),on:I.methodize(),loaded:!1});a.Event?Object.extend(window.Event,t):a.Event=t;a.Event.cache={};window.attachEvent&&window.attachEvent("onunload",q);F=J=null})(this);
(function(a){function b(a,b,c){return function(d){var e=Event.cache[a].element;if(Object.isUndefined(d.eventName)||d.eventName!==b)return!1;Event.extend(d,e);c.call(e,d)}}function c(a,b,c){return function(b){var d=Event.cache[a].element;Event.extend(b,d);for(var e=b.relatedTarget;e&&e!==d;)try{e=e.parentNode}catch(h){e=d}e!==d&&c.call(d,b)}}var d=document.documentElement,e="onmouseenter"in d&&"onmouseleave"in d;a.Event._createResponder=function(a,d,k){return Event._isCustomEvent(d)?b(a,d,k):e||"mouseenter"!==
d&&"mouseleave"!==d?function(b){if(Event.cache){var c=Event.cache[a].element;Event.extend(b,c);k.call(c,b)}}:c(a,d,k)};d=null})(this);
(function(a){function b(){document.loaded||(e&&window.clearTimeout(e),document.loaded=!0,document.fire("dom:loaded"))}function c(){"complete"===document.readyState&&(document.detachEvent("onreadystatechange",c),b())}function d(){try{document.documentElement.doScroll("left")}catch(a){e=d.defer();return}b()}var e;"complete"===document.readyState?b():(document.addEventListener?document.addEventListener("DOMContentLoaded",b,!1):(document.attachEvent("onreadystatechange",c),window==top&&(e=d.defer())),
Event.observe(window,"load",b))})(this);Element.addMethods();Hash.toQueryString=Object.toQueryString;var Toggle={display:Element.toggle};Element.Methods.childOf=Element.Methods.descendantOf;
var Insertion={Before:function(a,b){return Element.insert(a,{before:b})},Top:function(a,b){return Element.insert(a,{top:b})},Bottom:function(a,b){return Element.insert(a,{bottom:b})},After:function(a,b){return Element.insert(a,{after:b})}},$continue=Error('"throw $continue" is deprecated, use "return" instead'),Position={includeScrollOffsets:!1,prepare:function(){this.deltaX=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0;this.deltaY=window.pageYOffset||document.documentElement.scrollTop||
document.body.scrollTop||0},within:function(a,b,c){if(this.includeScrollOffsets)return this.withinIncludingScrolloffsets(a,b,c);this.xcomp=b;this.ycomp=c;this.offset=Element.cumulativeOffset(a);return c>=this.offset[1]&&c<this.offset[1]+a.offsetHeight&&b>=this.offset[0]&&b<this.offset[0]+a.offsetWidth},withinIncludingScrolloffsets:function(a,b,c){var d=Element.cumulativeScrollOffset(a);this.xcomp=b+d[0]-this.deltaX;this.ycomp=c+d[1]-this.deltaY;this.offset=Element.cumulativeOffset(a);return this.ycomp>=
this.offset[1]&&this.ycomp<this.offset[1]+a.offsetHeight&&this.xcomp>=this.offset[0]&&this.xcomp<this.offset[0]+a.offsetWidth},overlap:function(a,b){if(!a)return 0;if("vertical"==a)return(this.offset[1]+b.offsetHeight-this.ycomp)/b.offsetHeight;if("horizontal"==a)return(this.offset[0]+b.offsetWidth-this.xcomp)/b.offsetWidth},cumulativeOffset:Element.Methods.cumulativeOffset,positionedOffset:Element.Methods.positionedOffset,absolutize:function(a){Position.prepare();return Element.absolutize(a)},relativize:function(a){Position.prepare();
return Element.relativize(a)},realOffset:Element.Methods.cumulativeScrollOffset,offsetParent:Element.Methods.getOffsetParent,page:Element.Methods.viewportOffset,clone:function(a,b,c){c=c||{};return Element.clonePosition(b,a,c)}};
document.getElementsByClassName||(document.getElementsByClassName=function(a){function b(a){return a.blank()?null:"[contains(concat(' ', @class, ' '), ' "+a+" ')]"}a.getElementsByClassName=Prototype.BrowserFeatures.XPath?function(a,d){d=d.toString().strip();var e=/\s/.test(d)?$w(d).map(b).join(""):b(d);return e?document._getElementsByXPath(".//*"+e,a):[]}:function(a,b){b=b.toString().strip();var e=[],f=/\s/.test(b)?$w(b):null;if(!f&&!b)return e;var h=$(a).getElementsByTagName("*");b=" "+b+" ";for(var k=
0,l,g;l=h[k];k++)l.className&&(g=" "+l.className+" ")&&(g.include(b)||f&&f.all(function(a){return!a.toString().blank()&&g.include(" "+a+" ")}))&&e.push(Element.extend(l));return e};return function(a,b){return $(b||document.body).getElementsByClassName(a)}}(Element.Methods));Element.ClassNames=Class.create();
Element.ClassNames.prototype={initialize:function(a){this.element=$(a)},_each:function(a,b){this.element.className.split(/\s+/).select(function(a){return 0<a.length})._each(a,b)},set:function(a){this.element.className=a},add:function(a){this.include(a)||this.set($A(this).concat(a).join(" "))},remove:function(a){this.include(a)&&this.set($A(this).without(a).join(" "))},toString:function(){return $A(this).join(" ")}};Object.extend(Element.ClassNames.prototype,Enumerable);
(function(){window.Selector=Class.create({initialize:function(a){this.expression=a.strip()},findElements:function(a){return Prototype.Selector.select(this.expression,a)},match:function(a){return Prototype.Selector.match(a,this.expression)},toString:function(){return this.expression},inspect:function(){return"#<Selector: "+this.expression+">"}});Object.extend(Selector,{matchElements:function(a,b){for(var c=Prototype.Selector.match,d=[],e=0,f=a.length;e<f;e++){var h=a[e];c(h,b)&&d.push(Element.extend(h))}return d},
findElement:function(a,b,c){c=c||0;for(var d=0,e,f=0,h=a.length;f<h;f++)if(e=a[f],Prototype.Selector.match(e,b)&&c===d++)return Element.extend(e)},findChildElements:function(a,b){var c=b.toArray().join(", ");return Prototype.Selector.select(c,a||document)}})})();String.prototype.parseColor=function(a){var b="#";if("rgb("==this.slice(0,4)){var c=this.slice(4,this.length-1).split(","),d=0;do b+=parseInt(c[d]).toColorPart();while(3>++d)}else if("#"==this.slice(0,1)){if(4==this.length)for(d=1;4>d;d++)b+=(this.charAt(d)+this.charAt(d)).toLowerCase();7==this.length&&(b=this.toLowerCase())}return 7==b.length?b:a||this};
Element.collectTextNodes=function(a){return $A($(a).childNodes).collect(function(a){return 3==a.nodeType?a.nodeValue:a.hasChildNodes()?Element.collectTextNodes(a):""}).flatten().join("")};Element.collectTextNodesIgnoreClass=function(a,b){return $A($(a).childNodes).collect(function(a){return 3==a.nodeType?a.nodeValue:a.hasChildNodes()&&!Element.hasClassName(a,b)?Element.collectTextNodesIgnoreClass(a,b):""}).flatten().join("")};
Element.setContentZoom=function(a,b){a=$(a);a.setStyle({fontSize:b/100+"em"});Prototype.Browser.WebKit&&window.scrollBy(0,0);return a};Element.getInlineOpacity=function(a){return $(a).style.opacity||""};Element.forceRerendering=function(a){try{a=$(a);var b=document.createTextNode(" ");a.appendChild(b);a.removeChild(b)}catch(c){}};
var Effect={_elementDoesNotExistError:{name:"ElementDoesNotExistError",message:"The specified DOM element does not exist, but is required for this effect to operate"},Transitions:{linear:Prototype.K,sinoidal:function(a){return-Math.cos(a*Math.PI)/2+.5},reverse:function(a){return 1-a},flicker:function(a){a=-Math.cos(a*Math.PI)/4+.75+Math.random()/4;return 1<a?1:a},wobble:function(a){return-Math.cos(a*Math.PI*9*a)/2+.5},pulse:function(a,b){return-Math.cos(a*((b||5)-.5)*2*Math.PI)/2+.5},spring:function(a){return 1-
Math.cos(4.5*a*Math.PI)*Math.exp(6*-a)},none:function(a){return 0},full:function(a){return 1}},DefaultOptions:{duration:1,fps:100,sync:!1,from:0,to:1,delay:0,queue:"parallel"},tagifyText:function(a){var b="position:relative";Prototype.Browser.IE&&(b+=";zoom:1");a=$(a);$A(a.childNodes).each(function(c){3==c.nodeType&&(c.nodeValue.toArray().each(function(d){a.insertBefore((new Element("span",{style:b})).update(" "==d?String.fromCharCode(160):d),c)}),Element.remove(c))})},multiple:function(a,b,c){a=
("object"==typeof a||Object.isFunction(a))&&a.length?a:$(a).childNodes;var d=Object.extend({speed:.1,delay:0},c||{}),e=d.delay;$A(a).each(function(a,c){new b(a,Object.extend(d,{delay:c*d.speed+e}))})},PAIRS:{slide:["SlideDown","SlideUp"],blind:["BlindDown","BlindUp"],appear:["Appear","Fade"]},toggle:function(a,b,c){a=$(a);b=(b||"appear").toLowerCase();return Effect[Effect.PAIRS[b][a.visible()?1:0]](a,Object.extend({queue:{position:"end",scope:a.id||"global",limit:1}},c||{}))}};
Effect.DefaultOptions.transition=Effect.Transitions.sinoidal;
Effect.ScopedQueue=Class.create(Enumerable,{initialize:function(){this.effects=[];this.interval=null},_each:function(a){this.effects._each(a)},add:function(a){var b=(new Date).getTime();switch(Object.isString(a.options.queue)?a.options.queue:a.options.queue.position){case "front":this.effects.findAll(function(a){return"idle"==a.state}).each(function(b){b.startOn+=a.finishOn;b.finishOn+=a.finishOn});break;case "with-last":b=this.effects.pluck("startOn").max()||b;break;case "end":b=this.effects.pluck("finishOn").max()||
b}a.startOn+=b;a.finishOn+=b;(!a.options.queue.limit||this.effects.length<a.options.queue.limit)&&this.effects.push(a);this.interval||(this.interval=setInterval(this.loop.bind(this),15))},remove:function(a){this.effects=this.effects.reject(function(b){return b==a});0==this.effects.length&&(clearInterval(this.interval),this.interval=null)},loop:function(){for(var a=(new Date).getTime(),b=0,c=this.effects.length;b<c;b++)this.effects[b]&&this.effects[b].loop(a)}});
Effect.Queues={instances:$H(),get:function(a){return Object.isString(a)?this.instances.get(a)||this.instances.set(a,new Effect.ScopedQueue):a}};Effect.Queue=Effect.Queues.get("global");
Effect.Base=Class.create({position:null,start:function(a){a&&!1===a.transition&&(a.transition=Effect.Transitions.linear);this.options=Object.extend(Object.extend({},Effect.DefaultOptions),a||{});this.currentFrame=0;this.state="idle";this.startOn=1E3*this.options.delay;this.finishOn=this.startOn+1E3*this.options.duration;this.fromToDelta=this.options.to-this.options.from;this.totalTime=this.finishOn-this.startOn;this.totalFrames=this.options.fps*this.options.duration;this.render=function(){function a(b,
d){if(b.options[d+"Internal"])b.options[d+"Internal"](b);if(b.options[d])b.options[d](b)}return function(c){"idle"===this.state&&(this.state="running",a(this,"beforeSetup"),this.setup&&this.setup(),a(this,"afterSetup"));"running"===this.state&&(this.position=c=this.options.transition(c)*this.fromToDelta+this.options.from,a(this,"beforeUpdate"),this.update&&this.update(c),a(this,"afterUpdate"))}}();this.event("beforeStart");this.options.sync||Effect.Queues.get(Object.isString(this.options.queue)?"global":
this.options.queue.scope).add(this)},loop:function(a){if(a>=this.startOn)if(a>=this.finishOn)this.render(1),this.cancel(),this.event("beforeFinish"),this.finish&&this.finish(),this.event("afterFinish");else{a=(a-this.startOn)/this.totalTime;var b=(a*this.totalFrames).round();b>this.currentFrame&&(this.render(a),this.currentFrame=b)}},cancel:function(){this.options.sync||Effect.Queues.get(Object.isString(this.options.queue)?"global":this.options.queue.scope).remove(this);this.state="finished"},event:function(a){if(this.options[a+
"Internal"])this.options[a+"Internal"](this);if(this.options[a])this.options[a](this)},inspect:function(){var a=$H();for(property in this)Object.isFunction(this[property])||a.set(property,this[property]);return"#<Effect:"+a.inspect()+",options:"+$H(this.options).inspect()+">"}});
Effect.Parallel=Class.create(Effect.Base,{initialize:function(a,b){this.effects=a||[];this.start(b)},update:function(a){this.effects.invoke("render",a)},finish:function(a){this.effects.each(function(b){b.render(1);b.cancel();b.event("beforeFinish");b.finish&&b.finish(a);b.event("afterFinish")})}});
Effect.Tween=Class.create(Effect.Base,{initialize:function(a,b,c){a=Object.isString(a)?$(a):a;var d=$A(arguments),e=d.last(),d=5==d.length?d[3]:null;this.method=Object.isFunction(e)?e.bind(a):Object.isFunction(a[e])?a[e].bind(a):function(b){a[e]=b};this.start(Object.extend({from:b,to:c},d||{}))},update:function(a){this.method(a)}});Effect.Event=Class.create(Effect.Base,{initialize:function(a){this.start(Object.extend({duration:0},a||{}))},update:Prototype.emptyFunction});
Effect.Opacity=Class.create(Effect.Base,{initialize:function(a,b){this.element=$(a);if(!this.element)throw Effect._elementDoesNotExistError;Prototype.Browser.IE&&!this.element.currentStyle.hasLayout&&this.element.setStyle({zoom:1});var c=Object.extend({from:this.element.getOpacity()||0,to:1},b||{});this.start(c)},update:function(a){this.element.setOpacity(a)}});
Effect.Move=Class.create(Effect.Base,{initialize:function(a,b){this.element=$(a);if(!this.element)throw Effect._elementDoesNotExistError;var c=Object.extend({x:0,y:0,mode:"relative"},b||{});this.start(c)},setup:function(){this.element.makePositioned();this.originalLeft=parseFloat(this.element.getStyle("left")||"0");this.originalTop=parseFloat(this.element.getStyle("top")||"0");"absolute"==this.options.mode&&(this.options.x-=this.originalLeft,this.options.y-=this.originalTop)},update:function(a){this.element.setStyle({left:(this.options.x*
a+this.originalLeft).round()+"px",top:(this.options.y*a+this.originalTop).round()+"px"})}});Effect.MoveBy=function(a,b,c,d){return new Effect.Move(a,Object.extend({x:c,y:b},d||{}))};
Effect.Scale=Class.create(Effect.Base,{initialize:function(a,b,c){this.element=$(a);if(!this.element)throw Effect._elementDoesNotExistError;a=Object.extend({scaleX:!0,scaleY:!0,scaleContent:!0,scaleFromCenter:!1,scaleMode:"box",scaleFrom:100,scaleTo:b},c||{});this.start(a)},setup:function(){this.restoreAfterFinish=this.options.restoreAfterFinish||!1;this.elementPositioning=this.element.getStyle("position");this.originalStyle={};["top","left","width","height","fontSize"].each(function(a){this.originalStyle[a]=
this.element.style[a]}.bind(this));this.originalTop=this.element.offsetTop;this.originalLeft=this.element.offsetLeft;var a=this.element.getStyle("font-size")||"100%";["em","px","%","pt"].each(function(b){0<a.indexOf(b)&&(this.fontSize=parseFloat(a),this.fontSizeType=b)}.bind(this));this.factor=(this.options.scaleTo-this.options.scaleFrom)/100;this.dims=null;"box"==this.options.scaleMode&&(this.dims=[this.element.offsetHeight,this.element.offsetWidth]);/^content/.test(this.options.scaleMode)&&(this.dims=
[this.element.scrollHeight,this.element.scrollWidth]);this.dims||(this.dims=[this.options.scaleMode.originalHeight,this.options.scaleMode.originalWidth])},update:function(a){a=this.options.scaleFrom/100+this.factor*a;this.options.scaleContent&&this.fontSize&&this.element.setStyle({fontSize:this.fontSize*a+this.fontSizeType});this.setDimensions(this.dims[0]*a,this.dims[1]*a)},finish:function(a){this.restoreAfterFinish&&this.element.setStyle(this.originalStyle)},setDimensions:function(a,b){var c={};
this.options.scaleX&&(c.width=b.round()+"px");this.options.scaleY&&(c.height=a.round()+"px");if(this.options.scaleFromCenter){var d=(a-this.dims[0])/2,e=(b-this.dims[1])/2;"absolute"==this.elementPositioning?(this.options.scaleY&&(c.top=this.originalTop-d+"px"),this.options.scaleX&&(c.left=this.originalLeft-e+"px")):(this.options.scaleY&&(c.top=-d+"px"),this.options.scaleX&&(c.left=-e+"px"))}this.element.setStyle(c)}});
Effect.Highlight=Class.create(Effect.Base,{initialize:function(a,b){this.element=$(a);if(!this.element)throw Effect._elementDoesNotExistError;var c=Object.extend({startcolor:"#ffff99"},b||{});this.start(c)},setup:function(){"none"==this.element.getStyle("display")?this.cancel():(this.oldStyle={},this.options.keepBackgroundImage||(this.oldStyle.backgroundImage=this.element.getStyle("background-image"),this.element.setStyle({backgroundImage:"none"})),this.options.endcolor||(this.options.endcolor=this.element.getStyle("background-color").parseColor("#ffffff")),
this.options.restorecolor||(this.options.restorecolor=this.element.getStyle("background-color")),this._base=$R(0,2).map(function(a){return parseInt(this.options.startcolor.slice(2*a+1,2*a+3),16)}.bind(this)),this._delta=$R(0,2).map(function(a){return parseInt(this.options.endcolor.slice(2*a+1,2*a+3),16)-this._base[a]}.bind(this)))},update:function(a){this.element.setStyle({backgroundColor:$R(0,2).inject("#",function(b,c,d){return b+(this._base[d]+this._delta[d]*a).round().toColorPart()}.bind(this))})},
finish:function(){this.element.setStyle(Object.extend(this.oldStyle,{backgroundColor:this.options.restorecolor}))}});Effect.ScrollTo=function(a,b){var c=b||{},d=document.viewport.getScrollOffsets(),e=$(a).cumulativeOffset();c.offset&&(e[1]+=c.offset);return new Effect.Tween(null,d.top,e[1],c,function(a){scrollTo(d.left,a.round())})};
Effect.Fade=function(a,b){a=$(a);var c=a.getInlineOpacity(),d=Object.extend({from:a.getOpacity()||1,to:0,afterFinishInternal:function(a){0==a.options.to&&a.element.hide().setStyle({opacity:c})}},b||{});return new Effect.Opacity(a,d)};
Effect.Appear=function(a,b){a=$(a);var c=Object.extend({from:"none"==a.getStyle("display")?0:a.getOpacity()||0,to:1,afterFinishInternal:function(a){a.element.forceRerendering()},beforeSetup:function(a){a.element.setOpacity(a.options.from).show()}},b||{});return new Effect.Opacity(a,c)};
Effect.Puff=function(a,b){a=$(a);var c={opacity:a.getInlineOpacity(),position:a.getStyle("position"),top:a.style.top,left:a.style.left,width:a.style.width,height:a.style.height};return new Effect.Parallel([new Effect.Scale(a,200,{sync:!0,scaleFromCenter:!0,scaleContent:!0,restoreAfterFinish:!0}),new Effect.Opacity(a,{sync:!0,to:0})],Object.extend({duration:1,beforeSetupInternal:function(a){Position.absolutize(a.effects[0].element)},afterFinishInternal:function(a){a.effects[0].element.hide().setStyle(c)}},
b||{}))};Effect.BlindUp=function(a,b){a=$(a);a.makeClipping();return new Effect.Scale(a,0,Object.extend({scaleContent:!1,scaleX:!1,restoreAfterFinish:!0,afterFinishInternal:function(a){a.element.hide().undoClipping()}},b||{}))};
Effect.BlindDown=function(a,b){a=$(a);var c=a.getDimensions();return new Effect.Scale(a,100,Object.extend({scaleContent:!1,scaleX:!1,scaleFrom:0,scaleMode:{originalHeight:c.height,originalWidth:c.width},restoreAfterFinish:!0,afterSetup:function(a){a.element.makeClipping().setStyle({height:"0px"}).show()},afterFinishInternal:function(a){a.element.undoClipping()}},b||{}))};
Effect.SwitchOff=function(a,b){a=$(a);var c=a.getInlineOpacity();return new Effect.Appear(a,Object.extend({duration:.4,from:0,transition:Effect.Transitions.flicker,afterFinishInternal:function(a){new Effect.Scale(a.element,1,{duration:.3,scaleFromCenter:!0,scaleX:!1,scaleContent:!1,restoreAfterFinish:!0,beforeSetup:function(a){a.element.makePositioned().makeClipping()},afterFinishInternal:function(a){a.element.hide().undoClipping().undoPositioned().setStyle({opacity:c})}})}},b||{}))};
Effect.DropOut=function(a,b){a=$(a);var c={top:a.getStyle("top"),left:a.getStyle("left"),opacity:a.getInlineOpacity()};return new Effect.Parallel([new Effect.Move(a,{x:0,y:100,sync:!0}),new Effect.Opacity(a,{sync:!0,to:0})],Object.extend({duration:.5,beforeSetup:function(a){a.effects[0].element.makePositioned()},afterFinishInternal:function(a){a.effects[0].element.hide().undoPositioned().setStyle(c)}},b||{}))};
Effect.Shake=function(a,b){a=$(a);var c=Object.extend({distance:20,duration:.5},b||{}),d=parseFloat(c.distance),e=parseFloat(c.duration)/10,f={top:a.getStyle("top"),left:a.getStyle("left")};return new Effect.Move(a,{x:d,y:0,duration:e,afterFinishInternal:function(a){new Effect.Move(a.element,{x:2*-d,y:0,duration:2*e,afterFinishInternal:function(a){new Effect.Move(a.element,{x:2*d,y:0,duration:2*e,afterFinishInternal:function(a){new Effect.Move(a.element,{x:2*-d,y:0,duration:2*e,afterFinishInternal:function(a){new Effect.Move(a.element,
{x:2*d,y:0,duration:2*e,afterFinishInternal:function(a){new Effect.Move(a.element,{x:-d,y:0,duration:e,afterFinishInternal:function(a){a.element.undoPositioned().setStyle(f)}})}})}})}})}})}})};
Effect.SlideDown=function(a,b){a=$(a).cleanWhitespace();var c=a.down().getStyle("bottom"),d=a.getDimensions();return new Effect.Scale(a,100,Object.extend({scaleContent:!1,scaleX:!1,scaleFrom:window.opera?0:1,scaleMode:{originalHeight:d.height,originalWidth:d.width},restoreAfterFinish:!0,afterSetup:function(a){a.element.makePositioned();a.element.down().makePositioned();window.opera&&a.element.setStyle({top:""});a.element.makeClipping().setStyle({height:"0px"}).show()},afterUpdateInternal:function(a){a.element.down().setStyle({bottom:a.dims[0]-
a.element.clientHeight+"px"})},afterFinishInternal:function(a){a.element.undoClipping().undoPositioned();a.element.down().undoPositioned().setStyle({bottom:c})}},b||{}))};
Effect.SlideUp=function(a,b){a=$(a).cleanWhitespace();var c=a.down().getStyle("bottom"),d=a.getDimensions();return new Effect.Scale(a,window.opera?0:1,Object.extend({scaleContent:!1,scaleX:!1,scaleMode:"box",scaleFrom:100,scaleMode:{originalHeight:d.height,originalWidth:d.width},restoreAfterFinish:!0,afterSetup:function(a){a.element.makePositioned();a.element.down().makePositioned();window.opera&&a.element.setStyle({top:""});a.element.makeClipping().show()},afterUpdateInternal:function(a){a.element.down().setStyle({bottom:a.dims[0]-
a.element.clientHeight+"px"})},afterFinishInternal:function(a){a.element.hide().undoClipping().undoPositioned();a.element.down().undoPositioned().setStyle({bottom:c})}},b||{}))};Effect.Squish=function(a){return new Effect.Scale(a,window.opera?1:0,{restoreAfterFinish:!0,beforeSetup:function(a){a.element.makeClipping()},afterFinishInternal:function(a){a.element.hide().undoClipping()}})};
Effect.Grow=function(a,b){a=$(a);var c=Object.extend({direction:"center",moveTransition:Effect.Transitions.sinoidal,scaleTransition:Effect.Transitions.sinoidal,opacityTransition:Effect.Transitions.full},b||{}),d={top:a.style.top,left:a.style.left,height:a.style.height,width:a.style.width,opacity:a.getInlineOpacity()},e=a.getDimensions(),f,h,k,l;switch(c.direction){case "top-left":f=h=k=l=0;break;case "top-right":f=e.width;h=l=0;k=-e.width;break;case "bottom-left":f=k=0;h=e.height;l=-e.height;break;
case "bottom-right":f=e.width;h=e.height;k=-e.width;l=-e.height;break;case "center":f=e.width/2,h=e.height/2,k=-e.width/2,l=-e.height/2}return new Effect.Move(a,{x:f,y:h,duration:.01,beforeSetup:function(a){a.element.hide().makeClipping().makePositioned()},afterFinishInternal:function(a){new Effect.Parallel([new Effect.Opacity(a.element,{sync:!0,to:1,from:0,transition:c.opacityTransition}),new Effect.Move(a.element,{x:k,y:l,sync:!0,transition:c.moveTransition}),new Effect.Scale(a.element,100,{scaleMode:{originalHeight:e.height,
originalWidth:e.width},sync:!0,scaleFrom:window.opera?1:0,transition:c.scaleTransition,restoreAfterFinish:!0})],Object.extend({beforeSetup:function(a){a.effects[0].element.setStyle({height:"0px"}).show()},afterFinishInternal:function(a){a.effects[0].element.undoClipping().undoPositioned().setStyle(d)}},c))}})};
Effect.Shrink=function(a,b){a=$(a);var c=Object.extend({direction:"center",moveTransition:Effect.Transitions.sinoidal,scaleTransition:Effect.Transitions.sinoidal,opacityTransition:Effect.Transitions.none},b||{}),d={top:a.style.top,left:a.style.left,height:a.style.height,width:a.style.width,opacity:a.getInlineOpacity()},e=a.getDimensions(),f,h;switch(c.direction){case "top-left":f=h=0;break;case "top-right":f=e.width;h=0;break;case "bottom-left":f=0;h=e.height;break;case "bottom-right":f=e.width;h=
e.height;break;case "center":f=e.width/2,h=e.height/2}return new Effect.Parallel([new Effect.Opacity(a,{sync:!0,to:0,from:1,transition:c.opacityTransition}),new Effect.Scale(a,window.opera?1:0,{sync:!0,transition:c.scaleTransition,restoreAfterFinish:!0}),new Effect.Move(a,{x:f,y:h,sync:!0,transition:c.moveTransition})],Object.extend({beforeStartInternal:function(a){a.effects[0].element.makePositioned().makeClipping()},afterFinishInternal:function(a){a.effects[0].element.hide().undoClipping().undoPositioned().setStyle(d)}},
c))};Effect.Pulsate=function(a,b){a=$(a);var c=b||{},d=a.getInlineOpacity(),e=c.transition||Effect.Transitions.linear;return new Effect.Opacity(a,Object.extend(Object.extend({duration:2,from:0,afterFinishInternal:function(a){a.element.setStyle({opacity:d})}},c),{transition:function(a){return 1-e(-Math.cos(a*(c.pulses||5)*2*Math.PI)/2+.5)}}))};
Effect.Fold=function(a,b){a=$(a);var c={top:a.style.top,left:a.style.left,width:a.style.width,height:a.style.height};a.makeClipping();return new Effect.Scale(a,5,Object.extend({scaleContent:!1,scaleX:!1,afterFinishInternal:function(b){new Effect.Scale(a,1,{scaleContent:!1,scaleY:!1,afterFinishInternal:function(a){a.element.hide().undoClipping().setStyle(c)}})}},b||{}))};
Effect.Morph=Class.create(Effect.Base,{initialize:function(a,b){this.element=$(a);if(!this.element)throw Effect._elementDoesNotExistError;var c=Object.extend({style:{}},b||{});if(Object.isString(c.style))if(c.style.include(":"))this.style=c.style.parseStyle();else{this.element.addClassName(c.style);this.style=$H(this.element.getStyles());this.element.removeClassName(c.style);var d=this.element.getStyles();this.style=this.style.reject(function(a){return a.value==d[a.key]});c.afterFinishInternal=function(a){a.element.addClassName(a.options.style);
a.transforms.each(function(b){a.element.style[b.style]=""})}}else this.style=$H(c.style);this.start(c)},setup:function(){function a(a){if(!a||["rgba(0, 0, 0, 0)","transparent"].include(a))a="#ffffff";a=a.parseColor();return $R(0,2).map(function(c){return parseInt(a.slice(2*c+1,2*c+3),16)})}this.transforms=this.style.map(function(b){var c=b[0];b=b[1];var d=null;"#zzzzzz"!=b.parseColor("#zzzzzz")?(b=b.parseColor(),d="color"):"opacity"==c?(b=parseFloat(b),Prototype.Browser.IE&&!this.element.currentStyle.hasLayout&&
this.element.setStyle({zoom:1})):Element.CSS_LENGTH.test(b)&&(d=b.match(/^([\+\-]?[0-9\.]+)(.*)$/),b=parseFloat(d[1]),d=3==d.length?d[2]:null);var e=this.element.getStyle(c);return{style:c.camelize(),originalValue:"color"==d?a(e):parseFloat(e||0),targetValue:"color"==d?a(b):b,unit:d}}.bind(this)).reject(function(a){return a.originalValue==a.targetValue||"color"!=a.unit&&(isNaN(a.originalValue)||isNaN(a.targetValue))})},update:function(a){for(var b={},c,d=this.transforms.length;d--;)b[(c=this.transforms[d]).style]=
"color"==c.unit?"#"+Math.round(c.originalValue[0]+(c.targetValue[0]-c.originalValue[0])*a).toColorPart()+Math.round(c.originalValue[1]+(c.targetValue[1]-c.originalValue[1])*a).toColorPart()+Math.round(c.originalValue[2]+(c.targetValue[2]-c.originalValue[2])*a).toColorPart():(c.originalValue+(c.targetValue-c.originalValue)*a).toFixed(3)+(null===c.unit?"":c.unit);this.element.setStyle(b,!0)}});
Effect.Transform=Class.create({initialize:function(a,b){this.tracks=[];this.options=b||{};this.addTracks(a)},addTracks:function(a){a.each(function(a){a=$H(a);var c=a.values().first();this.tracks.push($H({ids:a.keys().first(),effect:Effect.Morph,options:{style:c}}))}.bind(this));return this},play:function(){return new Effect.Parallel(this.tracks.map(function(a){var b=a.get("ids"),c=a.get("effect"),d=a.get("options");return[$(b)||$$(b)].flatten().map(function(a){return new c(a,Object.extend({sync:!0},
d))})}).flatten(),this.options)}});Element.CSS_PROPERTIES=$w("backgroundColor backgroundPosition borderBottomColor borderBottomStyle borderBottomWidth borderLeftColor borderLeftStyle borderLeftWidth borderRightColor borderRightStyle borderRightWidth borderSpacing borderTopColor borderTopStyle borderTopWidth bottom clip color fontSize fontWeight height left letterSpacing lineHeight marginBottom marginLeft marginRight marginTop markerOffset maxHeight maxWidth minHeight minWidth opacity outlineColor outlineOffset outlineWidth paddingBottom paddingLeft paddingRight paddingTop right textIndent top width wordSpacing zIndex");
Element.CSS_LENGTH=/^(([\+\-]?[0-9\.]+)(em|ex|px|in|cm|mm|pt|pc|\%))|0$/;String.__parseStyleElement=document.createElement("div");
String.prototype.parseStyle=function(){var a,b=$H();Prototype.Browser.WebKit?a=(new Element("div",{style:this})).style:(String.__parseStyleElement.innerHTML='<div style="'+this+'"></div>',a=String.__parseStyleElement.childNodes[0].style);Element.CSS_PROPERTIES.each(function(c){a[c]&&b.set(c,a[c])});Prototype.Browser.IE&&this.include("opacity")&&b.set("opacity",this.match(/opacity:\s*((?:0|1)?(?:\.\d*)?)/)[1]);return b};
Element.getStyles=document.defaultView&&document.defaultView.getComputedStyle?function(a){var b=document.defaultView.getComputedStyle($(a),null);return Element.CSS_PROPERTIES.inject({},function(a,d){a[d]=b[d];return a})}:function(a){a=$(a);var b=a.currentStyle,c;c=Element.CSS_PROPERTIES.inject({},function(a,c){a[c]=b[c];return a});c.opacity||(c.opacity=a.getOpacity());return c};
Effect.Methods={morph:function(a,b,c){a=$(a);new Effect.Morph(a,Object.extend({style:b},c||{}));return a},visualEffect:function(a,b,c){a=$(a);b=b.dasherize().camelize();b=b.charAt(0).toUpperCase()+b.substring(1);new Effect[b](a,c);return a},highlight:function(a,b){a=$(a);new Effect.Highlight(a,b);return a}};
$w("fade appear grow shrink fold blindUp blindDown slideUp slideDown pulsate shake puff squish switchOff dropOut").each(function(a){Effect.Methods[a]=function(b,c){b=$(b);Effect[a.charAt(0).toUpperCase()+a.substring(1)](b,c);return b}});$w("getInlineOpacity forceRerendering setContentZoom collectTextNodes collectTextNodesIgnoreClass getStyles").each(function(a){Effect.Methods[a]=Element[a]});Element.addMethods(Effect.Methods);var PP={util:{},resourcebank:{},planningDocument:{}};window.console||(window.console={log:function(a){},warn:function(a){},error:function(a){}});document.runOnStartup=[];function addStartupFunction(a){"complete"==document.readyState||"loaded"==document.readyState?a():document.runOnStartup.push(a)}function defaultOnLoad(){document.setup&&document.setup();for(var a=0,b=document.runOnStartup.length;a<b;++a)document.runOnStartup[a]()}
function popupWindow(a){return window.open(a,(new Date).getTime(),"height=300,width=500,resizable,scrollbars")}function popupPolicyWindow(a,b,c,d){var e=600,f=1E3;"undefined"!=typeof c&&(e=c);"undefined"!=typeof d&&(f=d);(a=window.open(a,"policy:"+b,"height="+e+",width="+f+",resizable,scrollbars"))&&a.focus()}function popupPersonalDetail(a){a={url:a};window.opener&&(a.dimensions="fullscreen");PP.util.Dialog.open(a)}function popupDialog(a){PP.util.Dialog.open({url:a})}
function popup(a){popupWindow(a)}function popupReadBy(a){(a=window.open(a,(new Date).getTime(),"height=500,width=400,resizable=yes,scrollbars=yes"))&&a.focus()}function popupPim(a,b){var c=window.open(a,"pimPopup_"+b,"resizable=yes,scrollbars=auto,height=580,width=450");c&&c.focus()}var BK={handleTimeSpanSelect:function(){try{var a=window.top.frames.ppfmain.frames.mc.document.getElementsByTagName("select")[0];a.disabled=!0;window.onunload=function(){a.disabled=!1}}catch(b){}}};
function createHttpRequest(){var a=null;try{a=new XMLHttpRequest}catch(b){try{a=new ActiveXObject("Microsoft.XMLHTTP")}catch(c){try{a=new ActiveXObject("Msxml2.XMLHTTP")}catch(d){}}}return a}function setContent(a,b){var c=createHttpRequest();c&&(c.open("GET",b,!1),c.send(null),document.getElementById(a).innerHTML=c.responseText)}function byId(a){return document.getElementById(a)}function getElementById(a){return document.getElementById(a)}function getForm(a){return document.forms[a]}
function showHideElement(a){if(a=getElementById(a)){if("block"==a.style.display)return a.style.display="none",!1;a.style.display="block";return!0}}function confirmDialog(a){return confirm(a)}function prepareForRegExp(a){return a.replace(/([()\[\]*.?])/ig,"\\$1")}function collapseWhitespaceToSpaceAndTrim(a){return a.strip().replace(/\s+/g," ")}
function getScrollPos(){return document.compatMode&&"CSS1Compat"==document.compatMode?document.body.parentNode.scrollTop:document.body.scrollTop?document.body.scrollTop:window.scrollY?window.scrollY:0}function setScrollPos(a){a&&window.scrollTo&&window.scrollTo(0,a)}function checkEnter(a){a=a||window.event;var b=a.which?a.which:a.keyCode;return(13==b||10==b)&&(a.ctrlKey||a.shiftKey)}
function nextFocus(a,b){var c=a?a:window.event,c=c.which?c.which:c.keyCode;return 10==c||13==c?($(b).focus(),!1):!0}function createCookie(a,b,c){var d="";c&&(d=new Date,d.setTime(d.getTime()+864E5*c),d="; expires="+d.toGMTString());document.cookie=a+"="+b+d+"; path=/"}function readCookie(a){a+="=";for(var b=document.cookie.split(";"),c=0,d=b.length;c<d;++c){for(var e=b[c];" "==e.charAt(0);)e=e.substring(1,e.length);if(0===e.indexOf(a))return e.substring(a.length,e.length)}return null}
function eraseCookie(a){createCookie(a,"",-1)}function saveScrollPosition(){createCookie("scrollPosition",getScrollPos())}function restoreScrollPosition(){setScrollPos(readCookie("scrollPosition"));eraseCookie("scrollPosition")}addStartupFunction(restoreScrollPosition);function getWindowWidth(a){return a.innerWidth?a.innerWidth:a.document.documentElement.clientWidth&&0<a.document.documentElement.clientWidth?a.document.documentElement.clientWidth:a.document.body.clientWidth}
function getWindowHeight(a){return a.innerHeight?a.innerHeight:a.document.documentElement.clientHeight&&0<a.document.documentElement.clientHeight?a.document.documentElement.clientHeight:a.document.body.clientHeight}getSelectedRadioValue=function(a,b){var c=getSelectedRadio(a,b);if(c)return c.value};getSelectedRadio=function(a,b){if(a=$(a))return a.down('input:checked[type="radio"][name="'+b+'"]')};
PP.cancelPreventDoubleClick=function(){PP.ModalWait.remove();"function"==typeof window.stop?window.stop():"function"==typeof document.execCommand?document.execCommand("Stop"):window.location.href="#";return!1};
PP.ModalWait=PP.ModalWait||{PARENT_TAG_ID:"main-body-tag",ELEMENT_ID:"modalWait",ELEMENT_MSG_ID:"modalWait_waitMessage",ELEMENT_MSG_CONTAINER_ID:"modalWait_waitMessage_container",ELEMENT_CANCEL_ID:"modalWait_cancel",WAIT_MSG_CLASS:"waitMessage",WAIT_MSG_CONTAINER_CLASS:"waitMessageContainer",WAIT_IMG_CLASS:"waitImage",ELEMENT_CANCEL_CLASS:"cancelModal",VALIDATION_PARENT_TAG:"validate-login",SIMPLE_LAYOUT_PARENT_TAG:"simple-body-tag",PLAIN_LAYOUT_PARENT_TAG:"plain-body-tag",effectTimeout:void 0,add:function(a){this._create(a,
!0)},remove:function(){this.effectTimeout&&(window.clearTimeout(this.effectTimeout),this.effectTimeout=void 0);var a=$(this.ELEMENT_ID);a&&a.remove();(a=$(this.ELEMENT_MSG_CONTAINER_ID))&&a.remove()},_removeOnUnload:function(){try{this.remove(),Event.stopObserving(window,"unload",this._removeOnUnload)}catch(a){}},preventDoubleClick:function(){var a=window.i18n||top.i18n;a&&a.doubleClick&&this._create(a.doubleClick.message,!0,PP.cancelPreventDoubleClick,a.doubleClick.cancelMessage)},_create:function(a,
b,c,d){var e=$(this.PARENT_TAG_ID)||$(this.VALIDATION_PARENT_TAG)||$(this.PLAIN_LAYOUT_PARENT_TAG)||$(this.SIMPLE_LAYOUT_PARENT_TAG)||document.body;if(e){var f=new Element("div",{className:"modalFog",id:this.ELEMENT_ID,style:"display:none"});e.insert(f);f.setOpacity(0);f.show();var h=new Element("div",{className:this.WAIT_MSG_CONTAINER_CLASS,id:this.ELEMENT_MSG_CONTAINER_ID,style:"display:none"});if(c&&d){var k=new Element("div",{className:this.ELEMENT_CANCEL_CLASS,id:this.ELEMENT_CANCEL_ID});k.update(d);
h.insert(k);k.observe("click",c)}c=new Element("div",{className:this.WAIT_MSG_CLASS,id:this.ELEMENT_MSG_ID});c.update(a);h.insert(c);a=new Element("div",{className:this.WAIT_IMG_CLASS});h.insert(a);e.insert(h);b?this.effectTimeout=window.setTimeout(function(){new Effect.Appear(PP.ModalWait.ELEMENT_ID,{duration:1.5,from:0,to:.8});new Effect.Appear(PP.ModalWait.ELEMENT_MSG_CONTAINER_ID,{duration:1.5,from:0,to:1})},1337):(f.setOpacity(.8),h.show());Event.observe(window,"unload",this._removeOnUnload)}},
doubleClickProtectionActivated:!1};
top.enableDoubleClickProtection&&document.observe("dom:loaded",function(){PP.ModalWait.doubleClickProtectionActivated||(PP.ModalWait.doubleClickProtectionActivated=!0,top!=self&&top.PP&&top.PP.ModalWait&&top.PP.ModalWait.remove(),$$("form.progressbar,form[name='loginValidationForm']").each(function(a,b){a.observe("submit",function(a){top.PP.ModalWait.preventDoubleClick()})}),document.on("click","a:not(.chosen-single,.no-progressbar,a[href^='javascript'],a[href*='ownload'],a[href*='/node.do'],a[href=''],a[href^='mailto'],a[href^='#'],a[onclick],a[target]),a[target='_self']:not(.chosen-single,.no-progressbar,a[href^='javascript'],a[href*='ownload'],a[href*='/node.do'],a[href=''],a[href^='mailto'],a[href^='#'],a[onclick]),a[target='_top']:not(.chosen-single,.no-progressbar,a[href^='javascript'],a[href*='ownload'],a[href*='/node.do'],a[href=''],a[href^='mailto'],a[href^='#'],a[onclick])",function(a,
b){if("onbeforeunload"in window&&!navigator.userAgent.match(/(iPhone|iPod|iPad)/)){top.PP.ModalWait.preventDoubleClick();var c=window.onbeforeunload;window.beforeunloadRun=!1;window.onbeforeunload=function(){window.beforeunloadRun=!0;if(c)return c()};setTimeout(function(){window.beforeunloadRun||(console.warn("PP click preventor was run but did not reload the page. Something wrong?"),top.PP.ModalWait.remove(),window.onbeforeunload=c)},250)}}))});
showErrorMessages=function(){var a=$("error-messages");a?(a.removeClassName("hide"),scrollToElementTopIfNotVisible("error-messages")):console.log("Attempt to show non-existing error messages.")};showConfirmMessages=function(a){var b=$("confirm-message");b?(b.removeClassName("hide"),scrollToElementTopIfNotVisible("confirm-message",a)):console.log("Attempt to show non-existing confirm messages.")};
showWarningMessages=function(a){var b=$("warning-message");b?(b.removeClassName("hide"),scrollToElementTopIfNotVisible("warning-message",a)):console.log("Attempt to show non-existing warning messages.")};scrollToElementTopIfNotVisible=function(a,b){var c=document.viewport.getScrollOffsets().top,d=document.viewport.getHeight(),e=$(a).cumulativeOffset().top;if(e<c&&(!b||c-e<b)||e+30>c+d)Effect&&"function"===typeof Effect.ScrollTo?Effect.ScrollTo(a,{duration:"0.2",offset:-8}):$(a).scrollTo()};
removeModalWait=function(){PP.ModalWait&&PP.ModalWait.remove()};resetErrorMessages=function(){var a=$("error-messages-list");a&&a.update("");$$(".error").each(function(a){a.removeClassName("error")});(a=$("error-messages"))&&!a.hasClassName("hide")&&a.addClassName("hide")};resetConfirmMessages=function(){var a=$("confirm-message-list");a&&a.update("");(a=$("confirm-message"))&&!a.hasClassName("hide")&&a.addClassName("hide")};
resetWarningMessages=function(){var a=$("warning-message-list");a&&a.update("");(a=$("warning-message"))&&!a.hasClassName("hide")&&a.addClassName("hide")};addErrorMessage=function(a){var b=$("error-messages-list");b&&b.insert((new Element("li")).update(a))};addConfirmMessage=function(a){var b=$("confirm-message-list");b&&b.insert((new Element("li")).update(a))};addWarningMessage=function(a){var b=$("warning-message-list");b&&b.insert((new Element("li")).update(a))};
markFieldError=function(a){var b=$("label-"+a);b&&b.addClassName("error");(a=$(a))&&a.addClassName("error")};debugException=function(a){alert("Exception in '"+a.fileName+"', line: "+a.lineNumber+", type: "+a.name+", message: "+a.message)};
EC_doExpandCollaps=function(a,b,c){var d=$(a),e=$(a+"-img");d.hasClassName("hide")||!d.visible()?(d.removeClassName("hide"),d.addClassName("show"),e.src=c):(d.removeClassName("show"),d.addClassName("hide"),e.src=b);"function"==typeof doExpandCollapseHook&&doExpandCollapseHook(a,d.hasClassName("show"))};EC_doExpand=function(a,b){var c=$(a);if(c.hasClassName("hide")||!c.visible()){var d=$(a+"-img");c.removeClassName("hide");c.addClassName("show");d.src=b}};
function setFrameLocation(a,b){var c=$(a);(c.contentWindow.document?c.contentWindow.document:c.contentDocument).location.replace(b)}var uid=function(){var a=0;return function(){return a++}}();
PP.resourcebank.getResource=function(a,b,c){b?parent&&parent!=self&&parent.PP&&parent.PP.resourcebank?parent.PP.resourcebank.getResource(a,b,c):(PP.resourcebank._current={callbackFunction:b,onItemSelected:a.onItemSelected,runCallbackFunctionOnDialogClose:!0},a.extraControls&&(PP.resourcebank._current.extraControls=a.extraControls,a.extraControls="true"),a=Object.extend({selectMultiple:!1,allowReferences:!0,allowSetNewCategoryName:!1},a),top.courseId&&(a.courseId=top.courseId),b={url:"/resourceBank.do",
params:a,closeCallback:function(){PP.resourcebank._current.runCallbackFunctionOnDialogClose&&PP.resourcebank._current.callbackFunction(null);window.RESOURCE_BANK_ACTION=null;delete PP.resourcebank._current}},c&&(a.resourceBankLightweight=!0,b.dimensions="fullscreen"),PP.util.Dialog.open(b)):alert("Illegal callback function!")};function setButtonDisabled(a,b){setControlDisabled(a,b)}function setControlDisabled(a,b){if(a=$(a))(a.disabled=b)?a.addClassName("disabled"):a.removeClassName("disabled")}
function iframeSharesOriginWithParent(a){try{return a&&window.location.host===a.contentWindow.location.host&&window.location.protocol===a.contentWindow.location.protocol}catch(b){return!1}}var resizedIframes={},oldFrameSize={};
PP.util.resizeFrame=function(a){var b=$(a).identify(),c=null,d=function(){try{PP.util._resizeFrame(b)}catch(a){delete resizedIframes[b],c&&clearInterval(c)}};delete oldFrameSize[b];d();Prototype.Browser.Gecko?a!==resizedIframes[b]&&(a.contentWindow.addEventListener("overflow",d,!1),a.contentWindow.addEventListener("resize",d,!1)):resizedIframes[b]||(c=setInterval(d,750));resizedIframes[b]=a};
PP.util.loadMathjax=function(a){a||(a=document);a.__mathjaxLoaded?window.MathJax&&window.MathJax.Hub.Queue(["Typeset",MathJax.Hub,a.body]):(a.__mathjaxLoaded=!0,a.body.appendChild((new Element("script",{type:"text/x-mathjax-config"})).update('MathJax.Hub.Config({ displayAlign:"left", messageStyle:"none" })')),a.body.appendChild(new Element("script",{src:"/pp/core/js/mathjax/MathJax.js?config=default"})))};
function getIframeContentHeight(a){return-1!=navigator.userAgent.indexOf("MSIE")&&a.contentWindow.document.body?a.contentWindow.document.body.scrollHeight:a.contentDocument.body?a.contentDocument.body.clientHeight<a.clientHeight?a.contentDocument.body.clientHeight:a.contentDocument.body.scrollHeight:null}
PP.util._resizeFrame=function(a){var b=$(a);if(!b)throw delete oldFrameSize[a],"Element is no longer there - removing to prevent memory leak";if(!iframeSharesOriginWithParent(b))throw delete oldFrameSize[a],"Iframe no longer share origin with parent";var c=getIframeContentHeight(b);if(c&&oldFrameSize[a]!=c){var d=document.viewport.getHeight()-(b.cumulativeOffset().top-66),e=Math.max(400,d,c+66);d<getIframeContentHeight(b)?(b.style.height=Math.max(400,d,c+66)+"px",oldFrameSize[a]=getIframeContentHeight(b)):
(b.style.height=e+"px",oldFrameSize[a]=e)}};PP.util.firstFormAncestor=function(a){return PP.util.firstAncestorOfType(a,"form")};PP.util.firstAncestorOfType=function(a,b){if(a=$(a))return a.up(b||"")};PP.util.firstAncestorOfClass=function(a,b){if(a=$(a))return a.up(b?"."+b:"")};PP.util.firstDescendantOfClass=function(a,b){if(a=$(a))return a.down(b?"."+b:"")};PP.util.constrainValue=function(a,b,c){var d=a;a>c?d=c:a<b&&(d=b);return d};
PP.util.parseIntHandleNaN=function(a){a=parseInt(a);return isNaN(a)?0:a};PP.util.includeScript=function(a){0===$$('script[src="'+a+'"]').length&&$(documeny.body).insert(new Element("script",{src:a,type:"text/javascript"}))};PP.util.onAvailable=function(a,b){var c=$(a);if(c)b(c);else var d=0,e=setInterval(function(){d++;var c=$(a);c?(b(c),clearInterval(e)):1E3<=d&&clearInterval(e)},10)};
var onCondition=function(){function a(a,b,f,h){h=h[a];f[a]=typeof h==b?h:c[a]}function b(b,c){c||(c={});this.condition=b;a("timeout","number",this,c);a("interval","number",this,c);a("onAbort","function",this,c);a("onTimeout","function",this,c)}var c={timeout:2E3,interval:100,onAbort:function(){},onTimeout:function(){}};b.prototype={constructor:b,execute:function(a){var b=this;if("undefined"==typeof b.t0)return b.t0=+new Date,b.action=a,b._timer=setInterval(function(){if(!b._checking){b._checking=
!0;var a=!1;b.aborted?(b.onAbort(),a=!0):+new Date-b.t0>b.timeout?(b.onTimeout(),a=!0):b.condition()&&(b.action(),a=!0);b._checking=!1;a&&clearInterval(b._timer)}},b.interval),b},abort:function(){this.aborted=!0}};return function(a,c){return new b(a,c)}}();PP.listen=function(a,b,c,d){"addEventListener"in a?PP.listen=function(a,b,c,d){return a.addEventListener(b,c,d)}:"attachEvent"in a&&(PP.listen=function(a,b,c,d){a.attachEvent("on"+b,c)});PP.listen(a,b,c,d)};
PP.unlisten=function(a,b,c,d){"removeEventListener"in a?PP.unlisten=function(a,b,c,d){return a.removeEventListener(b,c,d)}:"detachEvent"in a&&(PP.unlisten=function(a,b,c,d){a.detachEvent("on"+b,c)});PP.unlisten(a,b,c,d)};
PP.featuresCheck=function(){function a(a){if(a=a.firstElementChild)return a;for(;a&&1!=a.nodeType;)a=a.nextSibling;return a}var b=this.document,c={},d=!1,e={focusin:function(){c.focusin=function(){function c(){d=!0}var d=!1,e=b.createElement("a"),l=a(b.body);e.href="#";l?b.body.insertBefore(e,l):b.body.appendChild(e);PP.listen(e,"focusin",c,!1);e.focus();PP.unlisten(e,"focusin",c,!1);e.parentNode.removeChild(e);return d}()}};return{hasFeature:function(a){if(!d&&!d){for(var b in e)e[b]();d=!0}return c[a]}}}();
PP.util.update=function(a,b,c){$(a).innerHTML='<div style="width: 100%; text-align: center;"><img src="/pp/lookAndFeel/standard/icons/wait_small.gif" /></div>';new Ajax.Updater(a,b,c)};PP.util.getModBeanMessage=function(a){for(var b=a,c=1,d=arguments.length;c<d;++c)b=b.replace("arg"+(c-1),arguments[c]);return b};var setElemAttributes=function(a,b){(a=$(a))&&b&&$H(b).each(function(b){a[b.key]=b.value})};PP.util.logException=function(a,b){PP.util.logMessage(b+". Exception: "+Object.toJSON(a))};
PP.util.logMessage=function(a){new Ajax.Request("/log.do",{asynchronous:!1,parameters:{message:a}})};PP.util.debugHttpRequest=function(a){var b="transport, state=";try{b+=a.status}catch(c){b+=c.message}try{b+=", headers="+a.getAllResponseHeaders()}catch(d){}return b};function setCookie(a,b,c,d,e,f){document.cookie=a+"="+escape(b)+(c?"; expires="+c.toGMTString():"")+(d?"; path="+d:"")+(e?"; domain="+e:"")+(f?"; secure":"")}
function getCookie(a){var b=document.cookie;a+="=";var c=b.indexOf("; "+a);if(-1==c){if(c=b.indexOf(a),0!=c)return null}else c+=2;var d=document.cookie.indexOf(";",c);-1==d&&(d=b.length);return unescape(b.substring(c+a.length,d))}function deleteCookie(a,b,c){getCookie(a)&&(document.cookie=a+"="+(b?"; path="+b:"")+(c?"; domain="+c:"")+"; expires=Thu, 01-Jan-70 00:00:01 GMT")}
PP.Flapify=Class.create({initialize:function(a,b,c){if(!($$(b).length<a)){var d=1,e=0,f=null,h=[];$$(b).eachSlice(a).each(function(a){e+=a.length;var b="flapify-flap-"+d+"-"+e,g="flapify-flap-content-"+d+"-"+e;null==f&&(f=g);b=new Element("div",{"class":"flapify-flap",id:b});b.update((1!=d?"|":"")+"&nbsp;<a href='#' onclick=\"PP.Flapify._flapifySwitch('"+g+"'); return false\">"+d+"-"+e+"</a>&nbsp;");$(c).insert({bottom:b});var m=new Element("div",{"class":"flapify-flap-content",id:g});h.push(m);a.each(function(a){$(m).insert({bottom:a})});
d+=a.length});a=new Element("div",{"class":"clearfix"});$(c).insert({bottom:a});h.each(function(a){$(c).insert({bottom:a})});PP.Flapify._flapifySwitch(f)}}});PP.Flapify._flapifySwitch=function(a){$$(".flapify-flap-content").each(function(a){a.hide()});$(a).show()};
var ISODateFormat=function(){function a(a){"undefined"==typeof a&&(a=d.date);this.type=a}function b(a,b){var c=""+a;return Array(1+b-c.length).join("0")+c}var c=/^\s*(\d{4})-([01]\d)-([0123]\d)[T ]?(?:(\d{2}):(\d{2})(?::(\d{2}))?)?\s*$/;a.prototype={constructor:a,parse:function(a){var b=null;a=c.exec(a);var h,k,l,g=0,m=0,n=0;if(a){h=~~a[1];k=~~a[2];l=~~a[3];if(a[4]){if(this.type!=d.dateTime)return null;g=~~a[4];m=~~a[5];a[6]&&(n=~~a[6])}else if(this.type!=d.date)return null;b=new Date(h,k-1,l,g,m,
n);b.getFullYear()!==h||b.getMonth()!==k-1||b.getDate()!==l?b=null:this.type==d.dateTime&&(b.getHours()!==g||b.getMinutes()!==m)&&(b=null)}return b},format:function(a){var c;return c=[b(a.getFullYear(),4),b(a.getMonth()+1,2),b(a.getDate(),2)].join("-"),this.type===d.dateTime&&(c+=" "+[b(a.getHours(),2),b(a.getMinutes(),2)].join(":")),c}};var d={date:"date",dateTime:"dateTime"};return{date:"date",dateTime:"dateTime",create:function(b){return new a(b)}}}(),parseISODateTime=function(a){return(a=a.match(/(\d+)/g))&&
5<=a.length?new Date(a[0],a[1]-1,a[2],a[3],a[4],a[5]||0,0):null},getAsISODate=function(a){var b=a.getFullYear(),b=b+("-"+(a.getMonth()+1).toPaddedString(2));return b+="-"+a.getDate().toPaddedString(2)},getAsISODateTime=function(a){var b=a.getFullYear(),b=b+("-"+(a.getMonth()+1).toPaddedString(2)),b=b+("-"+a.getDate().toPaddedString(2)),b=b+(" "+a.getHours().toPaddedString(2));return b+=":"+a.getMinutes().toPaddedString(2)},srcExtractor=function(a){function b(a){this.srces="[object Array]"=={}.toString.call(a)?
a:[];this.srcCount=this.srces.length;this.callback=null}function c(a){a.loadedCount===a.needLoad&&a.callback&&a.callback.call(null,a)}var d=a.document,e={};b.prototype.loadAll=function(a){var b=this;b.loadedCount=0;"function"==typeof a&&(b.callback=a);b.needLoad=b.srcCount;for(var f=0,g;f<b.srcCount;++f)a=d.createElement("script"),a.type="text/javascript",g=b.srces[f],e[g]?(b.needLoad-=1,c(b)):(a.src=g,a.onload=function(a,d){return function(){e[a]=!0;++b.loadedCount;c(b)}}(g,f),d.body.appendChild(a));
0==b.srcCount&&b.callback&&b.callback.call(null,b)};b.prototype.list=function(){return this.srces};var f=/<script.*?src=['"]?([^>"']+)['"]?[^>]+><\/script>/g;return{from:function(a){a="string"==typeof a?a:"";for(var c,d=[];c=f.exec(a);)d.push(c[1]);return new b(d)}}}(this),createChosen=function(){function a(){return"function"==typeof Chosen&&Event&&"function"==typeof Event.simulate}function b(b){var c,l,g,m={count:0,wanted:0,handleEvent:function(){++m.count==m.wanted&&m.onLoaded()},onLoaded:function(){a()?
b():onCondition(a,{timeout:5E3,interval:100}).execute(b)}};for(l in d)m.wanted+=d[l].length;for(l in d){c=d[l];for(var n=0,r=c.length;n<r;++n)"js"==l?(g=e.createElement("script"),g.type="text/javascript",g.src=c[n],g.onload=g.onreadystatechange=function(){this.onreadystatechange=this.onload=null;m.handleEvent()}):"css"==l&&(g=e.createElement("link"),g.rel="stylesheet",g.type="text/css",g.href=c[n],g.onload=m.handleEvent),(f||e.body).appendChild(g)}}function c(a,b){(a=$(a))&&!a.hasClassName("chzn-done")&&
(a.up("p")&&alert("Developer alert, IE compatibility issue:\nChosen select inside P tag detected!"),new Chosen(a,b))}var d={js:["/pp/core/js/chosen.proto.js","/pp/core/js/event.simulate.js"],css:["/pp/lookAndFeel/standard/css/chosen.css"]},e=this.document,f=e.getElementsByTagName("head")[0];return function(d,e){a()?(createChosen=c,createChosen(d,e)):b(function(){createChosen=c;createChosen(d,e)})}}();
PP.util.showGroupSelectionPopup=function(a){PP.util._groupSelectionCallback=a.callback;var b="/selectionListDialog.do?role="+a.role+"&groupsSelectable="+(!1===a.groupsSelectable?!1:!0)+"&groupType="+a.groupType+"&leafsSelectable="+!!a.leafsSelectable;if(a.selectedGroupIds)for(var c=0;c<a.selectedGroupIds.length;c++)b+="&selectedGroupIds="+a.selectedGroupIds[c];if(a.selectedLeafIds)for(c=0;c<a.selectedLeafIds.length;c++)b+="&selectedLeafIds="+a.selectedLeafIds[c];a.headingKey&&(b+="&headingKey="+a.headingKey);
a.headerPath&&(b+="&headerPath="+a.headerPath);if(a.headerParams)for(var d in a.headerParams)b+="&headerParam_"+d+"="+a.headerParams[d];a.maxObjects&&(b+="&maxObjects="+a.maxObjects);a.maxSelectedObjects&&(b+="&maxSelectedObjects="+a.maxSelectedObjects);PP.util.Dialog.open({url:b,closeCallback:a.closeCallback,fullscreen:!0})};PP.util._closeGroupSelectionPopup=function(a,b){var c=b?b.serialize(!0):null;PP.util._groupSelectionCallback(a,c);PP.util.Dialog.close()};
var openPopupFromClickableContainer=function(){return function(a,b){if(a=$(a)){b&&"object"==typeof b||(b={});var c="string"==typeof b.popupOptions?b.popupOptions:"height=600,width=700,resizable,scrollbars",d="string"==typeof b.popupName?b.popupName:null,e=a.down("string"==typeof b.selector?b.selector:"a");return e&&(e=e.href,null===d&&(d=e.replace(/[^a-z]/ig,"_")),c=window.open(e,d,c))?(c.focus(),!0):!1}}}(),Dict=function(){function a(){this._store={}}var b={}.hasOwnProperty,c={}.toString,d="[object Function]"==
c.call(Object.keys)?Object.keys:function(a){var c=[],d;for(d in a)b.call(a,d)&&c.push(d);return c};a.prototype={constructor:a,get:function(a){return this._store[a]},has:function(a){return a in this._store},set:function(a,b){this._store[a]=b;return this},putAll:function(a){for(var c in a)b.call(a,c)&&this.set(c,a[c]);return this},remove:function(a){delete this._store[a];return this},clearAll:function(){this._store={};return this},getKeys:function(a){return d(this._store).sort(a)}};return{create:function(b){var d=
new a;"[object Object]"==c.call(b)&&d.putAll(b);return d}}}();function openPageHelp(a){a.match("^_planner.")?a="_planner.start":a.match("^_schema")?a="_tools.schema":a.match("^_iup.admin")?a="_iup.admin":a.match("^_iup.")?a="_iup.personal.info":a.match("^_core.invitations.admin")?a="_core.invitations.admin":a.match("^_core.invitations.person")?a="_core.invitations.admin":a.match("^_calendarResource")?a="_calendarResource.overview":a.match("^_cheatcheckAccount")?a="_cheatcheckAccount.overview":a.match("^_core.course.")?a="_core.course.mycourses":a.match("^_tools.executive.approval")?
a="_tools.executive.approval":a.match("^calendar")?a="_tools.calendar":a.match("^_actionprogram")?a=a.match("^_actionprogram.admin")?"_actionprogram.admin":a.match("^_actionprogram.mentor")?"_actionprogram.mentor":a.match("^_actionprogram.teacher")?"_actionprogram.teacher":a.match("^_actionprogram.student")?"_actionprogram.student":a.match("^_actionprogram.parent")?"_actionprogram.parent":a.match("^_actionprogram.headmaster")?"_actionprogram.headmaster":"_actionprogram":a.match("^_tools.parentRegistrations")&&
(a="_tools.parentRegistrations");a=helpPageUrl+a;if(window.getState){var b=getState().page;if($("editContentNewFormMarker"))a+="&contentEditorPageId=Laggtill";else if("new"==b)a+="&contentEditorPageId=Laggtill";else if("publish"==b)a+="&contentEditorPageId=Publicering";else if("trashcan"==b)a+="&contentEditorPageId=Papperskorg";else if("usedFiles"==b)a+="&contentEditorPageId=filer";else if("questionBankTest"==b)a+="&contentEditorPageId=Fragebank";else if("questionBankPoll"==b)a+="&contentEditorPageId=enkatfragor";
else if("theme_settings"==b)a+="&contentEditorPageId=Utseende";else if("properties"==b||"visibility"==b||"revisions"==b||"testSettings"==b||"groupReportSubmission"==b||"htmlFiles"==b||"preview"==b||"default"==b)if(top.currentResourceType)switch(top.currentResourceType){case 79:a+="&contentEditorPageId=Sida";break;case 65:a+="&contentEditorPageId=Lank";break;case 81:a+="&contentEditorPageId=Inlamningsuppgift";break;case 67:switch(top.currentTestType){case 0:a+="&contentEditorPageId=Test";break;case 1:a=
top.currentPollTreatAnonymous?a+"&contentEditorPageId=Enkat":a+"&contentEditorPageId=Formular"}}else a+="&contentEditorPageId=Mapp";else"edit"==b&&(a=65==top.currentResourceType?a+"&contentEditorPageId=Lank":a+"&contentEditorPageId=Textredigeraren")}a=window.open(a,"PPHelp","width=650,height=550,scrollbars,toolbar,resizable,left=0,top=0");focusOrComplain(a)}
function startAdmin(a){var b="/pp/system/at/frameset.jsp";a&&(b+="?shortcut=course_assign&course_id="+a);"undefined"==typeof atWidth&&(atWidth=1E3);"undefined"==typeof atHeight&&(atHeight=800);a=window.open(b,"PPAdmin","width="+atWidth+",height="+atHeight+",status=yes,resizable");"undefined"!=typeof focusOrComplain?focusOrComplain(a):a&&a.focus()}function startSkill(){var a=window.open("/servlets/KM?frame=Frameset","PPSkill","width=784,height=550,status=yes,left=0,top=0");focusOrComplain(a)}
function openCalendar(a,b,c){var d=calendarUrl;a?(d+="?iso_date="+a,d=c?d+("&view="+c):d+"&view=day"):(d+="?mode=start",c&&(d+="&view="+c));courseId&&!b&&(d+="&course_id="+courseId);a=window.open(d,"ppcalendar","scrollbars,resizable,width=900,height=650");focusOrComplain(a)}function openCalendarTodos(a,b){var c=window.open("/pp/system/calendar/cal_todos.jsp?order_by="+a+"&asc="+b,"ppcalendar","scrollbars,resizable,width=900,height=650");focusOrComplain(c)}
function openNotepad(){var a="/pp/system/notepad/notepad.jsp";courseId&&(a+="?course_id="+courseId);a=window.open(a,"ppnotepad","scrollbars,resizable,width=570,height=550");focusOrComplain(a)}function openGuide(){"sv"!=lang&&"en"!=lang&&(lang="en");var a=window.open("/pp/system/guide/"+lang+"/?v="+ppVersion,"ppguide","width=800,height=600");focusOrComplain(a)}
function startChat(a,b,c){var d="/courseId/"+a;c&&(d+="/projectGroup/"+c);d+="/chatRoom.do";b&&(d+="?channelId="+b);a=window.open(d,"PPChat"+a,"width=880,height=550,status=no,resizable,left=0,top=0");focusOrComplain(a)}function doProgress(a){doProgressWithSectorInfo(a,"")}function doProgressWithSectorInfo(a,b){var c=window.open("/servlets/Init/"+a+"/AZ?zone=progress"+b,"PPProgress","width=1024,height=700,status,resizable");focusOrComplain(c)};PP&&"object"==typeof PP||(PP={});PP.util=PP.util||{};PP.util.Dialog=Class.create({});
Object.extend(PP.util.Dialog,{_PPDdefaultDimensions:{width:null,height:"auto"},_PPDdimensions:{},_PPDoverlayID:"PPDoverlay",_PPDcontainerID:"PPDcontainer",_PPDcontentID:"PPDcontent",_PPDcontentBodyID:"PPDcontentBody",_PPDcloseIconID:"PPDcloseIcon",_PPDajaxWaitClassName:"PPDajaxWait",_PPDindicateUpdateClassName:"PEindicateUpdate",_PPDBackLink:"PPDBackLink",_currentOptions:null,_previousOptions:[],_escapeListener:function(a){a.keyCode==Event.KEY_ESC&&(PP.util.Dialog.close(),a.stop())},openMulti:function(a){var b=
a.multi||[],c=b&&b.length?a.currIdx||0:-1;0>c||(delete a.multi,delete a.currIdx,PP.util.Dialog._multi={currIdx:c,maxIdx:b.length-1,items:b,options:a},PP.util.Dialog._multiNav.showIdx(c))},open:function(a){PP.util.Dialog.isOpen()?(PP.util.Dialog._multi||PP.util.Dialog._navigatingBack||PP.util.Dialog._previousOptions.push(PP.util.Dialog._currentOptions),PP.util.Dialog.close()):PP.util.Dialog._previousOptions=[];var b=/^\s*(en|sv|de)\s*$/,c=a.lang||"";b.test(c)||(c=document.getElementsByTagName("html")[0].getAttribute("lang"),
b.test(c)||(c="en"));a.lang=c;PP.util.Dialog._navigatingBack=!1;PP.util.Dialog._currentOptions=a;PP.util.Dialog._isOpen=!0;PP.util.Dialog._create(a);PP.editor&&PP.editor.handleEditorControls(!1);PP.util.Dialog._loadContent();a=$("main-body-tag");null!=a&&a.addClassName("no-scroll");Event.observe(window,"resize",PP.util.Dialog._verticalPositionOnScreen)},_isOpen:!1,isOpen:function(){return PP.util.Dialog._isOpen},close:function(){$$("body > .no-print").each(function(a){a.hasClassName("ppdialog-keep-no-print")?
a.removeClassName("ppdialog-keep-no-print"):a.removeClassName("no-print")});PP.util.Dialog._isOpen=!1;PP.util.Dialog._currentOptions.preventClosing||($(document).stopObserving("keydown",PP.util.Dialog._escapeListener),PP.util.Dialog._closeIcon.stopObserving("click",PP.util.Dialog._closeListener));$$(".multi-nav").invoke("remove");delete PP.util.Dialog._multi;Element.remove(PP.util.Dialog._PPDcontent);Element.remove(PP.util.Dialog._PPDoverlay);PP.editor&&PP.editor.handleEditorControls(!0);PP.util.Dialog._currentOptions.closeCallback&&
PP.util.Dialog._currentOptions.closeCallback();var a=$("main-body-tag");null!=a&&a.removeClassName("no-scroll")},indicateUpdate:function(a){a?Element.addClassName(PP.util.Dialog._PPDcontentBody,PP.util.Dialog._PPDindicateUpdateClassName):Element.removeClassName(PP.util.Dialog._PPDcontentBody,PP.util.Dialog._PPDindicateUpdateClassName)},_setAjaxWait:function(a){a?Element.addClassName(PP.util.Dialog._PPDcontent,PP.util.Dialog._PPDajaxWaitClassName):Element.removeClassName(PP.util.Dialog._PPDcontent,
PP.util.Dialog._PPDajaxWaitClassName)},_getBody:function(){if(!PP.util.Dialog._PPDcontentBodyID)throw"No content body id set";return $(PP.util.Dialog._PPDcontentBodyID)},getWidth:function(){return PP.util.Dialog._PPDdimensions.width},getHeight:function(){return PP.util.Dialog._PPDdimensions.height},_create:function(a){var b=new Element("div",{id:PP.util.Dialog._PPDcontentBodyID,className:"dialog-body"});if(a&&"fullscreen"===a.dimensions)PP.util.Dialog._PPDdimensions={width:document.viewport.getDimensions().width-
20+"px"};else{PP.util.Dialog._PPDdimensions=a&&a.dimensions?a.dimensions:{};var c=parseInt(PP.util.Dialog._PPDdimensions.width);if(c){document.body.appendChild(b);var d=Element.getLayout(b);PP.util.Dialog._PPDdimensions._widthAdjusted||(c+=parseInt(d.get("padding-left"))+parseInt(d.get("padding-right")),PP.util.Dialog._PPDdimensions._widthAdjusted=!0);PP.util.Dialog._PPDdimensions.width=c+"px"}for(var e in PP.util.Dialog._PPDdefaultDimensions)e in PP.util.Dialog._PPDdimensions||(PP.util.Dialog._PPDdimensions[e]=
PP.util.Dialog._PPDdefaultDimensions[e])}d=a.lang;c=$(document.body);Element.getDimensions(c);var f=new Element("div",{id:PP.util.Dialog._PPDoverlayID});Element.insert(c,{top:f});$$("body > .no-print").invoke("addClassName","ppdialog-keep-no-print");c.childElements().invoke("addClassName","no-print");e="";PP.util.Dialog._multi&&(e=" multi");var h="string"==typeof a.styleClass?" "+a.styleClass:"";document.viewport.getScrollOffsets();var k=new Element("div",{id:PP.util.Dialog._PPDcontentID,className:"dialog"+
h+e});e=PP.util.Dialog.getWidth();Element.setStyle(k,{width:e,maxWidth:e,minWidth:e});e=PP.util.Dialog.getHeight();null===e&&(e="300px");"undefined"==typeof e||Element.setStyle(k,{height:e});if(!a.preventClosing){$(document).observe("keydown",PP.util.Dialog._escapeListener);f.on("click",function(a){a.target===f&&PP.util.Dialog.close()});a={id:PP.util.Dialog._PPDcloseIconID,className:"dialog-close"};if(d={sv:"Stäng",en:"Close",de:"Schliessen"}[d]||null)a.title=d;a=new Element("div",a);Element.insert(k,
{bottom:a});PP.util.Dialog._closeIcon=a;PP.util.Dialog._closeListener=PP.util.Dialog._closeIcon.observe("click",PP.util.Dialog.close)}Element.insert(c,{top:k});0<PP.util.Dialog._previousOptions.length&&(a=(new Element("a",{id:PP.util.Dialog._PPDBackLink,className:"dialog-back"})).update("&lArr;"),a.on("click",function(){var a=PP.util.Dialog._previousOptions.pop();PP.util.Dialog._navigatingBack=!0;PP.util.Dialog.open(a)}),k.appendChild(a));Element.insert(k,{bottom:b});$("container")&&$("container").addClassName("no-print");
PP.util.Dialog._PPDoverlay=f;PP.util.Dialog._PPDcontent=k;PP.util.Dialog._PPDcontentBody=b;PP.util.Dialog._multi&&($$(".multi-nav").invoke("remove"),setTimeout(function(){var a=new Element.Layout(k),b=a.get("width"),a=a.get("height")/2+parseInt(k.style.top,10)-24+"px",c=new Element("div",{className:"multi-nav left","data-dir":"left"}),d=new Element("div",{className:"multi-nav right","data-dir":"right"});c.setStyle({top:a,left:"50%",marginLeft:-48-b/2+"px"});d.setStyle({top:a,right:"50%",marginRight:-48-
b/2+"px"});document.body.appendChild(c);document.body.appendChild(d)},20))},_loadContent:function(){if("html"in PP.util.Dialog._currentOptions)PP.util.Dialog._PPDcontentBody.update(PP.util.Dialog._currentOptions.html);else if("domElement"in PP.util.Dialog._currentOptions)PP.util.Dialog._PPDcontentBody.appendChild(PP.util.Dialog._currentOptions.domElement);else if("url"in PP.util.Dialog._currentOptions){PP.util.Dialog._loadContentFromAjax();return}null===PP.util.Dialog.getHeight()&&Element.setStyle(PP.util.Dialog._PPDcontent,
{height:"auto"});PP.util.Dialog._verticalPositionOnScreen()},_verticalPositionOnScreen:function(){var a=document.viewport.getDimensions().height,b=PP.util.Dialog._PPDcontent.getBoundingClientRect(),b=Math.floor(b.bottom-b.top);window!=c&&(a=window.innerHeight||b);if(b<a){var c=Math.floor(.6*(a-b)/2);PP.util.Dialog._PPDcontent.style.top=c+"px"}},_loadContentFromAjax:function(){var a=PP.util.Dialog._currentOptions.url,b=PP.util.Dialog._currentOptions.params||{};PP.util.Dialog._setAjaxWait(!0);new Ajax.Updater(PP.util.Dialog._PPDcontentBody.identify(),
a,{parameters:b,onComplete:PP.util.Dialog._onComplete,evalScripts:!0})},_onComplete:function(a){null===PP.util.Dialog.getHeight()&&Element.setStyle(PP.util.Dialog._PPDcontent,{height:"auto"});-1==a.request.url.indexOf("/selectionListDialog.do")&&PP.util.Dialog._verticalPositionOnScreen();PP.util.Dialog._setAjaxWait(!1);if("function"===typeof PP.util.Dialog._currentOptions.onComplete)PP.util.Dialog._currentOptions.onComplete()},_multiNav:{dir:function(a){var b=PP.util.Dialog._multi;if(b&&!1!==PP.util.Dialog._multiNav.ok){var c=
b.currIdx;a=c+({left:-1,right:1}[a]||0);a=Math.min(Math.max(a,0),b.maxIdx);a!=c&&(PP.util.Dialog._multiNav.showIdx(a),PP.util.Dialog._multiNav.ok=!1,setTimeout(function(){PP.util.Dialog._multiNav.ok=!0},50))}},showIdx:function(a){var b=PP.util.Dialog._multi;b.currIdx=a;var c=b.items[a],d=b.options;delete d.params;delete d.dimensions;var e=["html","url","domElement"].filter(function(a){delete d[a];return"undefined"!=typeof c[a]})[0];d[e]=c[e];"undefined"==typeof c.params||(d.params=c.params);"undefined"==
typeof c.dimensions||(d.dimensions=c.dimensions);PP.util.Dialog.isOpen()&&(PP.util.Dialog.close(),PP.util.Dialog._multi=b);PP.util.Dialog.open(d);0==a&&PP.util.Dialog._PPDcontent.addClassName("disable-left");a==b.maxIdx&&PP.util.Dialog._PPDcontent.addClassName("disable-right")}}});$(document).on("keyup",function(a){PP.util.Dialog._multi&&PP.util.Dialog._multiNav.dir({37:"left",39:"right"}[a.keyCode])});$(document).on("click","div.multi-nav",function(a,b){PP.util.Dialog._multi&&PP.util.Dialog._multiNav.dir(b.getAttribute("data-dir"))});
PP.util.Confirm=function(){var a={en:{yes:"Yes",no:"No"},sv:{yes:"Ja",no:"Nej"},de:{yes:"Ja",no:"Nein"}},b=/^\s*(en|sv|de)\s*$/;return function(c){var d=c.lang||"";b.test(d)||(d=document.getElementsByTagName("html")[0].getAttribute("lang"),b.test(d)||(d="en"));var e=(c.heading?"<div class=confirm-dialog><h2 class=confirm-heading>#heading#</h2>  <p>#question#</p>  <form action=# onsubmit='PP.util.Dialog.close(); return false;'>    <input type=hidden name=result value=#null#>    <input type=submit name=no value=#no# onclick=this.form.elements.result.value=#false#>    <input type=submit name=yes value=#yes# onclick=this.form.elements.result.value=#true#>  </form></div>".replace(/#heading#/,
c.heading):"<div class=confirm-dialog><h2 class=confirm-heading>#heading#</h2>  <p>#question#</p>  <form action=# onsubmit='PP.util.Dialog.close(); return false;'>    <input type=hidden name=result value=#null#>    <input type=submit name=no value=#no# onclick=this.form.elements.result.value=#false#>    <input type=submit name=yes value=#yes# onclick=this.form.elements.result.value=#true#>  </form></div>".replace("<h2 class=confirm-heading>#heading#</h2>","")).replace(/#question#/,c.question).replace(/#yes#/,
a[d].yes).replace(/#no#/,a[d].no).replace(/#false#/g,"false").replace(/#true#/g,"true").replace(/#null#/g,"null");PP.util.Dialog.open({lang:d,html:e,dimensions:{width:"width"in c?c.width:"300px"},closeCallback:function(){var a=PP.util.Dialog._PPDcontent.down("form").elements.result.value;c.closeCallback("null"==a?null:"true"==a)}});PP.util.Dialog._PPDcontent.down("form").elements[c["default"]?"yes":"no"].focus()}}();
PP.util.CheckboxGroup=Class.create({initialize:function(a,b,c){this._masterBox=$(a);this._slaveBoxesSelector="input[type=checkbox]."+b;this._slaveBoxes=$$(this._slaveBoxesSelector);this._options={};for(prop in PP.util.CheckboxGroup._defaultOptions)this._options[prop]=c&&c[prop]?c[prop]:PP.util.CheckboxGroup._defaultOptions[prop];this.update()},update:function(){this._slaveBoxes=$$(this._slaveBoxesSelector);this._setUpClickHandlers()},_removeListeners:function(){this._masterBoxListener&&(this._masterBox.stopObserving("click"),
this._slaveBoxes.each(function(a,b){a.stopObserving("click")}))},_setUpClickHandlers:function(){this._removeListeners();this._masterBoxListener=this._masterBox.observe("click",this._handleMasterBoxClick.bind(this));var a=this;this._slaveBoxes.each(function(b){b.observe("click",a._handleSlaveBoxClick.bind(a))});var b=PP.util.CheckboxGroup.getNrOfCheckedBoxes(this._slaveBoxes),c=PP.util.CheckboxGroup.getNrOfCheckedBoxes(this._slaveBoxes);this._invokeCallback(b,b-c)},_handleMasterBoxClick:function(a){var b=
PP.util.CheckboxGroup.getNrOfCheckedBoxes(this._slaveBoxes),c=this;this._slaveBoxes.each(function(a){a.checked=c._masterBox.checked});var d=this._masterBox.checked?this._slaveBoxes.length:0;this._invokeCallback(d,d-b,a)},_handleSlaveBoxClick:function(a){var b=a.element(),c=PP.util.CheckboxGroup.getNrOfCheckedBoxes(this._slaveBoxes),d=c+(b.checked?-1:1);b.checked?c==this._slaveBoxes.length&&(this._masterBox.checked=!0):this._masterBox.checked&&(this._masterBox.checked=!1);this._invokeCallback(c,c-
d,a)},_invokeCallback:function(a,b,c){if(this._options.callback){var d=1>a;this._options.callback({delta:b,checked:a,unChecked:this._slaveBoxes.length-a,empty:d,full:!d&&a==this._slaveBoxes.length,iceBreaker:!d&&a==b},c)}}});
Object.extend(PP.util.CheckboxGroup,{getNrOfCheckedBoxes:function(a){return a.findAll(function(a){return a.checked}).length},_defaultOptions:{callback:function(a,b){PP.util.CheckboxGroup._defaultCallback(a,b)}},_defaultCallback:function(a,b){PP.util.CheckboxGroup._emptyFunction(a,b)},_emptyFunction:function(){},_report_debug:function(a,b){alert($H(a).inspect())}});
PP.util.FormStateChecker=Class.create({initialize:function(a,b){a=$(a);this._originalState=PP.util.FormStateChecker.formState(a);this._formSubmits=a.select("input[type=submit]");this._callback=b;this._setUpFormListeners(a);this._checkState(a)},_setUpFormListeners:function(a){var b=a.select(PP.util.FormStateChecker.CONTROLS_TO_LISTEN_FOR);that=this;b.each(function(b){"text"==b.type||"textarea"==b.type?b.observe("keyup",function(b){that._checkState(a)}):b.observe("change",function(b){that._checkState(a)})})},
_checkState:function(a){var b=this._isOriginalState(a);return this._callback?this._callback(a,b):this._defaultCallback(a,b)},_isOriginalState:function(a){return PP.util.FormStateChecker.formState(a)==this._originalState},_defaultCallback:function(a,b){this._enableOrDisableSubmitButtons(a,b)},_enableOrDisableSubmitButtons:function(a,b){this._formSubmits.each(function(a){setButtonDisabled(a,b)})}});
Object.extend(PP.util.FormStateChecker,{CONTROLS_TO_LISTEN_FOR:$A(["input[type!=submit][type!=password][type!=hidden][type!=file][type!=button]","textarea","select"]),formState:function(a){return $(a).serialize()}});
PP.debugArea=Class.create({initialize:function(a){this._element=$(a);if(!this._element)throw"PP.debugArea: didn't find area: "+a;},put:function(a){this._element.update(PP.debugArea.createDebugEntry(a))},append:function(a,b){b=b||PP.debugArea._defaultDelim;this._element.update(this.getContent()+b+PP.debugArea.createDebugEntry(a))},clear:function(){this._element.update()},getContent:function(){return this._element.innerHTML}});
Object.extend(PP.debugArea,{createDebugEntry:function(a){return'<span style="font-weight: bold;">'+PP.debugArea._timeStr(new Date)+"</span> - "+a},_timeStr:function(a){var b=a.getHours(),c=a.getMinutes();a=a.getSeconds();return"#{hours}:#{minutes}:#{seconds}".interpolate({hours:(10>b?"0":"")+b,minutes:(10>c?"0":"")+c,seconds:(10>a?"0":"")+a})},_defaultDelim:"<br />"});PP.guiHelpers||(PP.guiHelpers={});
PP.guiHelpers.simulateLabelClick=function(a){var b=$(a);if(b)b.click();else throw Error("PP.guiHelpers.simulateLabelClick() found no control with id '"+a+"'");};PP.guiHelpers.focusFirstElement=function(a){if(a=$(a))return Form.focusFirstElement(a)};PP.guiHelpers.redirectFocus=function(a,b,c){a=$(a);b=$(b);a&&b&&a.observe("click",function(d){if("radio"==a.type||"checkbox"===a.type&&"on"===$F(a))c&&c.effect?[b].invoke(c.effect):b.focus()})};
PP.util.FireBug=Object.extend({log:function(a){PP.util.FireBug._sendToConsole(a,"log")},warn:function(a){PP.util.FireBug._sendToConsole(a,"warn")},error:function(a){PP.util.FireBug._sendToConsole(a,"error")},_hasConsole:function(){return!!top.console},_sendToConsole:function(a,b){if(PP.util.FireBug._hasConsole())console[b](PP.util.FireBug._getLogTimeString()+" - "+a)},_getLogTimeString:function(a){a=a||new Date;var b=a.getHours(),c=a.getMinutes();a=a.getSeconds();return"#{hours}:#{minutes}:#{seconds}".interpolate({hours:(10>
b?"0":"")+b,minutes:(10>c?"0":"")+c,seconds:(10>a?"0":"")+a})}});PE={Ui:{}};
PE.Ui.Dp=Class.create({initialize:function(a,b){this.target=a;this._setOptions(b);this.elems={};this.observers={};this.options.initialDate&&("string"==typeof this.options.initialDate&&(this.options.initialDate=this._parseDate(this.options.initialDate)),this._setDate(this.options.initialDate),this._updateTarget(this.DATE));this._createWidget();this._setupListeners()},_setOptions:function(a){this.options=a},GET:function(a){switch(a){case PE.Ui.Dp.YEAR:return this.DATE.getFullYear();case PE.Ui.Dp.MONTH_IDX:return this.DATE.getMonth();
case PE.Ui.Dp.DAY_OF_MONTH:return this.DATE.getDate();case PE.Ui.Dp.WEEKDAY_IDX:return this.DATE.getDay();case PE.Ui.Dp.HOURS:return this.DATE.getHours();case PE.Ui.Dp.MINUTES:return this.DATE.getMinutes();case PE.Ui.Dp.DAYS_IN_MONTH:return PE.Ui.Dp.getDaysInMonth(this.DATE);case PE.Ui.Dp.WEEKDAY_IDX_OF_MONTH_START:return PE.Ui.Dp.weekdayIdxOfMonthStart(this.DATE);case PE.Ui.Dp.IS_LEAPYEAR:return PE.Ui.Dp.isLeapYear(this.DATE)}},_setDate:function(a){this.DATE=a||new Date},getPickerDate:function(){return this.DATE},
_updateTarget:function(a){a=this._getDateString(a);this._setTargetValue(a);this.options.validate&&this._validatorListener()},_getDateString:function(a){var b=(a.getMonth()+1).toPaddedString(2),c=a.getDate().toPaddedString(2),b="#{month}-#{day}".interpolate({month:b,day:c});this.options.useYear&&(b="#{year}-#{date}".interpolate({year:a.getFullYear(),date:b}));this.options.useTime&&(c=a.getHours().toPaddedString(2),a=a.getMinutes().toPaddedString(2),b="#{date} #{hour}:#{minute}".interpolate({date:b,
hour:c,minute:a}));return b},_setTargetValue:function(a){this.target.value=a},_createWidget:function(){this.elems.widget=new Element("span",{className:"PEDp"});this.elems.widget.setStyle({display:"none"});this._buildTable();this._populateTable()},_attachWidget:function(){this.target.insert({after:this.elems.widget});var a=new Element.Layout(this.target),b=a.get("left"),a=a.get("top")+this.target.getHeight();this.elems.widget.setStyle({height:"",width:"",top:a+"px",left:b+"px"});setTimeout(function(){var a=
this.elems.widget.getBoundingClientRect(),b=document.viewport.getDimensions(),e=Math.max(0,Math.floor(a.bottom-b.height));((a=Math.max(0,Math.floor(a.right-b.width)))||e)&&window.scrollBy(a,e)}.bind(this),0)},_setupListeners:function(){this.observers.target=this._targetListener.bind(this);this.target.observe("click",this.observers.target);this.target.observe("focus",this.observers.target);this.options.validate&&(this.observers.validator=this._validatorListener.bind(this),this.target.observe("change",
this.observers.validator));this.observers.table=this._handleTableClick.bind(this);this.elems.table.observe("click",this.observers.table);this.options.useTime&&(this.observers.time=this._handleSelectChange.bind(this),this.elems.time.observe("change",this.observers.time))},tearDownListeners:function(){this.target.stopObserving("click",this.observers.target);this.elems.table.stopObserving("click",this.observers.table);this.options.useTime&&this.elems.time.stopObserving("change",this.observers.time)},
_targetListener:function(a){var b=a.element();"readonly"!==b.readAttribute("readonly")&&"disabled"!==b.readAttribute("disabled")&&(a.stop(),this.elems.widget.visible()||(PE.Ui.Dp.hideOthers(this),this._setDate(this._parseDateFromTarget()),this._populateTable(),this._attachWidget(),this.elems.widget.show()))},_validatorListener:function(){var a=this.target.getValue(),b=this.options.useTime?/^(\d{4})-(\d{2})-(\d{2}) (\d{2}):(\d{2})$/:/^(\d{4})-(\d{2})-(\d{2})$/,c=!0;if(!a.blank()){var d=b.exec(a);if(d){var a=
parseInt(d[1],10),b=parseInt(d[2],10),d=parseInt(d[3],10),e=new Date(a,b-1,d);if(e.getFullYear()!=a||e.getMonth()+1!=b||e.getDate()!=d)c=!1;c&&this.options.useTime&&(c=parseInt(parts[3],10),a=parseInt(parts[4],10),c=0<=c&&23>=c&&0<=a&&59>=a)}else c=!1}this.target[(c?"remove":"add")+"ClassName"]("error")},_parseDate:function(a){var b=new Date,c="",d="";if(!a.blank()){b.setDate(1);a=a.split(/[\s:-]/);if(2<=a.length){var e="",f;2===a.length?(f=a[0].strip(),d=a[1].strip()):(e=a[0].strip(),f=a[1].strip(),
d=a[2].strip());e.match(/^[0-9]{4}$/)&&b.setFullYear(e);f.match(/^[0-9]{1,2}$/)&&1<=f&&12>=f&&b.setMonth(f-1);e=PE.Ui.Dp.getDaysInMonth(b);d.match(/^[0-9]{1,2}$/)&&0<d&&(d<=e?b.setDate(d):31>=d&&(this.elems.overflowDate.value=d,b.setDate(e)))}this.options.useTime&&4<a.length&&(d=a[3].strip(),d.match(/^[0-9]{1,2}$/)&&-1<d&&24>d&&b.setHours(d),c=a[4].strip())}!c.blank()&&c.match(/^[0-9]{1,2}$/)&&-1<c&&60>c||(c=b.getMinutes());a=this.options.minutesInterval;d=c%a;d>Math.floor(a/2)&&(d=-(a-d));b.setMinutes(c-
d);b.setSeconds(0);return b},_parseDateFromTarget:function(){return this._parseDate($F(this.target))},_setSelectedDate:function(a){this.elems.dates.invoke("removeClassName","selected");a.addClassName("selected");this.DATE.setDate(a.innerHTML)},_buildTable:function(){var a=new Element("table"),b=new Element("tbody");a.insert(b);var c,d,e,f=this.options.useWeekNr,h=f?"8":"7";this.options.useYear&&(c=new Element("tr",{className:"year"}),d=new Element("td",{colspan:h}),e=(new Element("span",{className:"subtractYear"})).update("&nbsp;&nbsp;&nbsp;"),
d.insert(e),e=new Element("span",{className:"year"}),e.update(""),d.insert(e),e=(new Element("span",{className:"addYear"})).update("&nbsp;&nbsp;&nbsp;"),d.insert(e),c.insert(d),b.insert(c));c=new Element("tr",{className:"month"});d=new Element("td",{className:"month",colspan:h});e=(new Element("span",{className:"subtractMonth"})).update("&nbsp;&nbsp;&nbsp;");d.insert(e);e=new Element("span",{className:"name"});e.update("");d.insert(e);e=(new Element("span",{className:"addMonth"})).update("&nbsp;&nbsp;&nbsp;");
d.insert(e);e=new Element("input",{className:"idx",type:"hidden",value:""});d.insert(e);e=new Element("input",{className:"overflowDate",type:"hidden",value:""});d.insert(e);c.insert(d);b.insert(c);c=new Element("tr",{className:"weekdayNames"});f&&(d=(new Element("td",{className:"weekNumberLabel"})).update(PE.Ui.Dp.texts.weekShort[this.options.lang]),c.insert(d));for(e=0;7>e;e+=1)d=(new Element("td")).update(PE.Ui.Dp.weekdayNames[this.options.lang][e]),c.insert(d);b.insert(c);for(e=0;6>e;e+=1){c=new Element("tr",
{className:"dates"});b.insert(c);f&&(d=new Element("td",{className:"week-nr"}),d.insert(new Element("div")),c.insert(d));for(var k=0;7>k;k+=1)d=new Element("td",{className:"date"}),c.insert(d)}if(this.options.useTime){c=new Element("tr",{className:"time"});b.insert(c);d=new Element("td",{colspan:h});f=(new Element("label")).update(PE.Ui.Dp.texts.time[this.options.lang]+":&nbsp;");d.insert(f);var l,f=new Element("select",{className:"hours"});for(l=0;24>l;l+=1)k=l.toPaddedString(2),e=new Element("option",
{value:k}),e.update(k),f.insert(e);d.insert(f);f=new Element("select",{className:"minutes"});for(l=0;60>l;l+=this.options.minutesInterval)k=l.toPaddedString(2),e=new Element("option",{value:k}),e.update(k),f.insert(e);d.insert(f);c.insert(d);c=new Element("tr",{className:"submit"});h=new Element("td",{colspan:h});h.insert(new Element("input",{type:"button",value:PE.Ui.Dp.buttons.done[this.options.lang],className:"selectAndClose"}));c.insert(h);b.insert(c)}this.elems.widget.insert(a);this.elems.table=
a;this.elems.year=a.down("tr.year td .year");this.elems.monthName=a.down("tr.month td .name");this.elems.monthIdx=a.down("tr.month td .idx");this.elems.dates=a.select("tr.dates td.date");this.elems.weeks=a.select("tr.dates td.week-nr div");this.elems.time=a.down(".time td");this.elems.hours=a.down(".hours");this.elems.minutes=a.down(".minutes");this.elems.overflowDate=a.down(".overflowDate");this.elems.submit=a.down(".selectAndClose")},_populateTable:function(){if(this.DATE){this.options.useYear&&
this.elems.year.update(this.GET(PE.Ui.Dp.YEAR));var a=this.GET(PE.Ui.Dp.MONTH_IDX);this.elems.monthName.update(PE.Ui.Dp.monthNames[this.options.lang][a]);this.elems.monthIdx.value=a;var b=this.GET(PE.Ui.Dp.WEEKDAY_IDX_OF_MONTH_START),c=this.GET(PE.Ui.Dp.DAYS_IN_MONTH),d=this.GET(PE.Ui.Dp.DAY_OF_MONTH),e=1,a=this.options.useWeekNr,f=0;this.elems.dates.each(function(a,h){e<=c&&++f;h+1>b&&e<=c?(a.update(e).removeClassName("empty"),e===d?a.addClassName("selected"):a.removeClassName("selected"),e+=1):
(a.update().addClassName("empty"),a.removeClassName("selected"))});if(a){var h=new Date(this.DATE.getFullYear(),this.DATE.getMonth(),1);this.elems.weeks.each(function(a,b){if(7*b>=f)a.update().hide();else{var c=PE.Ui.Dp.getWeekNr(h);a.update(c).show();h=new Date(h.getFullYear(),h.getMonth(),h.getDate()+7)}})}this.options.useTime&&(this.elems.hours.value=this.GET(PE.Ui.Dp.HOURS).toPaddedString(2),this.elems.minutes.value=this.GET(PE.Ui.Dp.MINUTES).toPaddedString(2))}},_handleSelectChange:function(a){a.stop();
a=a.element();var b=$F(a);a.hasClassName("hours")?this.DATE.setHours(b):a.hasClassName("minutes")&&this.DATE.setMinutes(b)},_handleTableClick:function(a){a.stop();var b=a.element();b.hasClassName("hours")||b.hasClassName("minutes")?this._handleSelectChange.bind(this,a)():b.hasClassName("date")&&!b.hasClassName("empty")?(this._setSelectedDate(b),this.options.useTime||this._updateTargetAndClose()):b.hasClassName("addYear")?this._alter(PE.Ui.Dp.YEAR,1):b.hasClassName("subtractYear")?this._alter(PE.Ui.Dp.YEAR,
-1):b.hasClassName("addMonth")?this._alter(PE.Ui.Dp.MONTH_IDX,1):b.hasClassName("subtractMonth")?this._alter(PE.Ui.Dp.MONTH_IDX,-1):b.hasClassName("selectAndClose")&&this._updateTargetAndClose()},_updateTargetAndClose:function(){this._updateTarget(this.DATE);this._close();if(this.options.onchange)if("function"==typeof this.options.onchange)this.options.onchange(this.DATE,this);else eval(this.options.onchange)},_close:function(){this.elems.widget.hide();this.target.fire("time:changed",{elementId:this.target.readAttribute("id"),
picker:this})},_alter:function(a,b){var c=$F(this.elems.overflowDate),d=this.GET(PE.Ui.Dp.YEAR),e=this.GET(PE.Ui.Dp.MONTH_IDX),f=this.GET(PE.Ui.Dp.DAY_OF_MONTH);if(a===PE.Ui.Dp.YEAR)d+=b;else if(a===PE.Ui.Dp.MONTH_IDX){var h=b%12,k=0;0<b?k=Math.floor(b/12):0>b&&(k=Math.ceil(b/12));e+=h;d+=k;h=PE.Ui.Dp.getDaysInMonth(new Date(d,e));c.blank()||(f=Math.min(c,h));f>h?(this.elems.overflowDate.value=f,f=h):this.elems.overflowDate.value=""}this._setDate(new Date(d,e,f,this.GET(PE.Ui.Dp.HOURS),this.GET(PE.Ui.Dp.MINUTES)));
this._populateTable()}});
Object.extend(PE.Ui.Dp,{_defaultOptions:{lang:"en",minutesInterval:5,useWeekNr:!1,useYear:!0},create:function(a,b){if(a=$(a)){b=b||{};b=PE.Ui.Dp._mergeDefaultOptions(b);var c=new PE.Ui.Dp(a,b);if(c)return PE.Ui.Dp.pickers.set(a.identify(),c),PE.Ui.Dp._setupDocumentListener(),c}},destroy:function(a){if(a=$(a)){a=a.identify();var b=PE.Ui.Dp.pickers.get(a);b&&(b.tearDownListeners(),b.elems.widget.remove(),PE.Ui.Dp.pickers.unset(a),0===PE.Ui.Dp.pickers.size()&&PE.Ui.Dp._tearDownDocumentListener())}},getPickerDate:function(a){var b=
a;Object.isElement(a)&&(b=a.readAttribute("id"));if(a=PE.Ui.Dp.pickers.get(b))return a.getPickerDate()},_mergeDefaultOptions:function(a){var b,c={};for(b in PE.Ui.Dp._defaultOptions)c[b]=PE.Ui.Dp._defaultOptions[b];for(b in a)c[b]=a[b];return c},hideOthers:function(a){PE.Ui.Dp.pickers.each(function(b){b.value!==a&&b.value.elems.widget.visible()&&b.value.elems.widget.hide()})},_setupDocumentListener:function(){null===PE.Ui.Dp.documentListener&&(PE.Ui.Dp.documentListener=PE.Ui.Dp.hideOthers.bind(null,
null),document.observe("click",PE.Ui.Dp.documentListener))},_tearDownDocumentListener:function(){null!==PE.Ui.Dp.documentListener&&(document.stopObserving("click",PE.Ui.Dp.documentListener),PE.Ui.Dp.documentListener=null)},pickers:$H(),documentListener:null,YEAR:1,MONTH_IDX:2,DAY_OF_MONTH:4,HOURS:8,MINUTES:16,WEEKDAY_IDX:32,WEEKDAY_IDX_OF_MONTH_START:64,IS_LEAPYEAR:128,weekdayNames:{sv:"M&aring;n Tis Ons Tor Fre L&ouml;r S&ouml;n".split(" "),en:"Mon Tue Wed Thu Fri Sat Sun".split(" ")},monthNames:{sv:"Jan Feb Mar Apr Maj Jun Jul Aug Sep Okt Nov Dec".split(" "),
en:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")},monthLengths:[31,28,31,30,31,30,31,31,30,31,30,31],buttons:{done:{sv:"Välj",en:"Select"}},texts:{time:{sv:"Tid",en:"Time"},weekShort:{sv:"v.",en:"w."}},getDaysInMonth:function(a){var b=a.getMonth(),c=PE.Ui.Dp.monthLengths[b];1===b&&PE.Ui.Dp.isLeapYear(a)&&(c+=1);return c},isLeapYear:function(a){a=a.getFullYear();return 0===a%4&&(0!==a%100||0===a%400)},weekdayIdxOfMonthStart:function(a){var b=a.getDate();a=a.getDay()-b%7;0>a&&(a+=7);
return a},getWeekNr:function(){function a(a){return new Date(a.getFullYear(),a.getMonth(),a.getDate()-((a.getDay()||7)-1))}function b(c){1>arguments.length&&(c=new Date);var d=c.getFullYear(),e=a(new Date(d,0,4)),f=a(c),e=Math.ceil((+f-e)/864E5)+1,e=Math.ceil(e/7);if(f=53==e){var f=c,h=f.getMonth();11!=h&&0!=h?f=!1:(f=new Date(f.getFullYear(),h,f.getDate()+(7-(f.getDay()||7))),f=3<f.getDate())}return f?1:0<e?e:b(new Date(d-1,11,31))}return b}()});
Ajax.Responders.register({onCreate:function(a){a.options.ppUseTimeout&&(a.ppTimeoutId=window.setTimeout(function(){if(4!=a.transport.readyState){PP.util.FireBug.log("core_ext.js:Ajax.Responders.registered timeout function: About to abort request");a.options.onSuccess=null;a.transport.abort();Ajax.activeRequestCount--;if(a.options.onFailure)a.options.onFailure(a.transport);if(a.options.onComplete)a.options.onComplete(a.transport)}},25E3))},onComplete:function(a){a.options.ppUseTimeout&&window.clearTimeout(a.ppTimeoutId)},
onException:function(a,b){(function(){throw b;}).defer()}});
PP.util.tooltip=Class.create({_pre_init:function(){this.dragObj=this.placeHolder=this.tooltip=this.target=null;this.keepActive=this.lazyLoaded=this.active=!1;this.content=null;this.options=Object.clone(PP.util.tooltip._defaultOptions.general);this.targetListeners=[];this.tooltipListeners=[]},initialize:function(a,b,c){this._pre_init();this.target=$(a);if(!this.target)return null;Object.extend(this.options,c);b.url&&"string"===typeof b.url?this._setAjaxContentOptions(b):(Object.isElement(b)&&(!0===
this.options.cloneElementContent&&(b=b.cloneNode(!0)),a=b.readAttribute("id"),null==a?b.identify():b.writeAttribute("id",a+"-tooltip"),b.setStyle({display:"block"})),this.content=b,c.ajaxLoad=null);this._setDraggableOptions();this.options.proxies=$A(this.options.proxies).map(function(a){return $(a)});this.options.indicator&&("string"!==typeof PP.util.tooltip._nillSrc?console&&console.error&&console.error("## Could not create tooltip indicator. Set path to a nill image in content attribute of css class ."+
PP.util.tooltip._classNames.indicatorIcon+". Target id was #"+this.target.identify()):(b=new Element("img",{className:PP.util.tooltip._classNames.indicatorIcon,src:PP.util.tooltip._nillSrc}),"before"===this.options.indicator?this.options.wrapped&&this.target.down()?this.target.down().insert({top:b}):this.target.insert({top:b}):"after"===this.options.indicator&&(this.options.wrapped&&this.target.down()?this.target.down().insert({bottom:b}):this.target.insert({bottom:b}))));!0===this.options.activateOnClick&&
(this.options.delayIn=0,this.target.addClassName(PP.util.tooltip._classNames.activateTooltipOnClick),this.options.proxies.each(function(a){a.addClassName(PP.util.tooltip._classNames.activateTooltipOnClick)}));this._createTooltip();this._createPlaceHolder();this._setupListeners();return this},_setDraggableOptions:function(){if(this.options.draggable){"boolean"===typeof this.options.draggable&&(this.options.draggable={});var a=Object.clone(PP.util.tooltip._defaultOptions.general.draggable);this.options.draggable=
Object.extend(a,this.options.draggable)}},_setAjaxContentOptions:function(a){a.options=a.options||{parameters:{}};var b=Object.clone(PP.util.tooltip._defaultOptions.content.ajax),c=Object.clone(PP.util.tooltip._defaultOptions.content.ajax.parameters),b=Object.extend(b,a.options);this.onAjaxComplete=b.onComplete;b.onComplete=this._ajaxContentOnCompleteWrapper.bind(this);b.onSuccess=b.onSuccess.bind(this);b.onFailure=b.onFailure.bind(this);b.onCreate=b.onCreate.bind(this);b.parameters=Object.extend(c,
a.options.parameters);this.content={url:a.url,options:b}},_ajaxContentOnCompleteWrapper:function(a){this._insertCloseIcon();"lazy"===this.options.ajaxLoad&&(this.lazyLoaded=!0);if(this.onAjaxComplete)this.onAjaxComplete(a);this._makeDraggable()},_scrollTo:function(){},_createTooltip:function(){this.tooltip=(new Element("span",{className:PP.util.tooltip._classNames.tooltip})).hide();PP.util.tooltip._container.element.insert(this.tooltip);null!==this.options.dimensions&&PP.util.tooltip._setAdjustedDimensions(this.tooltip,
this.options.dimensions);this.tooltip.remove();null!==this.options.ajaxLoad&&"create"!==this.options.ajaxLoad||this._setTooltipContent();this._createCloseIcon();this.tooltip.hide();PP.util.tooltip._container.element.insert({bottom:this.tooltip})},_makeDraggable:function(){if(this.options.draggable&&PP.util.tooltip.prerequisites.scriptaculous.dragdrop()&&null===this.dragObj){var a=this.options.draggable;if("function"===typeof a.onDrag){var b=a.onDrag;a.onDrag=function(a,d){this._setKeepActive.bind(this,
!0);b.bind(a)(a,d)}.bind(this)}else a.onDrag=this._setKeepActive.bind(this,!0);this.dragObj=new Draggable(this.tooltip,a)}},_destroyDraggable:function(){"object"===typeof this.dragObj&&null!==this.dragObj&&(this.dragObj.destroy(),this.dragObj=null)},_setTooltipContent:function(){var a=!1;switch(typeof this.content){case "object":Object.isElement(this.content)?this.tooltip.insert(this.content):this.content.url&&"string"===typeof this.content.url&&(this._setAjaxContent(),a=!0);break;case "string":this.tooltip.update("<span>"+
this.content+"</span");break;default:throw Error("Unknown content type for tooltip (target id "+this.target.identify()+")");}this._createCloseIcon();a||this._insertCloseIcon()},_createCloseIcon:function(){this.options.useCloseIcon&&!this.closeIcon&&(this.closeIcon=new Element("a",{href:"#",className:PP.util.tooltip._classNames.closeIcon,title:PP.util.tooltip._texts.closeIconTitle[this.options.lang]}))},_insertCloseIcon:function(){this.options.useCloseIcon&&this.closeIcon&&!this.closeIcon.parentNode&&
this.tooltip.insert(this.closeIcon)},_setAjaxContent:function(){if("live"===this.options.ajaxLoad||"lazy"===this.options.ajaxLoad)"lazy"===this.options.ajaxLoad&&!1===this.lazyLoaded&&this._createPlaceHolder(),!0===this.options.ajaxLoadUsePlaceHolder&&null!==this.placeHolder&&this.tooltip.update(this.placeHolder);this.req=new Ajax.Updater(this.tooltip,this.content.url,this.content.options);this.req=null},_createPlaceHolder:function(){!1===this.options.ajaxLoadUsePlaceHolder?this.placeHolder=null:
(this.placeHolder=PP.util.tooltip._placeHolder.cloneNode(!0),this.placeHolder.update(PP.util.tooltip._texts.contentLoading[this.options.lang]),null!==this.options.dimensions&&PP.util.tooltip._setAdjustedDimensions(this.placeHolder,this.options.dimensions))},_setKeepActive:function(a,b){this.active&&(this.keepActive=a);!1===this.keepActive&&(this.to=setTimeout(this._doHide.bind(this,!1),this.options.delayOut))},_setupListeners:function(){var a=!0===this.options.activateOnClick?"click":"mouseenter";
this._addListener(this.targetListeners,this.target,a,this._showTooltip.bind(this));this.options.useCloseIcon||this.options.hideCloseIcon||this._addListener(this.targetListeners,this.target,"mouseleave",this._hideTooltip.bind(this));!0===this.options.activateOnClick&&this._addListener(this.targetListeners,this.target,"mouseenter",this._setKeepActive.bind(this,!0));this.options.useCloseIcon&&!this.options.hideCloseIcon&&this._addListener(this.tooltipListeners,this.closeIcon,"click",this._doHide.bind(this,
!0));var b=this;$A(this.options.proxies).each(function(c){this._addListener(this.targetListeners,c,a,this._showTooltip.bind(this));b.options.useCloseIcon||this.options.hideCloseIcon||this._addListener(this.targetListeners,c,"mouseleave",this._hideTooltip.bind(this));!0===b.options.activateOnClick&&this._addListener(this.targetListeners,c,"mouseenter",this._setKeepActive.bind(this,!0))}.bind(this));this._addListener(this.tooltipListeners,this.tooltip,"mouseenter",this._setKeepActive.bind(this,!0));
this.options.useCloseIcon||this._addListener(this.tooltipListeners,this.tooltip,"mouseleave",this._hideTooltip.bind(this))},_addListener:function(a,b,c,d){a[c]=d;b.observe(c,d)},_teardownListeners:function(){var a=null;for(a in this.targetListeners)this.targetListeners.hasOwnProperty(a)&&this._removeListener(this.targetListeners,this.target,a);for(a in this.tooltipListeners)this.tooltipListeners.hasOwnProperty(a)&&this._removeListener(this.tooltipListeners,this.tooltip,a)},_removeListener:function(a,
b,c){b.stopObserving(c,a[c])},_showTooltip:function(a){this.keepActive=!0;clearTimeout(this.to);!0===this.active?!0===this.options.activateOnClick&&this._doHide.bind(this,!0):this.to=setTimeout(this._doShow.bind(this,a),this.options.delayIn)},_doShow:function(a){if(!1===this.active){(this.content.url&&"live"===this.options.ajaxLoad||"lazy"===this.options.ajaxLoad&&!1===this.lazyLoaded)&&this._setTooltipContent();a=Element.getLayout(this.tooltip);a=a.get("height")+a.get("border-top")+a.get("border-bottom")+
a.get("padding-top")+a.get("padding-bottom");var b=this.target.viewportOffset()[1],c=document.viewport.getHeight();a=Math.max(b+a-c,0);Element.clonePosition(this.tooltip,this.target,{offsetLeft:this.options.offsetLeft+document.viewport.getScrollOffsets().left,offsetTop:this.options.offsetTop-a+document.viewport.getScrollOffsets().top,setWidth:!1,setHeight:!1});this.options.hideOthers&&PP.util.tooltip.hideAll();PP.util.tooltip.prerequisites.scriptaculous.effects()?this.tooltip.visualEffect(this.options.effectIn.name,
this.options.effectIn.options):this.tooltip.show();this.target.addClassName(PP.util.tooltip._classNames.activated);this.active=!0;(!this.content.url||this.lazyLoaded&&"live"!==this.options.ajaxLoad)&&this._makeDraggable();this.options.useCloseIcon&&setTimeout(function(){this.closeIcon.focus()}.bind(this),50);this.target.fire(PP.util.tooltip._events.show,{tooltip:this})}},_hideTooltip:function(){this.keepActive=!1;clearTimeout(this.to);this.to=setTimeout(this._doHide.bind(this,!1),this.options.delayOut)},
_doHide:function(a,b){b&&b.preventDefault();if(!0===a||!0===this.active&&!1===this.keepActive)!a&&PP.util.tooltip.prerequisites.scriptaculous.effects()?this.tooltip.visualEffect(this.options.effectOut.name,this.options.effectOut.options):this.tooltip.hide(),this.target.removeClassName(PP.util.tooltip._classNames.activated),this.active=!1,this._destroyDraggable(),this.target.fire(PP.util.tooltip._events.hide,{tooltip:this})}});$(document).on("keyup",function(a){27==a.keyCode&&PP.util.tooltip.hideAll()});
$(document).on("click",function(a){var b=a.findElement();b&&1===b.nodeType&&(b.hasClassName("pp-tooltip-activate-onclick")||b.up(".pp-tooltip-activate-onclick")||a.findElement("#pp-tooltip-container")||PP.util.tooltip.hideAll())});
PP.util.tooltip.checkPrerequisites=function(){PP.util.tooltip.prerequisites={scriptaculous:{effects:function(){return"object"===typeof Effect&&"object"===typeof Effect.Methods&&"function"===typeof Effect.Methods.visualEffect},dragdrop:function(){return"object"===typeof Draggables&&"function"===typeof Draggable&&"object"===typeof Draggable._dragging}}}};PP.util.tooltip.checkPrerequisites();
PP.util.tooltip._classNames={activateTooltipOnClick:"pp-tooltip-activate-onclick",activated:"pp-tooltip-activated",tooltip:"pp-tooltip",placeHolder:"pp-tooltip-placeholder",closeIcon:"pp-tooltip-close-icon",indicatorIcon:"pp-tooltip-indicator-icon"};PP.util.tooltip._domIds={container:"pp-tooltip-container"};PP.util.tooltip._events={show:"pp:tooltip-show",hide:"pp:tooltip-hide"};
Object.extend(PP.util.tooltip,{_placeHolder:new Element("div",{className:PP.util.tooltip._classNames.placeHolder}),_container:{id:PP.util.tooltip._domIds.container,element:null},_texts:{contentLoading:{en:"Loading",sv:"Uppdaterar"},closeIconTitle:{en:"Close",sv:"Stäng"}},_defaultOptions:{general:{lang:"en",activateOnClick:!1,indicator:null,wrapped:!1,dimensions:null,hideOthers:!1,delayIn:500,delayOut:500,offsetLeft:0,offsetTop:0,ajaxLoad:"create",ajaxLoadUsePlaceHolder:!0,effectIn:{name:"Appear",
options:{duration:.2}},effectOut:{name:"Fade",options:{duration:.3}},draggable:!1,useCloseIcon:!1,hideCloseIcon:!1,cloneElementContent:!0},content:{ajax:{parameters:{},onSuccess:Prototype.emptyFunction,onFailure:Prototype.emptyFunction,onComplete:Prototype.emptyFunction,onCreate:Prototype.emptyFunction}}},_tooltips:$H(),_checkContainer:function(){if(null===PP.util.tooltip._container.element){var a=$(PP.util.tooltip._container.id);a||(a=new Element("div",{id:PP.util.tooltip._container.id}));PP.util.tooltip._container.element=
a;$(document.body).insert({top:a});a=new Element("span",{className:PP.util.tooltip._classNames.indicatorIcon+"-nill"});$(document.body).insert({top:a});var b=a.getStyle("backgroundImage")||null;"string"!==typeof b||0===b.length||"none"===b?b=null:(b=b.replace(/url\((.*)\)/,"$1"),b=b.replace(/["']/g,""));PP.util.tooltip._nillSrc=b;a.remove()}},create:function(a,b,c){PP.util.tooltip._checkContainer();c=c||{};var d=null;Object.isArray(a)?(d=a.shift(),c.proxies=a):d=a;a=new PP.util.tooltip(d,b,c);if(!a)return null;
PP.util.tooltip._registerTooltip(a);return a},destroy:function(a){a=PP.util.tooltip.get(a);if(!a)return!1;a._hideTooltip();PP.util.tooltip._unregisterTooltip(a);return!0},get:function(a){a=$(a);var b=null;a&&(a=a.readAttribute("id"),b=PP.util.tooltip._tooltips.get(a));return b},hideAll:function(){this._tooltips.each(function(a){a=a.value;a.active&&a._doHide(!0)})},_registerTooltip:function(a){var b=a.target.identify();PP.util.tooltip._tooltips.set(b,a)},_unregisterTooltip:function(a){var b=a.target.identify();
a._teardownListeners();PP.util.tooltip._tooltips.unset(b)},count:function(){return PP.util.tooltip._tooltips.size()},_getBordersAndPadding:function(a){var b=0;try{b=parseInt(a.getStyle("borderLeftWidth").replace("px","")),b+=parseInt(a.getStyle("borderRightWidth").replace("px","")),b+=parseInt(a.getStyle("paddingLeft").replace("px","")),b+=parseInt(a.getStyle("paddingRight").replace("px",""))}catch(c){console.log("error in PP.util.tooltip._getBordersAndPadding, parsing X:"+c)}var d=0;try{d=parseInt(a.getStyle("borderTopWidth").replace("px",
"")),d+=parseInt(a.getStyle("borderBottomWidth").replace("px","")),d+=parseInt(a.getStyle("paddingTop").replace("px","")),d+=parseInt(a.getStyle("paddingBottom").replace("px",""))}catch(e){console.log("error in PP.util.tooltip._getBordersAndPadding, parsing Y:"+e)}return{x:b||0,y:d||0}},_setAdjustedDimensions:function(a,b){var c=PP.util.tooltip._getBordersAndPadding(a),d=b.width,d=void 0===d||null===d||"auto"===d?"auto":d-c.x+"px",e=b.height,e=void 0===e||null===e||"auto"===e?"auto":e-c.y+"px";a.setStyle({width:d,
height:e})}});
var TableJs=function(){function a(a,b){this.tableId=a;(this.table=e.getElementById(this.tableId))&&(this.colspan=this.table.rows[0].cells.length);var c=b;c||(c={});for(var d in f)c.hasOwnProperty(d)||(c[d]=f[d]);this.options=c;this.currentInsertions={map:{},array:[]}}function b(a,b){return a+"_tr_"+(b+"").replace(/[@ ,.?!$&()^~*]/g,"_")}function c(a,b){var c;return b?(c=b.previousSibling,b.parentNode.removeChild(b),c):null}function d(a,b,c){a&&"object"==typeof Effect&&"function"==typeof Effect.Highlight&&(b=
{afterFinish:function(b){delete d.effectsRunning[b.element.id];c&&c(a)},duration:"number"==typeof b?b:2},!d.effectsRunning[a.id]&&(d.effectsRunning[a.id]=new Effect.Highlight(a,b)))}var e=window.document,f={maxOpenRows:1,maxOpenOverflow:"close-oldest",toggle:!1};a.prototype.openRow=function(a,c){var f=e.getElementById(b(this.tableId,a)),g="inserted-row-"+a,m;if(this.currentInsertions.map[a])this.options.toggle?this.closeRow(a):d(this.currentInsertions.map[a].insertedRow),c&&c(null);else{if(0<this.options.maxOpenRows&&
this.currentInsertions.array.length>=this.options.maxOpenRows)if("function"==typeof this.options.maxOpenOverflow){if(!this.options.maxOpenOverflow(f))return}else if("close-oldest"===this.options.maxOpenOverflow)m=this.currentInsertions.array[0],this.closeRow(m);else if("close-newest"===this.options.maxOpenOverflow)m=this.currentInsertions.array[this.currentInsertions.array.length-1],this.closeRow(m);else{d(f);c&&c(null);return}m=e.createElement("tr");var n=e.createElement("td");m.id=g;m.className=
[f.className,"inserted-row"].join(" ");n.colSpan=this.colspan;m.appendChild(n);f.nextSibling?f.parentNode.insertBefore(m,f.nextSibling):f.parentNode.appendChild(m);this.currentInsertions.array.push(a);f=this.currentInsertions.map[a]={row:f,insertedRow:m,insertedCell:n};c&&c(f)}};a.prototype.closeRow=function(a,b){var d=c(this,e.getElementById("inserted-row-"+a));delete this.currentInsertions.map[a];for(var f=0,m,n=this.currentInsertions.array.length;f<n;++f)if(m=this.currentInsertions.array[f],m===
a){this.currentInsertions.array.splice(f,1);break}b&&b(d)};a.prototype.closeRows=function(a){for(var b=this.currentInsertions.array,d,f=[],m=0,n=b.length;m<n;++m)(d=c(this,e.getElementById("inserted-row-"+b[m])))&&f.push(d);this.currentInsertions={map:{},array:[]};a&&a(f)};a.prototype.highlightRow=function(a){var b=2,c=function(){},f;if(1<arguments.length)switch(f=arguments[1],{}.toString.call(f)){case "[object Number]":b=f;break;case "[object Function]":c=f;break;case "[object Object]":"number"==
typeof f.duration&&(b=f.duration),"function"==typeof f.callback&&(c=f.callback)}d(e.getElementById(this.tableId+"_tr_"+a),b,c)};d.effectsRunning={};return{create:function(b,c){var d=new a(b,c);return d.table?d:null},tableRowId:b,columnSort:function(){}}}();function openSpellingWindow(a,b){for(var c=200,d=eval(a).value.split("\n"),e=0,f=d.length;e<f;++e)c=0===d[e].length?c+8:c+18*(1+parseInt(d[e].length/80));300>c&&(c=300);c>screen.availHeight-100&&(c=screen.availHeight-100);(c=window.open("/servlets/speling?command=fetchText&form_element_path="+a,"speling"+b,"width=600,height="+c+",scrollbars,resizable"))&&c.focus()};var pixelPerChar=null;function setupAutoResizeTextarea(a){a.style.display="inline";var b=a.scrollWidth;a.style.display="none";pixelPerChar=b/36}function autoResizeTextarea(a,b,c){null===pixelPerChar&&setupAutoResizeTextarea(c);c=a.offsetWidth-15;for(var d=a.value.split("\n"),e=0,f=0,h=d.length;f<h;++f)e++,d[f].length*pixelPerChar>c&&(e+=d[f].length*pixelPerChar/c);a.rows=e>b?Math.min(parseInt(e),b+25):b}
function autoResizeTextField(a,b){b=Object.extend({minLength:5,marginBeforeIncreasingSize:1,marginBeforeDecreasingSize:10,addedSize:5},b);a.size<a.value.length+b.marginBeforeIncreasingSize?a.size=Math.min(100,Math.max(b.minLength,a.value.length+b.addedSize)):a.size>a.value.length+b.marginBeforeDecreasingSize&&(a.size=Math.min(100,Math.max(b.minLength,a.value.length+b.addedSize)))};